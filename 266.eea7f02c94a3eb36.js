"use strict";(self.webpackChunkvgmq=self.webpackChunkvgmq||[]).push([[266],{1266:(P,f,i)=>{i.r(f),i.d(f,{RegisterModule:()=>B});var m=i(6895),d=i(9116),x=i(1577),s=i(4006),h=i(8746),_=i(2340),e=i(4650),v=i(4857),y=i(5657),T=i(5412),C=i(263),u=i(7009),p=i(4700);const Z=["recaptcha"];function k(n,o){if(1&n&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.formErrorMessage," ")}}function b(n,o){1&n&&(e.ynx(0),e._uU(1," Username should be at least 4 characters long. "),e.BQk())}function Q(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.username.errors.serverError," ")}}function I(n,o){if(1&n&&(e.TgZ(0,"div",18),e.YNc(1,b,2,0,"ng-container",19),e.YNc(2,Q,2,1,"ng-container",19),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.username.errors.minlength),e.xp6(1),e.Q6J("ngIf",t.username.errors.serverError)}}function A(n,o){1&n&&(e.ynx(0),e._uU(1," Please enter a correct email. "),e.BQk())}function Y(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.email.errors.serverError," ")}}function J(n,o){if(1&n&&(e.TgZ(0,"div",18),e.YNc(1,A,2,0,"ng-container",19),e.YNc(2,Y,2,1,"ng-container",19),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.email.errors.email),e.xp6(1),e.Q6J("ngIf",t.email.errors.serverError)}}function R(n,o){1&n&&(e.ynx(0),e._uU(1," Password should at least have 3 characters. "),e.BQk())}function U(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.password.errors.serverError," ")}}function N(n,o){if(1&n&&(e.TgZ(0,"div",18),e.YNc(1,R,2,0,"ng-container",19),e.YNc(2,U,2,1,"ng-container",19),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.password.errors.minlength),e.xp6(1),e.Q6J("ngIf",t.password.errors.serverError)}}function w(n,o){1&n&&e._UZ(0,"span",20)}const g=function(n){return{"is-invalid":n}};function S(n,o){1&n&&(e.TgZ(0,"div",1)(1,"div",2)(2,"span",3),e._uU(3,"Loading..."),e.qZA()()())}const q=[{path:"",component:(()=>{class n{constructor(t,r,a,c,l,E,M){this.fb=t,this.authHttpService=r,this.router=a,this.cookieService=c,this.dialog=l,this.authService=E,this.snackBar=M,this.loading=!1,this.environment=_.N}ngOnInit(){this.signupForm=this.fb.group({username:["",[s.kI.required.bind(this),s.kI.minLength(4)]],email:["",[s.kI.required.bind(this),s.kI.email.bind(this)]],password:["",[s.kI.required.bind(this),s.kI.minLength(3)]]})}ngOnDestroy(){this.dialog.closeAll()}registerUser(t){this.loading=!0,this.authHttpService.register(this.signupForm.value,t).pipe((0,h.x)(()=>this.loading=!1)).subscribe({next:()=>{this.signupForm.reset(),this.snackBar.open("Account created! Please check your emails to activate your account",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:1e4}),this.router.navigate(["/"])},error:r=>{r=r.error,Array.isArray(r.message)?r.message.map(a=>{if("string"!=typeof a){const c=this.signupForm.get(a.property);c?.markAsTouched(),c?.setErrors({serverError:a.errors})}}):this.formErrorMessage=r.message,this.recaptchaComponent.reset()}})}get username(){return this.signupForm.get("username")}get email(){return this.signupForm.get("email")}get password(){return this.signupForm.get("password")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(v.C),e.Y36(d.F0),e.Y36(y.N),e.Y36(T.uw),e.Y36(C.e),e.Y36(u.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],viewQuery:function(t,r){if(1&t&&e.Gf(Z,5),2&t){let a;e.iGM(a=e.CRH())&&(r.recaptchaComponent=a.first)}},decls:36,vars:17,consts:[[1,"form-login",3,"formGroup","ngSubmit"],[1,"h3","mb-3","font-weight-normal","text-center"],[1,"row"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],[1,"col-md-8","offset-md-2"],[1,"form-group"],["type","text","formControlName","username","placeholder","ex : Dark sasuke","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","email","formControlName","email","placeholder","ex : Darksaasuke420@sulfura.com","required","",1,"form-control",3,"ngClass"],["type","password","formControlName","password","placeholder","Password","required","",1,"form-control",3,"ngClass"],["theme","dark","size","invisible",1,"text-center",3,"siteKey","resolved"],["recaptcha",""],[1,"col","text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/",1,"btn","btn-primary"],["role","alert",1,"col-md-12","alert","alert-danger"],[1,"invalid-feedback"],[4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(t,r){if(1&t){const a=e.EpF();e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){e.CHM(a);const l=e.MAs(26);return e.KtG(r.loading||l.execute())}),e.TgZ(1,"h3",1),e._uU(2,"Inscription"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,k,2,1,"div",3),e.TgZ(5,"div",4)(6,"div",5)(7,"label"),e._uU(8,"Username"),e.qZA(),e._UZ(9,"input",6),e.YNc(10,I,3,2,"div",7),e.qZA()()(),e.TgZ(11,"div",2)(12,"div",4)(13,"div",5)(14,"label"),e._uU(15,"Email address"),e.qZA(),e._UZ(16,"input",8),e.YNc(17,J,3,2,"div",7),e.qZA()()(),e.TgZ(18,"div",2)(19,"div",4)(20,"div",5)(21,"label"),e._uU(22,"Password"),e.qZA(),e._UZ(23,"input",9),e.YNc(24,N,3,2,"div",7),e.qZA()()(),e.TgZ(25,"re-captcha",10,11),e.NdJ("resolved",function(l){return l&&r.registerUser(l)}),e.qZA(),e.TgZ(27,"div",2)(28,"div",12)(29,"button",13),e._uU(30," Sign up "),e.YNc(31,w,1,0,"span",14),e.qZA()()()(),e.TgZ(32,"div",15),e._uU(33," Already have an account ? "),e.TgZ(34,"a",16),e._uU(35,"Login"),e.qZA()()}2&t&&(e.Q6J("formGroup",r.signupForm),e.xp6(4),e.Q6J("ngIf",r.formErrorMessage),e.xp6(5),e.Q6J("ngClass",e.VKq(11,g,r.username.invalid&&(r.username.dirty||r.username.touched))),e.xp6(1),e.Q6J("ngIf",r.username.errors),e.xp6(6),e.Q6J("ngClass",e.VKq(13,g,r.email.invalid&&(r.email.dirty||r.email.touched))),e.xp6(1),e.Q6J("ngIf",r.email.errors),e.xp6(6),e.Q6J("ngClass",e.VKq(15,g,r.password.invalid&&(r.password.dirty||r.password.touched))),e.xp6(1),e.Q6J("ngIf",r.password.errors),e.xp6(1),e.Q6J("siteKey",r.environment.recaptchaKey),e.xp6(4),e.Q6J("disabled",r.signupForm.invalid||r.loading),e.xp6(2),e.Q6J("ngIf",r.loading))},dependencies:[m.mk,m.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,d.rH,p.wT],encapsulation:2}),n})()},{path:":token",component:(()=>{class n{constructor(t,r,a,c,l){this.authHttpService=t,this.authService=r,this.route=a,this.router=c,this.snackBar=l,this.loading=!1}ngOnInit(){this.loading=!0,this.route.paramMap.subscribe(t=>{this.authHttpService.confirm(t.get("token")).pipe((0,h.x)(()=>this.loading=!1)).subscribe({next:r=>{this.authService.setAccessTokenCookie(r.accessToken),this.authService.setRefreshTokenCookie(r.refreshToken),this.snackBar.open("Account activated!",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:5e3})},error:r=>{400===r.status&&this.snackBar.open("account already activated",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"danger",duration:5e3}),this.router.navigate(["/"])}})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.C),e.Y36(C.e),e.Y36(d.gz),e.Y36(d.F0),e.Y36(u.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirmation"]],decls:1,vars:1,consts:[["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(t,r){1&t&&e.YNc(0,S,4,0,"div",0),2&t&&e.Q6J("ngIf",r.loading)},dependencies:[m.O5],encapsulation:2}),n})()}];let B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.ez,x.m,d.Bz.forChild(q),p.lQ,p.a,u.ZX]}),n})()}}]);