"use strict";(self.webpackChunkvgmq=self.webpackChunkvgmq||[]).push([[219],{5219:(M,f,d)=>{d.r(f),d.d(f,{ResetPasswordModule:()=>Y});var m=d(9808),u=d(4521),C=d(3149),p=d(3290),a=d(3075),h=d(8746),g=d(2340),e=d(5e3),v=d(4857),b=d(263),c=d(7261);const w=["recaptcha"];function y(t,l){if(1&t&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.hij(" ",o.formErrorMessage," ")}}function R(t,l){if(1&t&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&t){const o=l.ngIf;e.xp6(1),e.hij(" ",o," ")}}function _(t,l){1&t&&e._UZ(0,"span",16)}const T=function(t){return{"is-invalid":t}},Z=["recaptcha"];function J(t,l){if(1&t&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.hij(" ",o.formErrorMessage," ")}}function q(t,l){if(1&t&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&t){const o=l.ngIf;e.xp6(1),e.hij(" ",o," ")}}function A(t,l){1&t&&e._UZ(0,"span",16)}const k=function(t){return{"is-invalid":t}},Q=[{path:"",component:(()=>{class t{constructor(o,r,s,n,i){this.fb=o,this.router=r,this.authHttpService=s,this.authService=n,this.snackBar=i,this.loading=!1,this.environment=g.N,this.form=this.fb.group({email:["",a.kI.required.bind(this)]})}submit(o){this.loading=!0,this.authHttpService.requestResetPassword(this.form.value,o).pipe((0,h.x)(()=>this.loading=!1)).subscribe({next:()=>{this.snackBar.open("Email successfully sent",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:1e4}),this.form.reset(),this.recaptchaComponent.reset()},error:r=>{Array.isArray(r.message)?r.message.map(s=>{if("string"!=typeof s){const n=this.form.get(s.property);null==n||n.markAsTouched(),null==n||n.setErrors({serverError:s.errors})}}):this.formErrorMessage=r.message,this.recaptchaComponent.reset()}})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(a.qu),e.Y36(u.F0),e.Y36(v.C),e.Y36(b.e),e.Y36(c.ux))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-request-reset-password"]],viewQuery:function(o,r){if(1&o&&e.Gf(w,5),2&o){let s;e.iGM(s=e.CRH())&&(r.recaptchaComponent=s.first)}},decls:18,vars:9,consts:[[1,"row","align-items-center"],[1,"col-md-12"],[1,"form-login",3,"formGroup","ngSubmit"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],[1,"form-group"],["type","email","formControlName","email","placeholder","email","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["theme","dark","size","invisible",3,"siteKey","resolved"],["recaptcha",""],[1,"col-md-12","text-center","mt-3"],["type","submit",1,"btn","btn-primary","col-md-6",3,"disabled"],["class","spinner-border spinner-border-sm","type","button","role","status","aria-hidden","true",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/"],["role","alert",1,"col-md-12","alert","alert-danger"],[1,"invalid-feedback"],["type","button","role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,r){if(1&o){const s=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){e.CHM(s);const i=e.MAs(10);return r.loading||i.execute()}),e.YNc(3,y,2,1,"div",3),e.TgZ(4,"div",4)(5,"label"),e._uU(6,"Email"),e.qZA(),e._UZ(7,"input",5),e.YNc(8,R,2,1,"div",6),e.qZA(),e.TgZ(9,"re-captcha",7,8),e.NdJ("resolved",function(i){return i&&r.submit(i)}),e.qZA(),e.TgZ(11,"div",9)(12,"button",10),e.YNc(13,_,1,0,"span",11),e._uU(14," Reset password "),e.qZA()()(),e.TgZ(15,"div",12)(16,"a",13),e._uU(17,"Back to login"),e.qZA()()()()}if(2&o){let s,n;e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(1),e.Q6J("ngIf",r.formErrorMessage),e.xp6(4),e.Q6J("ngClass",e.VKq(7,T,(null==(s=r.form.get("email"))?null:s.invalid)&&((null==(s=r.form.get("email"))?null:s.dirty)||(null==(s=r.form.get("email"))?null:s.touched)))),e.xp6(1),e.Q6J("ngIf",null==(n=r.form.get("email"))||null==n.errors?null:n.errors.serverError),e.xp6(1),e.Q6J("siteKey",r.environment.recaptchaKey),e.xp6(3),e.Q6J("disabled",r.loading),e.xp6(1),e.Q6J("ngIf",r.loading)}},directives:[a._Y,a.JL,a.sg,m.O5,a.Fj,a.JJ,a.u,a.Q7,m.mk,p.wT,u.yS],encapsulation:2}),t})()},{path:":token",component:(()=>{class t{constructor(o,r,s,n,i,x){this.fb=o,this.router=r,this.authHttpService=s,this.authService=n,this.snackBar=i,this.route=x,this.loading=!1,this.environment=g.N,this.form=this.fb.group({password:["",a.kI.required.bind(this)]})}submit(o){this.loading=!0,this.route.paramMap.subscribe(r=>{this.authHttpService.resetPassword(this.form.value,r.get("token"),o).pipe((0,h.x)(()=>this.loading=!1)).subscribe({next:s=>{this.authService.setAccessTokenCookie(s.accessToken),this.authService.setRefreshTokenCookie(s.refreshToken),this.snackBar.open("Password successfully updated!",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:5e3}),this.router.navigate(["/"])},error:s=>{Array.isArray(s.message)?s.message.map(n=>{if("string"!=typeof n){const i=this.form.get(n.property);null==i||i.markAsTouched(),null==i||i.setErrors({serverError:n.errors})}}):this.formErrorMessage=s.message,this.recaptchaComponent.reset()}})})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(a.qu),e.Y36(u.F0),e.Y36(v.C),e.Y36(b.e),e.Y36(c.ux),e.Y36(u.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reset-password"]],viewQuery:function(o,r){if(1&o&&e.Gf(Z,5),2&o){let s;e.iGM(s=e.CRH())&&(r.recaptchaComponent=s.first)}},decls:18,vars:9,consts:[[1,"row","align-items-center"],[1,"col-md-12"],[1,"form-login",3,"formGroup","ngSubmit"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],[1,"form-group"],["type","password","formControlName","password","placeholder","password","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["theme","dark","size","invisible",3,"siteKey","resolved"],["recaptcha",""],[1,"col-md-12","text-center","mt-3"],["type","submit",1,"btn","btn-primary","col-md-6",3,"disabled"],["class","spinner-border spinner-border-sm","type","button","role","status","aria-hidden","true",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/"],["role","alert",1,"col-md-12","alert","alert-danger"],[1,"invalid-feedback"],["type","button","role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,r){if(1&o){const s=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){e.CHM(s);const i=e.MAs(10);return r.loading||i.execute()}),e.YNc(3,J,2,1,"div",3),e.TgZ(4,"div",4)(5,"label"),e._uU(6,"New Password"),e.qZA(),e._UZ(7,"input",5),e.YNc(8,q,2,1,"div",6),e.qZA(),e.TgZ(9,"re-captcha",7,8),e.NdJ("resolved",function(i){return i&&r.submit(i)}),e.qZA(),e.TgZ(11,"div",9)(12,"button",10),e.YNc(13,A,1,0,"span",11),e._uU(14," Update password "),e.qZA()()(),e.TgZ(15,"div",12)(16,"a",13),e._uU(17,"Back to login"),e.qZA()()()()}if(2&o){let s,n;e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(1),e.Q6J("ngIf",r.formErrorMessage),e.xp6(4),e.Q6J("ngClass",e.VKq(7,k,(null==(s=r.form.get("password"))?null:s.invalid)&&((null==(s=r.form.get("password"))?null:s.dirty)||(null==(s=r.form.get("password"))?null:s.touched)))),e.xp6(1),e.Q6J("ngIf",null==(n=r.form.get("password"))||null==n.errors?null:n.errors.serverError),e.xp6(1),e.Q6J("siteKey",r.environment.recaptchaKey),e.xp6(3),e.Q6J("disabled",r.loading),e.xp6(1),e.Q6J("ngIf",r.loading)}},directives:[a._Y,a.JL,a.sg,m.O5,a.Fj,a.JJ,a.u,a.Q7,m.mk,p.wT,u.yS],encapsulation:2}),t})()}];let Y=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.ez,C.m,u.Bz.forChild(Q),p.lQ,p.a,c.ZX]]}),t})()}}]);