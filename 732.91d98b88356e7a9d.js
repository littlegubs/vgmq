"use strict";(self.webpackChunkvgmq=self.webpackChunkvgmq||[]).push([[732],{1732:(D,_,c)=>{c.r(_),c.d(_,{RegisterModule:()=>z});var l=c(9808),m=c(1083),b=c(3149),n=c(3075),u=c(8746),C=c(2340),e=c(5e3),g=c(8966),f=c(4857),p=c(3290);const y=["recaptchaPassword"];function T(t,i){if(1&t&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.hij(" ",r.formErrorMessage," ")}}function Z(t,i){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=i.$implicit;e.xp6(1),e.hij(" ",r," ")}}function w(t,i){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=i.$implicit;e.xp6(1),e.hij(" ",r," ")}}function k(t,i){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,Z,2,1,"ng-container",15),e.YNc(2,w,2,1,"ng-container",15),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.limitedAccessForm.get("password").getError("serverError")),e.xp6(1),e.Q6J("ngForOf",r.limitedAccessError)}}function Q(t,i){1&t&&e._UZ(0,"span",16)}const A=function(t){return{"is-invalid":t}};let J=(()=>{class t{constructor(r,s){this.dialogRef=r,this.authHttpService=s,this.limitedAccessLoading=!1,this.limitedAccessForm=new n.cw({password:new n.NI("",n.kI.required.bind(this))}),this.environment=C.N}testLimitedAccessPassword(r){this.limitedAccessError=void 0,this.formErrorMessage=void 0,this.limitedAccessLoading=!0,this.authHttpService.limitedAccessPassword(this.limitedAccessForm.get("password").value,r).pipe((0,u.x)(()=>this.limitedAccessLoading=!1)).subscribe({next:()=>{this.dialogRef.close(!0)},error:s=>{Array.isArray(s.message)?s.message.map(o=>{if("string"!=typeof o){const a=this.limitedAccessForm.get(o.property);null==a||a.markAsTouched(),null==a||a.setErrors({serverError:o.errors})}}):this.formErrorMessage=s.message,this.recaptchaPasswordComponent.reset()}})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(g.so),e.Y36(f.C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-limited-access"]],viewQuery:function(r,s){if(1&r&&e.Gf(y,5),2&r){let o;e.iGM(o=e.CRH())&&(s.recaptchaPasswordComponent=o.first)}},decls:27,vars:12,consts:[["mat-dialog-title",""],[1,"col-md-12"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"input-group",3,"ngClass"],["type","password","placeholder","Secret password","aria-label","Secret password","aria-describedby","button-addon2","formControlName","password",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["theme","dark","size","invisible",1,"text-center",3,"siteKey","resolved"],["recaptchaPassword",""],[1,"col-md-12","text-center","mt-3"],["type","submit",1,"btn","btn-primary","col-md-6",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["routerLink","/"],["role","alert",1,"col-md-12","alert","alert-danger"],[1,"invalid-feedback"],[4,"ngFor","ngForOf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"h1",0),e._uU(1,"Website in progress"),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,T,2,1,"div",2),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){e.CHM(o);const d=e.MAs(19);return s.limitedAccessLoading||d.execute()}),e.TgZ(5,"p"),e._uU(6,"This website is under development, to create an account, please enter the magic password below"),e.qZA(),e.TgZ(7,"p"),e._uU(8," If you want to get an early access to give some feedback, "),e._UZ(9,"br"),e._uU(10,"or help me on some stuff (design, coding, server hosting, etc...)"),e._UZ(11,"br"),e._uU(12,"DM me on Discord! "),e.TgZ(13,"strong"),e._uU(14,"gubs#0133"),e.qZA()(),e.TgZ(15,"div",4),e._UZ(16,"input",5),e.qZA(),e.YNc(17,k,3,2,"div",6),e.TgZ(18,"re-captcha",7,8),e.NdJ("resolved",function(d){return d&&s.testLimitedAccessPassword(d)}),e.qZA(),e.TgZ(20,"div",9)(21,"button",10),e.YNc(22,Q,1,0,"span",11),e._uU(23," Enter "),e.qZA()(),e.TgZ(24,"div",9)(25,"a",12),e._uU(26,"Come back to login"),e.qZA()()()()}2&r&&(e.xp6(3),e.Q6J("ngIf",s.formErrorMessage),e.xp6(1),e.Q6J("formGroup",s.limitedAccessForm),e.xp6(11),e.Q6J("ngClass",e.VKq(8,A,s.limitedAccessForm.get("password").hasError("serverError"))),e.xp6(1),e.Q6J("ngClass",e.VKq(10,A,s.limitedAccessForm.get("password").hasError("serverError"))),e.xp6(1),e.Q6J("ngIf",s.limitedAccessForm.get("password").hasError("serverError")||s.limitedAccessError),e.xp6(1),e.Q6J("siteKey",s.environment.recaptchaKey),e.xp6(3),e.Q6J("disabled",s.limitedAccessLoading),e.xp6(1),e.Q6J("ngIf",s.limitedAccessLoading))},directives:[g.uh,l.O5,n._Y,n.JL,n.sg,l.mk,n.Fj,n.JJ,n.u,l.sg,p.wT,m.yS],encapsulation:2}),t})();var U=c(2160),x=c(263),h=c(7261);const I=["recaptcha"];function Y(t,i){if(1&t&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.hij(" ",r.formErrorMessage," ")}}function E(t,i){1&t&&(e.ynx(0),e._uU(1," Username should be at least 4 characters long. "),e.BQk())}function F(t,i){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw(2);e.xp6(1),e.hij(" ",r.username.errors.serverError," ")}}function L(t,i){if(1&t&&(e.TgZ(0,"div",18),e.YNc(1,E,2,0,"ng-container",19),e.YNc(2,F,2,1,"ng-container",19),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.username.errors.minlength),e.xp6(1),e.Q6J("ngIf",r.username.errors.serverError)}}function N(t,i){1&t&&(e.ynx(0),e._uU(1," Please enter a correct email. "),e.BQk())}function R(t,i){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw(2);e.xp6(1),e.hij(" ",r.email.errors.serverError," ")}}function q(t,i){if(1&t&&(e.TgZ(0,"div",18),e.YNc(1,N,2,0,"ng-container",19),e.YNc(2,R,2,1,"ng-container",19),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.email.errors.email),e.xp6(1),e.Q6J("ngIf",r.email.errors.serverError)}}function S(t,i){1&t&&(e.ynx(0),e._uU(1," Password should at least have 3 characters. "),e.BQk())}function M(t,i){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw(2);e.xp6(1),e.hij(" ",r.password.errors.serverError," ")}}function P(t,i){if(1&t&&(e.TgZ(0,"div",18),e.YNc(1,S,2,0,"ng-container",19),e.YNc(2,M,2,1,"ng-container",19),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.password.errors.minlength),e.xp6(1),e.Q6J("ngIf",r.password.errors.serverError)}}function B(t,i){1&t&&e._UZ(0,"span",20)}const v=function(t){return{"is-invalid":t}};function H(t,i){1&t&&(e.TgZ(0,"div",1)(1,"div",2)(2,"span",3),e._uU(3,"Loading..."),e.qZA()()())}const K=[{path:"",component:(()=>{class t{constructor(r,s,o,a,d,O,G){this.fb=r,this.authHttpService=s,this.router=o,this.cookieService=a,this.dialog=d,this.authService=O,this.snackBar=G,this.loading=!1,this.environment=C.N}ngOnInit(){this.signupForm=this.fb.group({username:["",[n.kI.required.bind(this),n.kI.minLength(4)]],email:["",[n.kI.required.bind(this),n.kI.email.bind(this)]],password:["",[n.kI.required.bind(this),n.kI.minLength(3)]]}),this.checkLimitedAccessAllowed()}ngOnDestroy(){this.dialog.closeAll()}registerUser(r){this.loading=!0,this.authHttpService.register(this.signupForm.value,r).pipe((0,u.x)(()=>this.loading=!1)).subscribe({next:()=>{this.signupForm.reset(),this.snackBar.open("Account created! Please check your emails to activate your account",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:1e4}),this.router.navigate(["/"])},error:s=>{s=s.error,Array.isArray(s.message)?s.message.map(o=>{if("string"!=typeof o){const a=this.signupForm.get(o.property);null==a||a.markAsTouched(),null==a||a.setErrors({serverError:o.errors})}}):this.formErrorMessage=s.message,this.recaptchaComponent.reset()}})}get username(){return this.signupForm.get("username")}get email(){return this.signupForm.get("email")}get password(){return this.signupForm.get("password")}checkLimitedAccessAllowed(){this.authHttpService.limitedAccessAllowed().subscribe(r=>{!1===r&&this.dialog.open(J,{disableClose:!0}).afterClosed().subscribe(s=>{void 0!==s&&this.checkLimitedAccessAllowed()})})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(n.qu),e.Y36(f.C),e.Y36(m.F0),e.Y36(U.N),e.Y36(g.uw),e.Y36(x.e),e.Y36(h.ux))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],viewQuery:function(r,s){if(1&r&&e.Gf(I,5),2&r){let o;e.iGM(o=e.CRH())&&(s.recaptchaComponent=o.first)}},decls:36,vars:17,consts:[[1,"form-login",3,"formGroup","ngSubmit"],[1,"h3","mb-3","font-weight-normal","text-center"],[1,"row"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],[1,"col-md-8","offset-md-2"],[1,"form-group"],["type","text","formControlName","username","placeholder","ex : Dark sasuke","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","email","formControlName","email","placeholder","ex : Darksaasuke420@sulfura.com","required","",1,"form-control",3,"ngClass"],["type","password","formControlName","password","placeholder","Password","required","",1,"form-control",3,"ngClass"],["theme","dark","size","invisible",1,"text-center",3,"siteKey","resolved"],["recaptcha",""],[1,"col","text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/",1,"btn","btn-primary"],["role","alert",1,"col-md-12","alert","alert-danger"],[1,"invalid-feedback"],[4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){e.CHM(o);const d=e.MAs(26);return s.loading||d.execute()}),e.TgZ(1,"h3",1),e._uU(2,"Inscription"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,Y,2,1,"div",3),e.TgZ(5,"div",4)(6,"div",5)(7,"label"),e._uU(8,"Username"),e.qZA(),e._UZ(9,"input",6),e.YNc(10,L,3,2,"div",7),e.qZA()()(),e.TgZ(11,"div",2)(12,"div",4)(13,"div",5)(14,"label"),e._uU(15,"Email address"),e.qZA(),e._UZ(16,"input",8),e.YNc(17,q,3,2,"div",7),e.qZA()()(),e.TgZ(18,"div",2)(19,"div",4)(20,"div",5)(21,"label"),e._uU(22,"Password"),e.qZA(),e._UZ(23,"input",9),e.YNc(24,P,3,2,"div",7),e.qZA()()(),e.TgZ(25,"re-captcha",10,11),e.NdJ("resolved",function(d){return d&&s.registerUser(d)}),e.qZA(),e.TgZ(27,"div",2)(28,"div",12)(29,"button",13),e._uU(30," Sign up "),e.YNc(31,B,1,0,"span",14),e.qZA()()()(),e.TgZ(32,"div",15),e._uU(33," Already have an account ? "),e.TgZ(34,"a",16),e._uU(35,"Login"),e.qZA()()}2&r&&(e.Q6J("formGroup",s.signupForm),e.xp6(4),e.Q6J("ngIf",s.formErrorMessage),e.xp6(5),e.Q6J("ngClass",e.VKq(11,v,s.username.invalid&&(s.username.dirty||s.username.touched))),e.xp6(1),e.Q6J("ngIf",s.username.errors),e.xp6(6),e.Q6J("ngClass",e.VKq(13,v,s.email.invalid&&(s.email.dirty||s.email.touched))),e.xp6(1),e.Q6J("ngIf",s.email.errors),e.xp6(6),e.Q6J("ngClass",e.VKq(15,v,s.password.invalid&&(s.password.dirty||s.password.touched))),e.xp6(1),e.Q6J("ngIf",s.password.errors),e.xp6(1),e.Q6J("siteKey",s.environment.recaptchaKey),e.xp6(4),e.Q6J("disabled",s.signupForm.invalid||s.loading),e.xp6(2),e.Q6J("ngIf",s.loading))},directives:[n._Y,n.JL,n.sg,l.O5,n.Fj,n.JJ,n.u,n.Q7,l.mk,p.wT,m.yS],encapsulation:2}),t})()},{path:":token",component:(()=>{class t{constructor(r,s,o,a,d){this.authHttpService=r,this.authService=s,this.route=o,this.router=a,this.snackBar=d,this.loading=!1}ngOnInit(){this.loading=!0,this.route.paramMap.subscribe(r=>{this.authHttpService.confirm(r.get("token")).pipe((0,u.x)(()=>this.loading=!1)).subscribe({next:s=>{this.authService.setAccessTokenCookie(s.accessToken),this.authService.setRefreshTokenCookie(s.refreshToken),this.snackBar.open("Account activated!",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:5e3})},error:s=>{400===s.status&&this.snackBar.open("account already activated",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"danger",duration:5e3}),this.router.navigate(["/"])}})})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(f.C),e.Y36(x.e),e.Y36(m.gz),e.Y36(m.F0),e.Y36(h.ux))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-confirmation"]],decls:1,vars:1,consts:[["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(r,s){1&r&&e.YNc(0,H,4,0,"div",0),2&r&&e.Q6J("ngIf",s.loading)},directives:[l.O5],encapsulation:2}),t})()}];let z=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,b.m,m.Bz.forChild(K),p.lQ,p.a,h.ZX]]}),t})()}}]);