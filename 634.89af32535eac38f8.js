"use strict";(self.webpackChunkvgmq=self.webpackChunkvgmq||[]).push([[634],{492:(L,x,l)=>{l.d(x,{I:()=>w});var t=l(2843),n=l(2340),_=l(262),b=l(5e3),C=l(520);let w=(()=>{class d{constructor(m){this.http=m,this.apiEndpoint=n.N.apiEndpoint}search(m,v,E){return this.http.get(`${this.apiEndpoint}/admin/games`,{params:{query:m.query,...m.showDisabled&&{showDisabled:"true"},...m.onlyShowWithoutMusics&&{onlyShowWithoutMusics:"true"},...v&&{skip:v},...E&&{limit:E}}})}importByUrl(m){return this.http.get(`${this.apiEndpoint}/admin/games/import`,{params:{url:m}}).pipe((0,_.K)(v=>(0,t._)(v.error)))}get(m){return this.http.get(`${this.apiEndpoint}/admin/games/${m}`)}uploadMusics(m,v){const E=new FormData;for(const P of v)E.append("files",P);return this.http.post(`${this.apiEndpoint}/admin/games/${m}/musics`,E,{reportProgress:!0,observe:"events"})}saveMusic(m,v){return this.http.patch(`${this.apiEndpoint}/admin/game-to-music/${m.id}`,v)}deleteGameMusic(m){return this.http.delete(`${this.apiEndpoint}/admin/game-to-music/${m.id}`)}toggleGame(m){return this.http.patch(`${this.apiEndpoint}/admin/games/${m.slug}/toggle`,null).pipe((0,_.K)(v=>(0,t._)(v.error)))}toggleAlternativeName(m){return this.http.patch(`${this.apiEndpoint}/alternative-names/${m.id}/toggle`,null).pipe((0,_.K)(v=>(0,t._)(v.error)))}listen(m){return this.http.get(`${this.apiEndpoint}/admin/game-to-music/${m}/listen`,{responseType:"blob"})}addDerivedGameToMusic(m,v){return this.http.post(`${this.apiEndpoint}/admin/game-to-music/${m}/add-derived`,{gameId:v.id}).pipe((0,_.K)(E=>(0,t._)(E.error)))}}return d.\u0275fac=function(m){return new(m||d)(b.LFG(C.eN))},d.\u0275prov=b.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},9743:(L,x,l)=>{l.d(x,{q:()=>b});var t=l(2340),n=l(5e3),_=l(520);let b=(()=>{class C{constructor(d){this.http=d,this.apiEndpoint=t.N.apiEndpoint}search(d,U,m){return this.http.get(`${this.apiEndpoint}/games`,{params:{query:d.query,...d.myGames&&{filterByUser:"true"},...U&&{skip:U},...m&&{limit:m}}})}get(d){return this.http.get(`${this.apiEndpoint}/games/${d}`)}addToList(d){return this.http.get(`${this.apiEndpoint}/games/${d}/add`)}removeFromList(d){return this.http.get(`${this.apiEndpoint}/games/${d}/remove`)}getNames(d){return this.http.get(`${this.apiEndpoint}/games/names`,{params:{query:d}})}}return C.\u0275fac=function(d){return new(d||C)(n.LFG(_.eN))},C.\u0275prov=n.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},3818:(L,x,l)=>{l.d(x,{X:()=>g});var t=l(5e3),n=l(8372),_=l(3075),b=l(8746),C=l(8966),w=l(492),d=l(9808);function U(r,S){if(1&r&&(t.ynx(0),t._uU(1),t.BQk()),2&r){const s=t.oxw(2);t.xp6(1),t.hij(" ",s.form.errors.serverError," ")}}function m(r,S){if(1&r&&(t.TgZ(0,"div",9),t.YNc(1,U,2,1,"ng-container",4),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.form.errors.serverError)}}function v(r,S){if(1&r&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&r){const s=S.$implicit;t.xp6(1),t.Oqu(s)}}function E(r,S){if(1&r&&(t.TgZ(0,"div")(1,"p",10),t._uU(2),t.qZA(),t.TgZ(3,"ul"),t.YNc(4,v,2,1,"li",11),t.qZA()()),2&r){const s=t.oxw();t.xp6(2),t.hij("Successfully imported ",s.importedGames.length," games!"),t.xp6(2),t.Q6J("ngForOf",s.importedGames)}}function P(r,S){1&r&&t._UZ(0,"span",12)}const K=function(r){return{"is-invalid":r}},N=function(r){return{disabled:r}};let B=(()=>{class r{constructor(s,u){this.dialogRef=s,this.gameHttpService=u,this.loading=!1,this.form=new _.NI(null,_.kI.required.bind(this)),this.importedGames=[]}ngOnInit(){}submit(){this.loading=!0,this.importedGames=[],this.gameHttpService.importByUrl(this.form.value).pipe((0,b.x)(()=>this.loading=!1)).subscribe({next:s=>{this.importedGames=s,this.form.reset()},error:s=>{Array.isArray(s.message)?this.form.setErrors({serverError:s.message[0].errors}):this.errorMessage=s.message}})}}return r.\u0275fac=function(s){return new(s||r)(t.Y36(C.so),t.Y36(w.I))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-import-game-dialog"]],decls:16,vars:11,consts:[["href","https://www.igdb.com/search","target","_blank"],[1,"form-group"],["required","","placeholder","IGDB url",1,"form-control",3,"formControl","ngClass"],["class","invalid-feedback",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions","",1,"row","justify-content-end"],[1,"col"],[1,"btn","btn-outline-primary",3,"disabled","ngClass","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"invalid-feedback"],[1,"text-success"],[4,"ngFor","ngForOf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(s,u){1&s&&(t.TgZ(0,"h2"),t._uU(1,"Import a game"),t.qZA(),t.TgZ(2,"p"),t._uU(3," import a game from "),t.TgZ(4,"a",0),t._uU(5,"igdb.com"),t.qZA(),t._uU(6," by searching a game and copying its url below\n"),t.qZA(),t.TgZ(7,"div",1),t._UZ(8,"input",2),t.YNc(9,m,2,1,"div",3),t.qZA(),t.YNc(10,E,5,2,"div",4),t.TgZ(11,"div",5)(12,"div",6)(13,"button",7),t.NdJ("click",function(){return u.form.invalid||u.loading||u.submit()}),t._uU(14," Import"),t.YNc(15,P,1,0,"span",8),t.qZA()()()),2&s&&(t.xp6(8),t.Q6J("formControl",u.form)("ngClass",t.VKq(7,K,u.form.invalid&&(u.form.dirty||u.form.touched))),t.xp6(1),t.Q6J("ngIf",u.form.errors),t.xp6(1),t.Q6J("ngIf",u.importedGames.length>0),t.xp6(3),t.Q6J("disabled",u.form.invalid||u.loading)("ngClass",t.VKq(9,N,u.form.invalid||u.loading)),t.xp6(2),t.Q6J("ngIf",u.loading))},directives:[_.Fj,_.Q7,_.JJ,_.oH,d.mk,d.O5,d.sg,C.H8],encapsulation:2}),r})();var W=l(7961),A=l(1083);function R(r,S){if(1&r&&(t.TgZ(0,"h1"),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.hij("",s.gamesCount," games")}}function G(r,S){if(1&r&&(t.TgZ(0,"form",8)(1,"div",9)(2,"div",10)(3,"div",11),t._UZ(4,"input",12),t.qZA()(),t.TgZ(5,"div",1)(6,"mat-checkbox",13),t._uU(7,"Only Show Without Music"),t.qZA()(),t.TgZ(8,"div",1)(9,"mat-checkbox",14),t._uU(10,"Disabled "),t.qZA()()()()),2&r){const s=t.oxw();t.Q6J("formGroup",s.form)}}function Y(r,S){1&r&&(t.ynx(0),t.TgZ(1,"div",15)(2,"div",16)(3,"span",17),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function p(r,S){1&r&&t._UZ(0,"app-game-item",21),2&r&&t.Q6J("game",S.$implicit)}function M(r,S){1&r&&(t.TgZ(0,"div",15)(1,"div",16)(2,"span",17),t._uU(3,"Loading..."),t.qZA()()())}function c(r,S){if(1&r){const s=t.EpF();t.TgZ(0,"div",18),t.NdJ("scrolled",function(){return t.CHM(s),t.oxw().onScrollDown()}),t.YNc(1,p,1,1,"app-game-item",19),t.YNc(2,M,4,0,"div",20),t.qZA()}if(2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngForOf",s.games),t.xp6(1),t.Q6J("ngIf",s.scrollLoading)}}let g=(()=>{class r{constructor(s,u,O,J){this.adminGameHttpService=s,this.dialog=u,this.router=O,this.activatedRoute=J,this.name="xd",this.games=[],this.query="",this.showDisabled=!1,this.onlyShowWithoutMusics=!1,this.loading=!1,this.scrollLoading=!1}ngOnInit(){this.activatedRoute.queryParamMap.subscribe(s=>{var u;this.form=new _.cw({query:new _.NI(null!==(u=s.get("query"))&&void 0!==u?u:"",_.kI.required.bind(this)),showDisabled:new _.NI("true"===s.get("showDisabled")),onlyShowWithoutMusics:new _.NI("true"===s.get("onlyShowWithoutMusics"))}),this.search()}).unsubscribe(),this.form.valueChanges.pipe((0,n.b)(250)).subscribe(()=>{this.search(),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:this.form.value,replaceUrl:!0})})}search(){this.loading=!0,this.adminGameHttpService.search(this.form.value,0,24).pipe((0,b.x)(()=>this.loading=!1)).subscribe(s=>{this.gamesCount=s.count,this.games=s.data})}onScrollDown(){this.scrollLoading||(this.scrollLoading=!0,this.adminGameHttpService.search(this.form.value,this.games.length,24).pipe((0,b.x)(()=>this.scrollLoading=!1)).subscribe(s=>{this.games=[...this.games,...s.data]}))}openImportDialog(){this.dialog.open(B).afterClosed().subscribe(()=>{this.search()})}}return r.\u0275fac=function(s){return new(s||r)(t.Y36(w.I),t.Y36(C.uw),t.Y36(A.F0),t.Y36(A.gz))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-game-search"]],features:[t._Bn([{provide:W.X,useExisting:(0,t.Gpc)(()=>r)}])],decls:10,vars:4,consts:[[1,"row","justify-content-between"],[1,"col"],[4,"ngIf"],[1,"col","text-end"],[1,"btn","btn-outline-primary",3,"click"],[3,"formGroup",4,"ngIf"],[4,"ngIf","ngIfElse"],["cardColumns",""],[3,"formGroup"],[1,"row","justify-content-between","align-items-center"],[1,"col-md-3"],[1,"form-group"],["type","text","id","exampleFormControlInput1","placeholder","game...","formControlName","query",1,"form-control"],["color","primary","formControlName","onlyShowWithoutMusics"],["color","primary","formControlName","showDisabled"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],["infinite-scroll","",1,"mt-4","row",3,"scrolled"],["class","col-6 col-md-2",3,"game",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"col-6","col-md-2",3,"game"]],template:function(s,u){if(1&s&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,R,2,1,"h1",2),t.qZA(),t.TgZ(3,"div",3)(4,"button",4),t.NdJ("click",function(){return u.openImportDialog()}),t._uU(5,"Import game from IGDB"),t.qZA()()(),t.YNc(6,G,11,1,"form",5),t.YNc(7,Y,5,0,"ng-container",6),t.YNc(8,c,3,2,"ng-template",null,7,t.W1O)),2&s){const O=t.MAs(9);t.xp6(2),t.Q6J("ngIf",u.gamesCount),t.xp6(4),t.Q6J("ngIf",u.form),t.xp6(1),t.Q6J("ngIf",u.loading)("ngIfElse",O)}},encapsulation:2}),r})()},8636:(L,x,l)=>{l.d(x,{F:()=>Y});var t=l(3818),n=l(5e3),_=l(9743),b=l(263),C=l(7961),w=l(1083),d=l(9808),U=l(7423),m=l(5245);const v=function(p){return{"background-color":p}};function E(p,M){if(1&p&&(n.TgZ(0,"button",12),n._uU(1),n._UZ(2,"i",13),n.qZA()),2&p){const c=n.oxw();n.Q6J("ngStyle",n.VKq(2,v,c.game.cover?c.game.cover.colorPalette.backgroundColorHex:"black")),n.xp6(1),n.hij(" ",c.game.countUsers," ")}}function P(p,M){if(1&p){const c=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(){n.CHM(c);const r=n.oxw(2);return r.addToList(r.game)}),n.TgZ(1,"mat-icon"),n._uU(2,"add"),n.qZA()()}if(2&p){const c=n.oxw(2);n.Q6J("ngStyle",n.VKq(1,v,c.game.cover?c.game.cover.colorPalette.backgroundColorHex:"black"))}}function K(p,M){if(1&p){const c=n.EpF();n.TgZ(0,"button",15),n.NdJ("click",function(){n.CHM(c);const r=n.oxw(2);return r.removeFromList(r.game)}),n.TgZ(1,"mat-icon"),n._uU(2,"remove"),n.qZA()()}if(2&p){const c=n.oxw(2);n.Q6J("ngStyle",n.VKq(1,v,c.game.cover?c.game.cover.colorPalette.backgroundColorHex:"black"))}}function N(p,M){if(1&p&&(n.ynx(0),n.YNc(1,P,3,3,"button",14),n.YNc(2,K,3,3,"button",14),n.BQk()),2&p){const c=n.oxw();n.xp6(1),n.Q6J("ngIf",!1===c.game.selectedByUser),n.xp6(1),n.Q6J("ngIf",!0===c.game.selectedByUser)}}function B(p,M){1&p&&n._UZ(0,"div",16)}const W=function(p){return["/admin/games/",p]},A=function(){return[]},R=function(p){return{"d-none":p}},G=function(p){return{"has-admin-pill":p}};let Y=(()=>{class p{constructor(c,g,r){this.gameHttpService=c,this.authService=g,this.parentComponent=r,this.isAdminSearchComponent=!0,this.hidden=!0,this.isAdmin=!1}ngOnInit(){this.isAdminSearchComponent=this.parentComponent instanceof t.X,this.isAdmin=this.authService.isAdmin}addToList(c){this.gameHttpService.addToList(c.slug).subscribe(()=>{c.selectedByUser=!c.selectedByUser})}removeFromList(c){this.gameHttpService.removeFromList(c.slug).subscribe(()=>{c.selectedByUser=!c.selectedByUser})}}return p.\u0275fac=function(c){return new(c||p)(n.Y36(_.q),n.Y36(b.e),n.Y36(C.X,8))},p.\u0275cmp=n.Xpm({type:p,selectors:[["app-game-item"]],inputs:{game:"game"},decls:15,vars:31,consts:[[2,"position","relative","aspect-ratio","3/4","display","flex","align-items","center"],[3,"routerLink"],[1,"card-img-top",2,"flex","0",3,"src","ngClass","alt","load"],[1,"w-100","h-100",2,"position","absolute","top","0","z-index","-1","filter","brightness(50%)",3,"ngStyle","routerLink"],[1,"pills-container",3,"ngClass"],["class","pill countUsers","mat-raised-button","",3,"ngStyle",4,"ngIf"],["mat-raised-button","",1,"pill","countMusics",3,"ngStyle"],[1,"fa-solid","fa-music"],[4,"ngIf"],[1,"card-title","orange"],["class","played",4,"ngIf"],[1,"text-white",3,"routerLink"],["mat-raised-button","",1,"pill","countUsers",3,"ngStyle"],[1,"fa-solid","fa-gamepad"],["class","game-item-cta","mat-mini-fab","","aria-label","Example icon button with a heart icon",3,"ngStyle","click",4,"ngIf"],["mat-mini-fab","","aria-label","Example icon button with a heart icon",1,"game-item-cta",3,"ngStyle","click"],[1,"played"]],template:function(c,g){1&c&&(n.TgZ(0,"div",0)(1,"a",1)(2,"img",2),n.NdJ("load",function(){return g.hidden=!1}),n.qZA()(),n._UZ(3,"div",3),n.TgZ(4,"div",4),n.YNc(5,E,3,4,"button",5),n.TgZ(6,"button",6),n._uU(7),n._UZ(8,"i",7),n.qZA()(),n.YNc(9,N,3,2,"ng-container",8),n.qZA(),n.TgZ(10,"div",9),n.YNc(11,B,1,0,"div",10),n.TgZ(12,"p")(13,"a",11),n._uU(14),n.qZA()()()),2&c&&(n.xp6(1),n.Q6J("routerLink",g.isAdmin?n.VKq(14,W,g.game.slug):n.DdM(16,A)),n.xp6(1),n.Q6J("src",null!=g.game.cover&&g.game.cover.imageId?"https://images.igdb.com/igdb/image/upload/t_720p/"+g.game.cover.imageId+".jpg":"assets/imgs/missing picture.png",n.LSH)("ngClass",n.VKq(17,R,g.hidden))("alt",g.game.name),n.xp6(1),n.Q6J("ngStyle",n.VKq(19,v,g.game.cover?g.game.cover.colorPalette.backgroundColorHex:"black"))("routerLink",g.isAdmin?n.VKq(21,W,g.game.slug):n.DdM(23,A)),n.xp6(1),n.Q6J("ngClass",n.VKq(24,G,g.isAdminSearchComponent)),n.xp6(1),n.Q6J("ngIf",g.isAdminSearchComponent),n.xp6(1),n.Q6J("ngStyle",n.VKq(26,v,g.game.cover?g.game.cover.colorPalette.backgroundColorHex:"black")),n.xp6(1),n.hij(" ",g.game.countMusics," "),n.xp6(2),n.Q6J("ngIf",!1===g.isAdminSearchComponent),n.xp6(2),n.Q6J("ngIf",g.game.selectedByUser),n.xp6(2),n.Q6J("routerLink",g.isAdmin?n.VKq(28,W,g.game.slug):n.DdM(30,A)),n.xp6(1),n.Oqu(g.game.name))},directives:[w.yS,d.mk,d.PC,w.rH,d.O5,U.lW,m.Hw],encapsulation:2}),p})()},7961:(L,x,l)=>{l.d(x,{X:()=>t});class t{}},9685:(L,x,l)=>{l.d(x,{Ry:()=>ut,Rq:()=>dt});var t=l(5e3),n=l(9646),_=l(4968),b=l(4986),C=l(4482),w=l(5403),d=l(8421);const U={leading:!0,trailing:!1};var v=l(5963);var P=l(5577),K=l(4004),N=l(8505),B=l(9300);function A(e,o,i,a){const f=window&&!!window.document&&window.document.documentElement;let h=f&&o?window:i;if(e&&(h=e&&f&&"string"==typeof e?function R(e,o,i){return(i?window.document:o).querySelector(e)}(e,i.nativeElement,a):e,!h))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return h}function G(e){return e&&!e.firstChange}const p={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},M={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class c{constructor(o=!0){this.vertical=o,this.propsMap=o?p:M}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function s(e){return["Window","global"].some(i=>Object.prototype.toString.call(e).includes(i))}function u(e,o){return e?o.document.documentElement:null}function O(e,o){const i=function X({container:e,isWindow:o,axis:i}){const{offsetHeightKey:a,clientHeightKey:f}=$(i);return k(e,o,a,f)}(o);return o.isWindow?function J(e,o,i){const{axis:a,container:f,isWindow:h}=i,{offsetHeightKey:T,clientHeightKey:D}=$(a),y=e+q(u(h,f),a,h),I=k(o.nativeElement,h,T,D),Z=function tt(e,o,i){const a=o.topKey();if(e.getBoundingClientRect)return e.getBoundingClientRect()[a]+q(e,o,i)}(o.nativeElement,a,h)+I;return{height:e,scrolled:y,totalToScroll:Z,isWindow:h}}(i,e,o):function z(e,o,i){const{axis:a,container:f}=i;return{height:e,scrolled:f[a.scrollTopKey()],totalToScroll:f[a.scrollHeightKey()],isWindow:!1}}(i,0,o)}function $(e){return{offsetHeightKey:e.offsetHeightKey(),clientHeightKey:e.clientHeightKey()}}function k(e,o,i,a){if(isNaN(e[i])){const f=u(o,e);return f?f[a]:0}return e[i]}function q(e,o,i){const a=o.pageYOffsetKey(),f=o.scrollTopKey(),h=o.offsetTopKey();return isNaN(window.pageYOffset)?u(i,e)[f]:e.ownerDocument?e.ownerDocument.defaultView[a]:e[h]}function et(e,o={down:0,up:0},i){let a,f;if(e.totalToScroll<=0)return!1;const h=e.isWindow?e.scrolled:e.height+e.scrolled;return i?(a=(e.totalToScroll-h)/e.totalToScroll,f=((null==o?void 0:o.down)?o.down:0)/10):(a=e.scrolled/(e.scrolled+(e.totalToScroll-h)),f=((null==o?void 0:o.up)?o.up:0)/10),a<=f}class st{constructor({totalToScroll:o}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=o}updateScrollPosition(o){return this.lastScrollPosition=o}updateTotalToScroll(o){this.lastTotalToScroll!==o&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=o)}updateScroll(o,i){this.updateScrollPosition(o),this.updateTotalToScroll(i)}updateTriggeredFlag(o,i){i?this.triggered.down=o:this.triggered.up=o}isTriggeredScroll(o,i){return i?this.triggered.down===o:this.triggered.up===o}}function lt(e){const{scrollContainer:o,scrollWindow:i,element:a,fromRoot:f}=e,h=function r({windowElement:e,axis:o}){return function S(e,o){const i=e.isWindow||o&&!o.nativeElement?o:o.nativeElement;return Object.assign(Object.assign({},e),{container:i})}({axis:o,isWindow:s(e)},e)}({axis:new c(!e.horizontal),windowElement:A(o,i,a,f)}),T=new st({totalToScroll:O(a,h)}),y={up:e.upDistance,down:e.downDistance};return function at(e){let o=(0,_.R)(e.container,"scroll");return e.throttle&&(o=o.pipe(function E(e,o=b.z,i=U){const a=(0,v.H)(e,o);return function m(e,o=U){return(0,C.e)((i,a)=>{const{leading:f,trailing:h}=o;let T=!1,D=null,y=null,I=!1;const Z=()=>{null==y||y.unsubscribe(),y=null,h&&(V(),I&&a.complete())},Q=()=>{y=null,I&&a.complete()},j=H=>y=(0,d.Xf)(e(H)).subscribe((0,w.x)(a,Z,Q)),V=()=>{if(T){T=!1;const H=D;D=null,a.next(H),!I&&j(H)}};i.subscribe((0,w.x)(a,H=>{T=!0,D=H,(!y||y.closed)&&(f?V():j(H))},()=>{I=!0,(!(h&&T&&y)||y.closed)&&a.complete()}))})}(()=>a,i)}(e.throttle,void 0,{leading:!0,trailing:!0}))),o}({container:h.container,throttle:e.throttle}).pipe((0,P.z)(()=>(0,n.of)(O(a,h))),(0,K.U)(I=>function ct(e,o,i){const{scrollDown:a,fire:f}=function ot(e,o,i){const a=function nt(e,o){return e<o.scrolled}(e,o);return{fire:et(o,i,a),scrollDown:a}}(e,o,i);return{scrollDown:a,fire:f,stats:o}}(T.lastScrollPosition,I,y)),(0,N.b)(({stats:I})=>T.updateScroll(I.scrolled,I.totalToScroll)),(0,B.h)(({fire:I,scrollDown:Z,stats:{totalToScroll:Q}})=>function g(e,o,i){return!!(e&&o||!i&&o)}(e.alwaysCallback,I,T.isTriggeredScroll(Q,Z))),(0,N.b)(({scrollDown:I,stats:{totalToScroll:Z}})=>{T.updateTriggeredFlag(Z,I)}),(0,K.U)(mt))}function mt(e){const{scrollDown:o,stats:{scrolled:i}}=e;return{type:o?"[NGX_ISE] DOWN":"[NGX_ISE] UP",payload:{currentScrollPosition:i}}}let ut=(()=>{class e{constructor(i,a){this.element=i,this.zone=a,this.scrolled=new t.vpe,this.scrolledUp=new t.vpe,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:i,infiniteScrollDisabled:a,infiniteScrollDistance:f}){const h=G(i),T=G(a),D=G(f),y=!T&&!this.infiniteScrollDisabled||T&&!a.currentValue||D;(h||T||D)&&(this.destroyScroller(),y&&this.setup())}setup(){(function Y(){return"undefined"!=typeof window})()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=lt({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(i=>this.zone.run(()=>this.handleOnScroll(i)))})}handleOnScroll({type:i,payload:a}){switch(i){case"[NGX_ISE] DOWN":return this.scrolled.emit(a);case"[NGX_ISE] UP":return this.scrolledUp.emit(a);default:return}}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(t.SBq),t.Y36(t.R0b))},e.\u0275dir=t.lG2({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[t.TTD]}),e})(),dt=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[],imports:[[]]}),e})()}}]);