function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var r=0;r<i.length;r++){var t=i[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,i,r){return i&&_defineProperties(e.prototype,i),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{g7DB:function(e,i,r){"use strict";r.r(i),r.d(i,"LoginModule",(function(){return A}));var t=r("ofXK"),s=r("tyNb"),n=r("3Pt+"),o=r("nYR2"),c=r("fXoL"),a=r("ZEaD");function b(e,i){if(1&e&&(c.Ob(0,"div",22),c.sc(1),c.Nb()),2&e){var r=c.Zb();c.zb(1),c.uc(" ",r.formErrorMessage," ")}}function l(e,i){1&e&&c.Kb(0,"span",23)}function d(e,i){1&e&&c.Kb(0,"span",23)}function u(e,i){if(1&e&&(c.Ob(0,"div",31),c.sc(1),c.Nb()),2&e){var r=c.Zb(2);c.zb(1),c.uc(" ",r.limitedAccessError," ")}}var m=function(e){return{"is-invalid":e}};function f(e,i){if(1&e){var r=c.Pb();c.Ob(0,"div",24),c.Ob(1,"form",25),c.Vb("ngSubmit",(function(){c.lc(r);var e=c.Zb();return e.limitedAccessLoading||e.testLimitedAccessPassword()})),c.Ob(2,"label"),c.sc(3,"This website is a work in progress, to create an account and get a limited access, please enter the magic password below"),c.Nb(),c.Ob(4,"div",26),c.Kb(5,"input",27),c.Ob(6,"div",28),c.Ob(7,"button",29),c.sc(8," Enter"),c.qc(9,d,1,0,"span",16),c.Nb(),c.Nb(),c.Nb(),c.qc(10,u,2,1,"div",30),c.Nb(),c.Nb()}if(2&e){var t=c.Zb();c.zb(1),c.ec("formGroup",t.limitedAccessForm),c.zb(3),c.ec("ngClass",c.hc(6,m,t.limitedAccessError)),c.zb(1),c.ec("ngClass",c.hc(8,m,t.limitedAccessError)),c.zb(2),c.ec("disabled",t.limitedAccessLoading),c.zb(2),c.ec("ngIf",t.limitedAccessLoading),c.zb(1),c.ec("ngIf",t.limitedAccessError)}}var p,g,h=function(e){return{disabled:e}},v=((p=function(){function e(i,r,t){_classCallCheck(this,e),this.fb=i,this.router=r,this.authHttpService=t,this.loading=!1,this.limitedAccessLoading=!1,this.limitedAccessAllowed=!0,this.loginForm=this.fb.group({username:["",n.p.required.bind(this)],password:["",n.p.required.bind(this)]}),this.limitedAccessForm=this.fb.group({password:["",n.p.required.bind(this)]}),this.setLimitedAccessAllowed()}return _createClass(e,[{key:"loginUser",value:function(){var e=this;this.loading=!0,this.authHttpService.login(this.loginForm.value).pipe(Object(o.a)((function(){return e.loading=!1}))).subscribe((function(){e.router.navigate([""])}),(function(i){e.formErrorMessage=i.message,e.loginForm.get("password").setValue("")}))}},{key:"testLimitedAccessPassword",value:function(){var e=this;this.limitedAccessLoading=!0,this.limitedAccessError=void 0,this.authHttpService.limitedAccessPassword(this.limitedAccessForm.get("password").value).pipe(Object(o.a)((function(){return e.limitedAccessLoading=!1}))).subscribe((function(){e.setLimitedAccessAllowed()}),(function(i){e.limitedAccessError=i.error}))}},{key:"setLimitedAccessAllowed",value:function(){var e=this;this.authHttpService.limitedAccessAllowed().subscribe((function(i){e.limitedAccessAllowed=i}))}}]),e}()).\u0275fac=function(e){return new(e||p)(c.Jb(n.c),c.Jb(s.b),c.Jb(a.a))},p.\u0275cmp=c.Db({type:p,selectors:[["app-login"]],decls:38,vars:8,consts:[[1,"container"],[1,"h1","font-weight-normal","text-center"],[1,"h4","font-weight-normal","text-center"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"form-login",3,"formGroup","ngSubmit"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],[1,"form-group"],["type","email","formControlName","username","placeholder","username","required","",1,"form-control"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],[1,"row","pt-2"],[1,"form-check"],["type","checkbox","id","checkRemember",1,"form-check-input"],["for","checkRemember",1,"form-check-label"],[1,"col-md-12","text-center"],["type","submit",1,"btn","btn-primary","col-md-6",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"col-md-6","text-center"],[1,"orange"],[1,"col-md-12"],["routerLink","/register",1,"btn","btn-primary","col-md-6",3,"ngClass"],["class","col-md-12 mt-5",4,"ngIf"],["role","alert",1,"col-md-12","alert","alert-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"col-md-12","mt-5"],[3,"formGroup","ngSubmit"],[1,"input-group",3,"ngClass"],["type","password","placeholder","Limited password","aria-label","Limited password","aria-describedby","button-addon2","formControlName","password",1,"form-control",3,"ngClass"],[1,"input-group-append"],["type","submit","id","button-addon2",1,"btn","btn-primary",3,"disabled"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(e,i){1&e&&(c.Ob(0,"div",0),c.Ob(1,"h1",1),c.sc(2,"VGMQ"),c.Nb(),c.Ob(3,"h4",2),c.sc(4,"Video Game Music Quiz"),c.Nb(),c.Ob(5,"div",3),c.Ob(6,"div",4),c.Ob(7,"form",5),c.Vb("ngSubmit",(function(){return i.loading||i.loginUser()})),c.qc(8,b,2,1,"div",6),c.Ob(9,"div",7),c.Ob(10,"label"),c.sc(11,"Username"),c.Nb(),c.Kb(12,"input",8),c.Nb(),c.Ob(13,"div",7),c.Ob(14,"label"),c.sc(15,"Password"),c.Nb(),c.Kb(16,"input",9),c.Nb(),c.Ob(17,"div",10),c.Ob(18,"div",4),c.Ob(19,"div",11),c.Kb(20,"input",12),c.Ob(21,"label",13),c.sc(22,"Remember me"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(23,"div",14),c.Ob(24,"button",15),c.qc(25,l,1,0,"span",16),c.sc(26," Log in "),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(27,"div",17),c.Ob(28,"div",7),c.Ob(29,"label"),c.sc(30,"No "),c.Ob(31,"span",18),c.sc(32,"account"),c.Nb(),c.sc(33," ?"),c.Nb(),c.Ob(34,"div",19),c.Ob(35,"a",20),c.sc(36,"Register now"),c.Nb(),c.Nb(),c.qc(37,f,11,10,"div",21),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.zb(7),c.ec("formGroup",i.loginForm),c.zb(1),c.ec("ngIf",i.formErrorMessage),c.zb(16),c.ec("disabled",i.loading),c.zb(1),c.ec("ngIf",i.loading),c.zb(10),c.ec("ngClass",c.hc(6,h,!i.limitedAccessAllowed)),c.zb(2),c.ec("ngIf",!i.limitedAccessAllowed))},directives:[n.q,n.l,n.g,t.k,n.b,n.k,n.e,n.o,s.e,t.i],encapsulation:2}),p),w=r("PCNd"),N=[{path:"",component:v}],A=((g=function e(){_classCallCheck(this,e)}).\u0275mod=c.Hb({type:g}),g.\u0275inj=c.Gb({factory:function(e){return new(e||g)},imports:[[t.b,w.a,s.f.forChild(N)]]}),g)}}]);