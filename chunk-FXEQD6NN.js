import{a as Dt,b as G}from"./chunk-2CHCPXBB.js";import{a as un}from"./chunk-NM6RVRTM.js";import{a as gn,b as bn,c as fn,d as vn}from"./chunk-56XQUIL6.js";import{a as Qi,b as Ui}from"./chunk-JEXCKRGY.js";import{$ as en,A as pt,B as we,Ba as on,C as ht,D as _t,Da as wt,Ea as sn,G as ut,Ga as ln,H as gt,Ha as cn,Ia as Ct,K as bt,S as Zi,T as Ki,V as Yi,X as Xi,Y as $t,_ as Ji,a as Vi,aa as ft,b as Gi,bb as dn,c as lt,ca as tn,d as He,db as mn,e as $,eb as pn,f as jt,fb as hn,g as Wt,h as ue,ha as vt,hb as _n,ia as fe,j as Hi,ja as Pe,k as ct,ka as Y,l as zi,la as X,ma as J,n as ji,na as ee,p as dt,pa as nn,q as Wi,r as $i,s as Ee,sa as Qt,ua as yt,v as ge,va as an,w as mt,x as K,xa as te,y as be,ya as rn,z as qi}from"./chunk-5KVTLUS6.js";import"./chunk-3VSYNEYF.js";import{C as st,E as Bi,a as Ht,d as rt,e as _e,f as Z,i as Ei,j as Pi,k as Ri,l as Li,m as Ai,s as zt,t as Fi,x as Ni,y as ot,z as Oi}from"./chunk-3N5DGQTQ.js";import{$b as re,A as gi,B as bi,Ba as x,Bb as y,Bc as pe,C as se,Ca as le,D as fi,Dc as he,Fc as Ie,Ga as ne,Gc as Ii,H as vi,Hc as Gt,Ia as Ot,Ic as Mi,J as yi,Ja as Ti,Jc as ye,L as wi,M as N,Mb as q,Nb as m,Oa as Xe,Ob as ki,Oc as oe,Pb as O,Qb as tt,Sb as xe,Ta as De,Tc as P,Ub as ce,Uc as Me,V as Ci,Vb as de,W as ve,Wb as me,X as Ce,Xb as l,Y as Q,Yb as c,Zb as S,_ as Di,_b as ae,a as F,bc as T,c as Ae,ca as Fe,da as Ze,eb as Oe,f as D,fa as V,g as Nt,gc as v,ha as xi,hc as _,ia as u,ib as d,ic as it,j as hi,jc as nt,k as _i,kb as Be,kc as Si,lb as Bt,lc as Ge,m as Ue,mb as Vt,mc as L,nb as C,nc as M,oc as E,pa as Ke,pb as Je,qa as g,r as qe,ra as b,sc as I,tc as p,ua as Ye,uc as j,vb as k,vc as W,wa as Ne,wb as et,wc as at,x as ui,xb as U,xc as Te,yc as ke,zb as Ve,zc as Se}from"./chunk-5HLPFG4U.js";import{a as mi,b as pi}from"./chunk-GAL4ENT6.js";function An(a){let n=a.cloneNode(!0),e=n.querySelectorAll("[id]"),t=a.nodeName.toLowerCase();n.removeAttribute("id");for(let i=0;i<e.length;i++)e[i].removeAttribute("id");return t==="canvas"?Cn(a,n):(t==="input"||t==="select"||t==="textarea")&&wn(a,n),yn("canvas",a,n,Cn),yn("input, textarea, select",a,n,wn),n}function yn(a,n,e,t){let i=n.querySelectorAll(a);if(i.length){let r=e.querySelectorAll(a);for(let o=0;o<i.length;o++)t(i[o],r[o])}}var ma=0;function wn(a,n){n.type!=="file"&&(n.value=a.value),n.type==="radio"&&n.name&&(n.name=`mat-clone-${n.name}-${ma++}`)}function Cn(a,n){let e=n.getContext("2d");if(e)try{e.drawImage(a,0,0)}catch{}}function ei(a){let n=a.getBoundingClientRect();return{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height,x:n.x,y:n.y}}function Zt(a,n,e){let{top:t,bottom:i,left:r,right:o}=a;return e>=t&&e<=i&&n>=r&&n<=o}function We(a,n,e){a.top+=n,a.bottom=a.top+a.height,a.left+=e,a.right=a.left+a.width}function Dn(a,n,e,t){let{top:i,right:r,bottom:o,left:s,width:h,height:f}=a,w=h*n,A=f*n;return t>i-A&&t<o+A&&e>s-w&&e<r+w}var xt=class{_document;positions=new Map;constructor(n){this._document=n}clear(){this.positions.clear()}cache(n){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),n.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:ei(e)})})}handleScroll(n){let e=He(n),t=this.positions.get(e);if(!t)return null;let i=t.scrollPosition,r,o;if(e===this._document){let f=this.getViewportScrollPosition();r=f.top,o=f.left}else r=e.scrollTop,o=e.scrollLeft;let s=i.top-r,h=i.left-o;return this.positions.forEach((f,w)=>{f.clientRect&&e!==w&&e.contains(w)&&We(f.clientRect,s,h)}),i.top=r,i.left=o,{top:s,left:h}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Fn(a,n){let e=a.rootNodes;if(e.length===1&&e[0].nodeType===n.ELEMENT_NODE)return e[0];let t=n.createElement("div");return e.forEach(i=>t.appendChild(i)),t}function ti(a,n,e){for(let t in n)if(n.hasOwnProperty(t)){let i=n[t];i?a.setProperty(t,i,e?.has(t)?"important":""):a.removeProperty(t)}return a}function Re(a,n){let e=n?"":"none";ti(a.style,{"touch-action":n?"":"none","-webkit-user-drag":n?"":"none","-webkit-tap-highlight-color":n?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function xn(a,n,e){ti(a.style,{position:n?"":"fixed",top:n?"":"0",opacity:n?"":"0",left:n?"":"-999em"},e)}function Tt(a,n){return n&&n!="none"?a+" "+n:a}function Tn(a,n){a.style.width=`${n.width}px`,a.style.height=`${n.height}px`,a.style.transform=kt(n.left,n.top)}function kt(a,n){return`translate3d(${Math.round(a)}px, ${Math.round(n)}px, 0)`}function kn(a){let n=a.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(a)*n}function pa(a){let n=getComputedStyle(a),e=Ut(n,"transition-property"),t=e.find(s=>s==="transform"||s==="all");if(!t)return 0;let i=e.indexOf(t),r=Ut(n,"transition-duration"),o=Ut(n,"transition-delay");return kn(r[i])+kn(o[i])}function Ut(a,n){return a.getPropertyValue(n).split(",").map(t=>t.trim())}var ha=new Set(["position"]),Kt=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(n,e,t,i,r,o,s,h,f,w){this._document=n,this._rootElement=e,this._direction=t,this._initialDomRect=i,this._previewTemplate=r,this._previewClass=o,this._pickupPositionOnPage=s,this._initialTransform=h,this._zIndex=f,this._renderer=w}attach(n){this._preview=this._createPreview(),n.appendChild(this._preview),Sn(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(n){this._preview.style.transform=n}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(n){this._preview.classList.add(n)}getTransitionDuration(){return pa(this._preview)}addEventListener(n,e){return this._renderer.listen(this._preview,n,e)}_createPreview(){let n=this._previewTemplate,e=this._previewClass,t=n?n.template:null,i;if(t&&n){let r=n.matchSize?this._initialDomRect:null,o=n.viewContainer.createEmbeddedView(t,n.context);o.detectChanges(),i=Fn(o,this._document),this._previewEmbeddedView=o,n.matchSize?Tn(i,r):i.style.transform=kt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=An(this._rootElement),Tn(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return ti(i.style,{"pointer-events":"none",margin:Sn(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},ha),Re(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(r=>i.classList.add(r)):i.classList.add(e)),i}};function Sn(a){return"showPopover"in a}var _a={passive:!0},In={passive:!1},ua={passive:!1,capture:!0},ga=800,Mn=new Set(["position"]),Yt=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Ot(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new D;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=F.EMPTY;_pointerUpSubscription=F.EMPTY;_scrollSubscription=F.EMPTY;_resizeSubscription=F.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(n){n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions(),this._handles.forEach(e=>Re(e,n)))}_disabled=!1;beforeStarted=new D;started=new D;released=new D;ended=new D;entered=new D;exited=new D;dropped=new D;moved=this._moveEvents;data;constrainPosition;constructor(n,e,t,i,r,o,s){this._config=e,this._document=t,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=o,this._renderer=s,this.withRootElement(n).withParent(e.parentDragRef||null),this._parentPositions=new xt(t),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(n){this._handles=n.map(t=>ue(t)),this._handles.forEach(t=>Re(t,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&e.add(t)}),this._disabledHandles=e,this}withPreviewTemplate(n){return this._previewTemplate=n,this}withPlaceholderTemplate(n){return this._placeholderTemplate=n,this}withRootElement(n){let e=ue(n);return e!==this._rootElement&&(this._removeRootElementListeners(),this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[$(this._renderer,e,"mousedown",this._pointerDown,In),$(this._renderer,e,"touchstart",this._pointerDown,_a),$(this._renderer,e,"dragstart",this._nativeDragStart,In)]),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(n){return this._boundaryElement=n?ue(n):null,this._resizeSubscription.unsubscribe(),n&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(n){return this._parentDragRef=n,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(n){!this._disabledHandles.has(n)&&this._handles.indexOf(n)>-1&&(this._disabledHandles.add(n),Re(n,!0))}enableHandle(n){this._disabledHandles.has(n)&&(this._disabledHandles.delete(n),Re(n,this.disabled))}withDirection(n){return this._direction=n,this}_withDropContainer(n){this._dropContainer=n}getFreeDragPosition(){let n=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:n.x,y:n.y}}setFreeDragPosition(n){return this._activeTransform={x:0,y:0},this._passiveTransform.x=n.x,this._passiveTransform.y=n.y,this._dropContainer||this._applyRootElementTransform(n.x,n.y),this}withPreviewContainer(n){return this._previewContainer=n,this}_sortFromLastPointerPosition(){let n=this._lastKnownPointerPosition;n&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(n),n)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=n=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(n);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,n)}else this.disabled||this._initializeDragSequence(this._rootElement,n)};_pointerMove=n=>{let e=this._getPointerPositionOnPage(n);if(!this._hasStartedDragging()){let i=Math.abs(e.x-this._pickupPositionOnPage.x),r=Math.abs(e.y-this._pickupPositionOnPage.y);if(i+r>=this._config.dragStartThreshold){let s=Date.now()>=this._dragStartTime+this._getDragStartDelay(n),h=this._dropContainer;if(!s){this._endDragSequence(n);return}(!h||!h.isDragging()&&!h.isReceiving())&&(n.cancelable&&n.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(n)))}return}n.cancelable&&n.preventDefault();let t=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(t),this._dropContainer)this._updateActiveDropContainer(t,e);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,r=this._activeTransform;r.x=t.x-i.x+this._passiveTransform.x,r.y=t.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(r.x,r.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:t,event:n,distance:this._getDragDistance(t),delta:this._pointerDirectionDelta})})};_pointerUp=n=>{this._endDragSequence(n)};_endDragSequence(n){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:n}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(n),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(n);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:n})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(n){ze(n)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),t=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=$(this._renderer,e,"selectstart",ba,ua)}),t){let i=this._rootElement,r=i.parentNode,o=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment("");r.insertBefore(s,i),this._initialTransform=i.style.transform||"",this._preview=new Kt(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(r,e)),xn(i,!1,Mn),this._document.body.appendChild(r.replaceChild(o,i)),this.started.next({source:this,event:n}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:n}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(n,e){this._parentDragRef&&e.stopPropagation();let t=this.isDragging(),i=ze(e),r=!i&&e.button!==0,o=this._rootElement,s=He(e),h=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+ga>Date.now(),f=i?Gi(e):Vi(e);if(s&&s.draggable&&e.type==="mousedown"&&e.preventDefault(),t||r||h||f)return;if(this._handles.length){let ie=o.style;this._rootElementTapHighlight=ie.webkitTapHighlightColor||"",ie.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(ie=>this._updateOnScroll(ie)),this._boundaryElement&&(this._boundaryRect=ei(this._boundaryElement));let w=this._previewTemplate;this._pickupPositionInElement=w&&w.template&&!w.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,n,e);let A=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:A.x,y:A.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(n){xn(this._rootElement,!0,Mn),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,t=e.getItemIndex(this),i=this._getPointerPositionOnPage(n),r=this._getDragDistance(i),o=e._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:r,dropPoint:i,event:n}),this.dropped.next({item:this,currentIndex:t,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:r,dropPoint:i,event:n}),e.drop(this,t,this._initialIndex,this._initialContainer,o,r,i,n),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:n,y:e},{x:t,y:i}){let r=this._initialContainer._getSiblingContainerFromPosition(this,n,e);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(n,e)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=r,this._dropContainer.enter(this,n,e,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(t,i),this._dropContainer._sortItem(this,n,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(n,e):this._applyPreviewTransform(n-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let n=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(n.left,n.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{let i=s=>{(!s||this._preview&&He(s)===this._preview.element&&s.propertyName==="transform")&&(o(),t(),clearTimeout(r))},r=setTimeout(i,e*1.5),o=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let n=this._placeholderTemplate,e=n?n.template:null,t;return e?(this._placeholderRef=n.viewContainer.createEmbeddedView(e,n.context),this._placeholderRef.detectChanges(),t=Fn(this._placeholderRef,this._document)):t=An(this._rootElement),t.style.pointerEvents="none",t.classList.add("cdk-drag-placeholder"),t}_getPointerPositionInElement(n,e,t){let i=e===this._rootElement?null:e,r=i?i.getBoundingClientRect():n,o=ze(t)?t.targetTouches[0]:t,s=this._getViewportScrollPosition(),h=o.pageX-r.left-s.left,f=o.pageY-r.top-s.top;return{x:r.left-n.left+h,y:r.top-n.top+f}}_getPointerPositionOnPage(n){let e=this._getViewportScrollPosition(),t=ze(n)?n.touches[0]||n.changedTouches[0]||{pageX:0,pageY:0}:n,i=t.pageX-e.left,r=t.pageY-e.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let s=this._ownerSVGElement.createSVGPoint();return s.x=i,s.y=r,s.matrixTransform(o.inverse())}}return{x:i,y:r}}_getConstrainedPointerPosition(n){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:t,y:i}=this.constrainPosition?this.constrainPosition(n,this,this._initialDomRect,this._pickupPositionInElement):n;if(this.lockAxis==="x"||e==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(t=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:r,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,s=this._boundaryRect,{width:h,height:f}=this._getPreviewRect(),w=s.top+o,A=s.bottom-(f-o),ie=s.left+r,At=s.right-(h-r);t=En(t,ie,At),i=En(i,w,A)}return{x:t,y:i}}_updatePointerDirectionDelta(n){let{x:e,y:t}=n,i=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-r.x),s=Math.abs(t-r.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=e>r.x?1:-1,r.x=e),s>this._config.pointerDirectionChangeThreshold&&(i.y=t>r.y?1:-1,r.y=t),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let n=this._handles.length>0||!this.isDragging();n!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=n,Re(this._rootElement,n))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(n=>n()),this._rootElementCleanups=void 0}_applyRootElementTransform(n,e){let t=1/this.scale,i=kt(n*t,e*t),r=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=r.transform&&r.transform!="none"?r.transform:""),r.transform=Tt(i,this._initialTransform)}_applyPreviewTransform(n,e){let t=this._previewTemplate?.template?void 0:this._initialTransform,i=kt(n,e);this._preview.setTransform(Tt(i,t))}_getDragDistance(n){let e=this._pickupPositionOnPage;return e?{x:n.x-e.x,y:n.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:n,y:e}=this._passiveTransform;if(n===0&&e===0||this.isDragging()||!this._boundaryElement)return;let t=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||t.width===0&&t.height===0)return;let r=i.left-t.left,o=t.right-i.right,s=i.top-t.top,h=t.bottom-i.bottom;i.width>t.width?(r>0&&(n+=r),o>0&&(n-=o)):n=0,i.height>t.height?(s>0&&(e+=s),h>0&&(e-=h)):e=0,(n!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:n})}_getDragStartDelay(n){let e=this.dragStartDelay;return typeof e=="number"?e:ze(n)?e.touch:e?e.mouse:0}_updateOnScroll(n){let e=this._parentPositions.handleScroll(n);if(e){let t=He(n);this._boundaryRect&&t!==this._boundaryElement&&t.contains(this._boundaryElement)&&We(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=lt(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(n,e){let t=this._previewContainer||"global";if(t==="parent")return n;if(t==="global"){let i=this._document;return e||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return ue(t)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=n=>{if(this._handles.length){let e=this._getTargetHandle(n);e&&!this._disabledHandles.has(e)&&!this.disabled&&n.preventDefault()}else this.disabled||n.preventDefault()};_getTargetHandle(n){return this._handles.find(e=>n.target&&(n.target===e||e.contains(n.target)))}};function En(a,n,e){return Math.max(n,Math.min(e,a))}function ze(a){return a.type[0]==="t"}function ba(a){a.preventDefault()}function Mt(a,n,e){let t=St(n,a.length-1),i=St(e,a.length-1);if(t===i)return;let r=a[t],o=i<t?-1:1;for(let s=t;s!==i;s+=o)a[s]=a[s+o];a[i]=r}function Nn(a,n,e,t){let i=St(e,a.length-1),r=St(t,n.length);a.length&&n.splice(r,0,a.splice(i,1)[0])}function St(a,n){return Math.max(0,Math.min(n,a))}var It=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(n){this._dragDropRegistry=n}_previousSwap={drag:null,delta:0,overlaps:!1};start(n){this.withItems(n)}sort(n,e,t,i){let r=this._itemPositions,o=this._getItemIndexFromPointerPosition(n,e,t,i);if(o===-1&&r.length>0)return null;let s=this.orientation==="horizontal",h=r.findIndex(B=>B.drag===n),f=r[o],w=r[h].clientRect,A=f.clientRect,ie=h>o?1:-1,At=this._getItemOffsetPx(w,A,ie),la=this._getSiblingOffsetPx(h,r,ie),ca=r.slice();return Mt(r,h,o),r.forEach((B,da)=>{if(ca[da]===B)return;let li=B.drag===n,Ft=li?At:la,ci=li?n.getPlaceholderElement():B.drag.getRootElement();B.offset+=Ft;let di=Math.round(B.offset*(1/B.drag.scale));s?(ci.style.transform=Tt(`translate3d(${di}px, 0, 0)`,B.initialTransform),We(B.clientRect,0,Ft)):(ci.style.transform=Tt(`translate3d(0, ${di}px, 0)`,B.initialTransform),We(B.clientRect,Ft,0))}),this._previousSwap.overlaps=Zt(A,e,t),this._previousSwap.drag=f.drag,this._previousSwap.delta=s?i.x:i.y,{previousIndex:h,currentIndex:o}}enter(n,e,t,i){let r=i==null||i<0?this._getItemIndexFromPointerPosition(n,e,t):i,o=this._activeDraggables,s=o.indexOf(n),h=n.getPlaceholderElement(),f=o[r];if(f===n&&(f=o[r+1]),!f&&(r==null||r===-1||r<o.length-1)&&this._shouldEnterAsFirstChild(e,t)&&(f=o[0]),s>-1&&o.splice(s,1),f&&!this._dragDropRegistry.isDragging(f)){let w=f.getRootElement();w.parentElement.insertBefore(h,w),o.splice(r,0,n)}else this._element.appendChild(h),o.push(n);h.style.transform="",this._cacheItemPositions()}withItems(n){this._activeDraggables=n.slice(),this._cacheItemPositions()}withSortPredicate(n){this._sortPredicate=n}reset(){this._activeDraggables?.forEach(n=>{let e=n.getRootElement();if(e){let t=this._itemPositions.find(i=>i.drag===n)?.initialTransform;e.style.transform=t||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(n){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(t=>t.drag===n)}updateOnScroll(n,e){this._itemPositions.forEach(({clientRect:t})=>{We(t,n,e)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(n){this._element=n}_cacheItemPositions(){let n=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let t=e.getVisibleElement();return{drag:e,offset:0,initialTransform:t.style.transform||"",clientRect:ei(t)}}).sort((e,t)=>n?e.clientRect.left-t.clientRect.left:e.clientRect.top-t.clientRect.top)}_getItemOffsetPx(n,e,t){let i=this.orientation==="horizontal",r=i?e.left-n.left:e.top-n.top;return t===-1&&(r+=i?e.width-n.width:e.height-n.height),r}_getSiblingOffsetPx(n,e,t){let i=this.orientation==="horizontal",r=e[n].clientRect,o=e[n+t*-1],s=r[i?"width":"height"]*t;if(o){let h=i?"left":"top",f=i?"right":"bottom";t===-1?s-=o.clientRect[h]-r[f]:s+=r[h]-o.clientRect[f]}return s}_shouldEnterAsFirstChild(n,e){if(!this._activeDraggables.length)return!1;let t=this._itemPositions,i=this.orientation==="horizontal";if(t[0].drag!==this._activeDraggables[0]){let o=t[t.length-1].clientRect;return i?n>=o.right:e>=o.bottom}else{let o=t[0].clientRect;return i?n<=o.left:e<=o.top}}_getItemIndexFromPointerPosition(n,e,t,i){let r=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:s,clientRect:h})=>{if(s===n)return!1;if(i){let f=r?i.x:i.y;if(s===this._previousSwap.drag&&this._previousSwap.overlaps&&f===this._previousSwap.delta)return!1}return r?e>=Math.floor(h.left)&&e<Math.floor(h.right):t>=Math.floor(h.top)&&t<Math.floor(h.bottom)});return o===-1||!this._sortPredicate(o,n)?-1:o}},Xt=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(n,e){this._document=n,this._dragDropRegistry=e}start(n){let e=this._element.childNodes;this._relatedNodes=[];for(let t=0;t<e.length;t++){let i=e[t];this._relatedNodes.push([i,i.nextSibling])}this.withItems(n)}sort(n,e,t,i){let r=this._getItemIndexFromPointerPosition(n,e,t),o=this._previousSwap;if(r===-1||this._activeItems[r]===n)return null;let s=this._activeItems[r];if(o.drag===s&&o.overlaps&&o.deltaX===i.x&&o.deltaY===i.y)return null;let h=this.getItemIndex(n),f=n.getPlaceholderElement(),w=s.getRootElement();r>h?w.after(f):w.before(f),Mt(this._activeItems,h,r);let A=this._getRootNode().elementFromPoint(e,t);return o.deltaX=i.x,o.deltaY=i.y,o.drag=s,o.overlaps=w===A||w.contains(A),{previousIndex:h,currentIndex:r}}enter(n,e,t,i){let r=i==null||i<0?this._getItemIndexFromPointerPosition(n,e,t):i;r===-1&&(r=this._getClosestItemIndexToPointer(n,e,t));let o=this._activeItems[r],s=this._activeItems.indexOf(n);s>-1&&this._activeItems.splice(s,1),o&&!this._dragDropRegistry.isDragging(o)?(this._activeItems.splice(r,0,n),o.getRootElement().before(n.getPlaceholderElement())):(this._activeItems.push(n),this._element.appendChild(n.getPlaceholderElement()))}withItems(n){this._activeItems=n.slice()}withSortPredicate(n){this._sortPredicate=n}reset(){let n=this._element,e=this._previousSwap;for(let t=this._relatedNodes.length-1;t>-1;t--){let[i,r]=this._relatedNodes[t];i.parentNode===n&&i.nextSibling!==r&&(r===null?n.appendChild(i):r.parentNode===n&&n.insertBefore(i,r))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(n){return this._activeItems.indexOf(n)}updateOnScroll(){this._activeItems.forEach(n=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}withElementContainer(n){n!==this._element&&(this._element=n,this._rootNode=void 0)}_getItemIndexFromPointerPosition(n,e,t){let i=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(t)),r=i?this._activeItems.findIndex(o=>{let s=o.getRootElement();return i===s||s.contains(i)}):-1;return r===-1||!this._sortPredicate(r,n)?-1:r}_getRootNode(){return this._rootNode||(this._rootNode=lt(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(n,e,t){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,r=-1;for(let o=0;o<this._activeItems.length;o++){let s=this._activeItems[o];if(s!==n){let{x:h,y:f}=s.getRootElement().getBoundingClientRect(),w=Math.hypot(e-h,t-f);w<i&&(i=w,r=o)}}return r}},Pn=.05,On=.05,H=function(a){return a[a.NONE=0]="NONE",a[a.UP=1]="UP",a[a.DOWN=2]="DOWN",a}(H||{}),R=function(a){return a[a.NONE=0]="NONE",a[a.LEFT=1]="LEFT",a[a.RIGHT=2]="RIGHT",a}(R||{}),Jt=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new D;entered=new D;exited=new D;dropped=new D;sorted=new D;receivingStarted=new D;receivingStopped=new D;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=F.EMPTY;_verticalScrollDirection=H.NONE;_horizontalScrollDirection=R.NONE;_scrollNode;_stopScrollTimers=new D;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(n,e,t,i,r){this._dragDropRegistry=e,this._ngZone=i,this._viewportRuler=r;let o=this.element=ue(n);this._document=t,this.withOrientation("vertical").withElementContainer(o),e.registerDropContainer(this),this._parentPositions=new xt(t)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(n,e,t,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(n)),this._sortStrategy.enter(n,e,t,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:n,container:this,currentIndex:this.getItemIndex(n)})}exit(n){this._reset(),this.exited.next({item:n,container:this})}drop(n,e,t,i,r,o,s,h={}){this._reset(),this.dropped.next({item:n,currentIndex:e,previousIndex:t,container:this,previousContainer:i,isPointerOverContainer:r,distance:o,dropPoint:s,event:h})}withItems(n){let e=this._draggables;return this._draggables=n,n.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(e.filter(i=>i.isDragging()).every(i=>n.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(n){return this._direction=n,this._sortStrategy instanceof It&&(this._sortStrategy.direction=n),this}connectedTo(n){return this._siblings=n.slice(),this}withOrientation(n){if(n==="mixed")this._sortStrategy=new Xt(this._document,this._dragDropRegistry);else{let e=new It(this._dragDropRegistry);e.direction=this._direction,e.orientation=n,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,t)=>this.sortPredicate(e,t,this)),this}withScrollableParents(n){let e=this._container;return this._scrollableElements=n.indexOf(e)===-1?[e,...n]:n.slice(),this}withElementContainer(n){if(n===this._container)return this;let e=ue(this.element),t=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(n);return t>-1&&this._scrollableElements.splice(t,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(n),this._cachedShadowRoot=null,this._scrollableElements.unshift(n),this._container=n,this}getScrollableParents(){return this._scrollableElements}getItemIndex(n){return this._isDragging?this._sortStrategy.getItemIndex(n):this._draggables.indexOf(n)}isReceiving(){return this._activeSiblings.size>0}_sortItem(n,e,t,i){if(this.sortingDisabled||!this._domRect||!Dn(this._domRect,Pn,e,t))return;let r=this._sortStrategy.sort(n,e,t,i);r&&this.sorted.next({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:n})}_startScrollingIfNecessary(n,e){if(this.autoScrollDisabled)return;let t,i=H.NONE,r=R.NONE;if(this._parentPositions.positions.forEach((o,s)=>{s===this._document||!o.clientRect||t||Dn(o.clientRect,Pn,n,e)&&([i,r]=fa(s,o.clientRect,this._direction,n,e),(i||r)&&(t=s))}),!i&&!r){let{width:o,height:s}=this._viewportRuler.getViewportSize(),h={width:o,height:s,top:0,right:o,bottom:s,left:0};i=Bn(h,e),r=Vn(h,n),t=window}t&&(i!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||t!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=r,this._scrollNode=t,(i||r)&&t?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let n=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=n.msScrollSnapType||n.scrollSnapType||"",n.scrollSnapType=n.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let n=this._container.style;n.scrollSnapType=n.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),bi(0,hi).pipe(Q(this._stopScrollTimers)).subscribe(()=>{let n=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===H.UP?n.scrollBy(0,-e):this._verticalScrollDirection===H.DOWN&&n.scrollBy(0,e),this._horizontalScrollDirection===R.LEFT?n.scrollBy(-e,0):this._horizontalScrollDirection===R.RIGHT&&n.scrollBy(e,0)})};_isOverContainer(n,e){return this._domRect!=null&&Zt(this._domRect,n,e)}_getSiblingContainerFromPosition(n,e,t){return this._siblings.find(i=>i._canReceive(n,e,t))}_canReceive(n,e,t){if(!this._domRect||!Zt(this._domRect,e,t)||!this.enterPredicate(n,this))return!1;let i=this._getShadowRoot().elementFromPoint(e,t);return i?i===this._container||this._container.contains(i):!1}_startReceiving(n,e){let t=this._activeSiblings;!t.has(n)&&e.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(t.add(n),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:n,receiver:this,items:e}))}_stopReceiving(n){this._activeSiblings.delete(n),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:n,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(n=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(n);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let n=lt(this._container);this._cachedShadowRoot=n||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let n=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,n))}};function Bn(a,n){let{top:e,bottom:t,height:i}=a,r=i*On;return n>=e-r&&n<=e+r?H.UP:n>=t-r&&n<=t+r?H.DOWN:H.NONE}function Vn(a,n){let{left:e,right:t,width:i}=a,r=i*On;return n>=e-r&&n<=e+r?R.LEFT:n>=t-r&&n<=t+r?R.RIGHT:R.NONE}function fa(a,n,e,t,i){let r=Bn(n,i),o=Vn(n,t),s=H.NONE,h=R.NONE;if(r){let f=a.scrollTop;r===H.UP?f>0&&(s=H.UP):a.scrollHeight-f>a.clientHeight&&(s=H.DOWN)}if(o){let f=a.scrollLeft;e==="rtl"?o===R.RIGHT?f<0&&(h=R.RIGHT):a.scrollWidth+f>a.clientWidth&&(h=R.LEFT):o===R.LEFT?f>0&&(h=R.LEFT):a.scrollWidth-f>a.clientWidth&&(h=R.RIGHT)}return[s,h]}var je={capture:!0},qt={passive:!1,capture:!0},va=(()=>{class a{static \u0275fac=function(t){return new(t||a)};static \u0275cmp=k({type:a,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(t,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return a})(),Gn=(()=>{class a{_ngZone=u(le);_document=u(Ht);_styleLoader=u(ct);_renderer=u(Bt).createRenderer(null,null);_cleanupDocumentTouchmove;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Ot([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new D;pointerUp=new D;scroll=new D;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=$(this._renderer,this._document,"touchmove",this._persistentTouchmoveListener,qt)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,t){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(va),this._activeDragInstances.update(i=>[...i,e]),this._activeDragInstances().length===1)){let i=t.type.startsWith("touch"),r=s=>this.pointerUp.next(s),o=[["scroll",s=>this.scroll.next(s),je],["selectstart",this._preventDefaultWhileDragging,qt]];i?o.push(["touchend",r,je],["touchcancel",r,je]):o.push(["mouseup",r,je]),i||o.push(["mousemove",s=>this.pointerMove.next(s),qt]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=o.map(([s,h,f])=>$(this._renderer,this._document,s,h,f))})}}stopDragging(e){this._activeDragInstances.update(t=>{let i=t.indexOf(e);return i>-1?(t.splice(i,1),[...t]):t}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let t=[this.scroll];return e&&e!==this._document&&t.push(new Ae(i=>this._ngZone.runOutsideAngular(()=>{let r=$(this._renderer,e,"scroll",o=>{this._activeDragInstances().length&&i.next(o)},je);return()=>{r()}}))),se(...t)}registerDirectiveNode(e,t){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,t)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(t){return new(t||a)};static \u0275prov=Fe({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),ya={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Hn=(()=>{class a{_document=u(Ht);_ngZone=u(le);_viewportRuler=u(ft);_dragDropRegistry=u(Gn);_renderer=u(Bt).createRenderer(null,null);constructor(){}createDrag(e,t=ya){return new Yt(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new Jt(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(t){return new(t||a)};static \u0275prov=Fe({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),Rn=new V("CDK_DRAG_PARENT");var wa=new V("CdkDragHandle");var zn=new V("CDK_DRAG_CONFIG"),jn=new V("CdkDropList"),Wn=(()=>{class a{element=u(ne);dropContainer=u(jn,{optional:!0,skipSelf:!0});_ngZone=u(le);_viewContainerRef=u(Je);_dir=u(Ee,{optional:!0});_changeDetectorRef=u(oe);_selfHandle=u(wa,{optional:!0,self:!0});_parentDrag=u(Rn,{optional:!0,skipSelf:!0});_dragDropRegistry=u(Gn);_destroyed=new D;_handles=new Nt([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new x;released=new x;ended=new x;entered=new x;exited=new x;dropped=new x;moved=new Ae(e=>{let t=this._dragRef.moved.pipe(qe(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(e);return()=>{t.unsubscribe()}});_injector=u(Ne);constructor(){let e=this.dropContainer,t=u(zn,{optional:!0}),i=u(Hn);this._dragRef=i.createDrag(this.element,{dragStartThreshold:t&&t.dragStartThreshold!=null?t.dragStartThreshold:5,pointerDirectionChangeThreshold:t&&t.pointerDirectionChangeThreshold!=null?t.pointerDirectionChangeThreshold:5,zIndex:t?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),t&&this._assignDefaults(t),e&&(this._dragRef._withDropContainer(e._dropListRef),e.addItem(this),e._dropListRef.beforeStarted.pipe(Q(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){De(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let t=e.rootElementSelector,i=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let t=this._handles.getValue();t.push(e),this._handles.next(t)}_removeHandle(e){let t=this._handles.getValue(),i=t.indexOf(e);i>-1&&(t.splice(i,1),this._handles.next(t))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,t=e;this.rootElementSelector&&(t=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(t||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):ue(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let t=this._dir,i=this.dragStartDelay,r=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof i=="object"&&i?i:Wt(i),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),t&&e.withDirection(t.value)}}),e.beforeStarted.pipe(yi(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let t=this.element.nativeElement.parentElement;for(;t;){let i=this._dragDropRegistry.getDragDirectiveForNode(t);if(i){e.withParent(i._dragRef);break}t=t.parentElement}})}_handleEvents(e){e.started.subscribe(t=>{this.started.emit({source:this,event:t.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(t=>{this.released.emit({source:this,event:t.event})}),e.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event})})}_assignDefaults(e){let{lockAxis:t,dragStartDelay:i,constrainPosition:r,previewClass:o,boundaryElement:s,draggingDisabled:h,rootElementSelector:f,previewContainer:w}=e;this.disabled=h??!1,this.dragStartDelay=i||0,t&&(this.lockAxis=t),r&&(this.constrainPosition=r),o&&(this.previewClass=o),s&&(this.boundaryElement=s),f&&(this.rootElementSelector=f),w&&(this.previewContainer=w)}_setupHandlesListener(){this._handles.pipe(Di(e=>{let t=e.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),Ce(e=>se(...e.map(t=>t._stateChanges.pipe(ve(t))))),Q(this._destroyed)).subscribe(e=>{let t=this._dragRef,i=e.element.nativeElement;e.disabled?t.disableHandle(i):t.enableHandle(i)})}static \u0275fac=function(t){return new(t||a)};static \u0275dir=U({type:a,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,i){t&2&&O("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",P],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",Me]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[pe([{provide:Rn,useExisting:a}]),Ke]})}return a})(),Ln=new V("CdkDropListGroup");var $n=(()=>{class a{element=u(ne);_changeDetectorRef=u(oe);_scrollDispatcher=u(Ji);_dir=u(Ee,{optional:!0});_group=u(Ln,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new D;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=u(dt).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;dropped=new x;entered=new x;exited=new x;sorted=new x;_unsortedItems=new Set;constructor(){let e=u(Hn),t=u(zn,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,t&&this._assignDefaults(t),this._dropListRef.enterPredicate=(i,r)=>this.enterPredicate(i.data,r.data),this._dropListRef.sortPredicate=(i,r,o)=>this.sortPredicate(i,r.data,o.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),a._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(t=>t._dragRef))}removeItem(e){if(this._unsortedItems.delete(e),this._latestSortedRefs){let t=this._latestSortedRefs.indexOf(e._dragRef);t>-1&&(this._latestSortedRefs.splice(t,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=a._dropLists.indexOf(this);e>-1&&a._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(ve(this._dir.value),Q(this._destroyed)).subscribe(t=>e.withDirection(t)),e.beforeStarted.subscribe(()=>{let t=zi(this.connectedTo).map(i=>{if(typeof i=="string"){let r=a._dropLists.find(o=>o.id===i);return r}return i});if(this._group&&this._group._items.forEach(i=>{t.indexOf(i)===-1&&t.push(i)}),!this._scrollableParentsResolved){let i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(r=>r.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let i=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(i)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=Wt(this.autoScrollStep,2),e.connectedTo(t.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(t=>t._dragRef)),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:this,item:t.item.data,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:this,item:t.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(t=>{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),se(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:t,draggingDisabled:i,sortingDisabled:r,listAutoScrollDisabled:o,listOrientation:s}=e;this.disabled=i??!1,this.sortingDisabled=r??!1,this.autoScrollDisabled=o??!1,this.orientation=s||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(e){this._latestSortedRefs=e,this._dropListRef.withItems(e)}static \u0275fac=function(t){return new(t||a)};static \u0275dir=U({type:a,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,i){t&2&&(q("id",i.id),O("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",P],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",P],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",P],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[pe([{provide:Ln,useValue:void 0},{provide:jn,useExisting:a}])]})}return a})();var Qn=(()=>{class a{constructor(){}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=k({type:a,selectors:[["app-confirm-music-delete-dialog"]],decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-flat-button","","color","warn",3,"mat-dialog-close"]],template:function(t,i){t&1&&(l(0,"h1",0),p(1,"Are you sure you want to purge this game?"),c(),l(2,"div",1),p(3,"All musics and albums will be deleted."),c(),l(4,"mat-dialog-actions",2)(5,"button",3),p(6,"Cancel"),c(),l(7,"button",4),p(8,"Confirm"),c()()),t&2&&(d(7),m("mat-dialog-close",!0))},dependencies:[ee,Y,X,J,te],encapsulation:2})}return a})();var Un=(()=>{class a{http;apiEndpoint=ot.apiEndpoint;constructor(e){this.http=e}edit(e,t){return this.http.patch(`${this.apiEndpoint}/admin/game-album/${e}`,{name:t.name,date:t.date})}editCover(e,t){let i=new FormData;return i.append("file",t),this.http.patch(`${this.apiEndpoint}/admin/game-album/${e}/cover`,i)}delete(e){return this.http.delete(`${this.apiEndpoint}/admin/game-album/${e}`)}static \u0275fac=function(t){return new(t||a)(xi(Fi))};static \u0275prov=Fe({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var oi=["*"];function ka(a,n){a&1&&nt(0)}var Sa=["tabListContainer"],Ia=["tabList"],Ma=["tabListInner"],Ea=["nextPaginator"],Pa=["previousPaginator"],Ra=["content"];function La(a,n){}var Aa=["tabBodyWrapper"],Fa=["tabHeader"];function Na(a,n){}function Oa(a,n){if(a&1&&y(0,Na,0,0,"ng-template",12),a&2){let e=_().$implicit;m("cdkPortalOutlet",e.templateLabel)}}function Ba(a,n){if(a&1&&p(0),a&2){let e=_().$implicit;j(e.textLabel)}}function Va(a,n){if(a&1){let e=T();l(0,"div",7,2),v("click",function(){let i=g(e),r=i.$implicit,o=i.$index,s=_(),h=I(1);return b(s._handleClick(r,h,o))})("cdkFocusChange",function(i){let r=g(e).$index,o=_();return b(o._tabFocusChanged(i,r))}),S(2,"span",8)(3,"div",9),l(4,"span",10)(5,"span",11),y(6,Oa,1,1,null,12)(7,Ba,1,1),c()()()}if(a&2){let e=n.$implicit,t=n.$index,i=I(1),r=_();tt(e.labelClass),O("mdc-tab--active",r.selectedIndex===t),m("id",r._getTabLabelId(e,t))("disabled",e.disabled)("fitInkBarToContent",r.fitInkBarToContent),q("tabIndex",r._getTabIndex(t))("aria-posinset",t+1)("aria-setsize",r._tabs.length)("aria-controls",r._getTabContentId(t))("aria-selected",r.selectedIndex===t)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),d(3),m("matRippleTrigger",i)("matRippleDisabled",e.disabled||r.disableRipple),d(3),xe(e.templateLabel?6:7)}}function Ga(a,n){a&1&&nt(0)}function Ha(a,n){if(a&1){let e=T();l(0,"mat-tab-body",13),v("_onCentered",function(){g(e);let i=_();return b(i._removeTabBodyWrapperHeight())})("_onCentering",function(i){g(e);let r=_();return b(r._setTabBodyWrapperHeight(i))})("_beforeCentering",function(i){g(e);let r=_();return b(r._bodyCentered(i))}),c()}if(a&2){let e=n.$implicit,t=n.$index,i=_();tt(e.bodyClass),m("id",i._getTabContentId(t))("content",e.content)("position",e.position)("animationDuration",i.animationDuration)("preserveContent",i.preserveContent),q("tabindex",i.contentTabIndex!=null&&i.selectedIndex===t?i.contentTabIndex:null)("aria-labelledby",i._getTabLabelId(e,t))("aria-hidden",i.selectedIndex!==t)}}var za=new V("MatTabContent"),ja=(()=>{class a{template=u(Be);constructor(){}static \u0275fac=function(t){return new(t||a)};static \u0275dir=U({type:a,selectors:[["","matTabContent",""]],features:[pe([{provide:za,useExisting:a}])]})}return a})(),Wa=new V("MatTabLabel"),Yn=new V("MAT_TAB"),$a=(()=>{class a extends Xi{_closestTab=u(Yn,{optional:!0});static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ye(a)))(i||a)}})();static \u0275dir=U({type:a,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[pe([{provide:Wa,useExisting:a}]),Ve]})}return a})(),Xn=new V("MAT_TAB_GROUP"),$e=(()=>{class a{_viewContainerRef=u(Je);_closestTabGroup=u(Xn,{optional:!0});disabled=!1;get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}_templateLabel;_explicitContent=void 0;_implicitContent;textLabel="";ariaLabel;ariaLabelledby;labelClass;bodyClass;id=null;_contentPortal=null;get content(){return this._contentPortal}_stateChanges=new D;position=null;origin=null;isActive=!1;constructor(){u(ct).load(nn)}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new Yi(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=k({type:a,selectors:[["mat-tab"]],contentQueries:function(t,i,r){if(t&1&&(Ge(r,$a,5),Ge(r,ja,7,Be)),t&2){let o;M(o=E())&&(i.templateLabel=o.first),M(o=E())&&(i._explicitContent=o.first)}},viewQuery:function(t,i){if(t&1&&L(Be,7),t&2){let r;M(r=E())&&(i._implicitContent=r.first)}},hostAttrs:["hidden",""],hostVars:1,hostBindings:function(t,i){t&2&&q("id",null)},inputs:{disabled:[2,"disabled","disabled",P],textLabel:[0,"label","textLabel"],ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass",id:"id"},exportAs:["matTab"],features:[pe([{provide:Yn,useExisting:a}]),Ke],ngContentSelectors:oi,decls:1,vars:0,template:function(t,i){t&1&&(it(),y(0,ka,1,0,"ng-template"))},encapsulation:2})}return a})(),ii="mdc-tab-indicator--active",qn="mdc-tab-indicator--no-transition",ni=class{_items;_currentItem;constructor(n){this._items=n}hide(){this._items.forEach(n=>n.deactivateInkBar()),this._currentItem=void 0}alignToElement(n){let e=this._items.find(i=>i.elementRef.nativeElement===n),t=this._currentItem;if(e!==t&&(t?.deactivateInkBar(),e)){let i=t?.elementRef.nativeElement.getBoundingClientRect?.();e.activateInkBar(i),this._currentItem=e}}},Qa=(()=>{class a{_elementRef=u(ne);_inkBarElement;_inkBarContentElement;_fitToContent=!1;get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){this._fitToContent!==e&&(this._fitToContent=e,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){let t=this._elementRef.nativeElement;if(!e||!t.getBoundingClientRect||!this._inkBarContentElement){t.classList.add(ii);return}let i=t.getBoundingClientRect(),r=e.width/i.width,o=e.left-i.left;t.classList.add(qn),this._inkBarContentElement.style.setProperty("transform",`translateX(${o}px) scaleX(${r})`),t.getBoundingClientRect(),t.classList.remove(qn),t.classList.add(ii),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(ii)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let e=this._elementRef.nativeElement.ownerDocument||document,t=this._inkBarElement=e.createElement("span"),i=this._inkBarContentElement=e.createElement("span");t.className="mdc-tab-indicator",i.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",t.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let e=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;e.appendChild(this._inkBarElement)}static \u0275fac=function(t){return new(t||a)};static \u0275dir=U({type:a,inputs:{fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",P]}})}return a})();var Jn=(()=>{class a extends Qa{elementRef=u(ne);disabled=!1;focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ye(a)))(i||a)}})();static \u0275dir=U({type:a,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,i){t&2&&(q("aria-disabled",!!i.disabled),O("mat-mdc-tab-disabled",i.disabled))},inputs:{disabled:[2,"disabled","disabled",P]},features:[Ve]})}return a})(),Zn={passive:!0},Ua=650,qa=100,Za=(()=>{class a{_elementRef=u(ne);_changeDetectorRef=u(oe);_viewportRuler=u(ft);_dir=u(Ee,{optional:!0});_ngZone=u(le);_platform=u(jt);_sharedResizeObserver=u(on);_injector=u(Ne);_renderer=u(Vt);_animationMode=u(Xe,{optional:!0});_eventCleanups;_scrollDistance=0;_selectedIndexChanged=!1;_destroyed=new D;_showPaginationControls=!1;_disableScrollAfter=!0;_disableScrollBefore=!0;_tabLabelCount;_scrollDistanceChanged;_keyManager;_currentTextContent;_stopScrolling=new D;disablePagination=!1;get selectedIndex(){return this._selectedIndex}set selectedIndex(e){let t=isNaN(e)?0:e;this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}_selectedIndex=0;selectFocusedIndex=new x;indexFocused=new x;constructor(){this._eventCleanups=this._ngZone.runOutsideAngular(()=>[this._renderer.listen(this._elementRef.nativeElement,"mouseleave",()=>this._stopInterval())])}ngAfterViewInit(){this._eventCleanups.push($(this._renderer,this._previousPaginator.nativeElement,"touchstart",()=>this._handlePaginatorPress("before"),Zn),$(this._renderer,this._nextPaginator.nativeElement,"touchstart",()=>this._handlePaginatorPress("after"),Zn))}ngAfterContentInit(){let e=this._dir?this._dir.change:Ue("ltr"),t=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe(vi(32),Q(this._destroyed)),i=this._viewportRuler.change(150).pipe(Q(this._destroyed)),r=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new $i(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),De(r,{injector:this._injector}),se(e,i,t,this._items.changes,this._itemsResized()).pipe(Q(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),r()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(o=>{this.indexFocused.emit(o),this._setTabFocus(o)})}_itemsResized(){return typeof ResizeObserver!="function"?_i:this._items.changes.pipe(ve(this._items),Ce(e=>new Ae(t=>this._ngZone.runOutsideAngular(()=>{let i=new ResizeObserver(r=>t.next(r));return e.forEach(r=>i.observe(r.elementRef.nativeElement)),()=>{i.disconnect()}}))),Ci(1),fi(e=>e.some(t=>t.contentRect.width>0&&t.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._eventCleanups.forEach(e=>e()),this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!Wi(e))switch(e.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let t=this._items.get(this.focusIndex);t&&!t.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){let e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return this._items?!!this._items.toArray()[e]:!0}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();let t=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?t.scrollLeft=0:t.scrollLeft=t.scrollWidth-t.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let e=this.scrollDistance,t=this._getLayoutDirection()==="ltr"?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(t)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){let t=this._tabListContainer.nativeElement.offsetWidth,i=(e=="before"?-1:1)*t/3;return this._scrollTo(this._scrollDistance+i)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;let t=this._items?this._items.toArray()[e]:null;if(!t)return;let i=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:r,offsetWidth:o}=t.elementRef.nativeElement,s,h;this._getLayoutDirection()=="ltr"?(s=r,h=s+o):(h=this._tabListInner.nativeElement.offsetWidth-r,s=h-o);let f=this.scrollDistance,w=this.scrollDistance+i;s<f?this.scrollDistance-=f-s:h>w&&(this.scrollDistance+=Math.min(h-w,s-f))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let e=this._tabListInner.nativeElement.scrollWidth,t=this._elementRef.nativeElement.offsetWidth,i=e-t>=5;i||(this.scrollDistance=0),i!==this._showPaginationControls&&(this._showPaginationControls=i,this._changeDetectorRef.markForCheck())}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let e=this._tabListInner.nativeElement.scrollWidth,t=this._tabListContainer.nativeElement.offsetWidth;return e-t||0}_alignInkBarToSelectedTab(){let e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,t=e?e.elementRef.nativeElement:null;t?this._inkBar.alignToElement(t):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,t){t&&t.button!=null&&t.button!==0||(this._stopInterval(),gi(Ua,qa).pipe(Q(se(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:i,distance:r}=this._scrollHeader(e);(r===0||r>=i)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let t=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(t,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:t,distance:this._scrollDistance}}static \u0275fac=function(t){return new(t||a)};static \u0275dir=U({type:a,inputs:{disablePagination:[2,"disablePagination","disablePagination",P],selectedIndex:[2,"selectedIndex","selectedIndex",Me]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"}})}return a})(),Ka=(()=>{class a extends Za{_items;_tabListContainer;_tabList;_tabListInner;_nextPaginator;_previousPaginator;_inkBar;ariaLabel;ariaLabelledby;disableRipple=!1;ngAfterContentInit(){this._inkBar=new ni(this._items),super.ngAfterContentInit()}_itemSelected(e){e.preventDefault()}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ye(a)))(i||a)}})();static \u0275cmp=k({type:a,selectors:[["mat-tab-header"]],contentQueries:function(t,i,r){if(t&1&&Ge(r,Jn,4),t&2){let o;M(o=E())&&(i._items=o)}},viewQuery:function(t,i){if(t&1&&(L(Sa,7),L(Ia,7),L(Ma,7),L(Ea,5),L(Pa,5)),t&2){let r;M(r=E())&&(i._tabListContainer=r.first),M(r=E())&&(i._tabList=r.first),M(r=E())&&(i._tabListInner=r.first),M(r=E())&&(i._nextPaginator=r.first),M(r=E())&&(i._previousPaginator=r.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(t,i){t&2&&O("mat-mdc-tab-header-pagination-controls-enabled",i._showPaginationControls)("mat-mdc-tab-header-rtl",i._getLayoutDirection()=="rtl")},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],disableRipple:[2,"disableRipple","disableRipple",P]},features:[Ve],ngContentSelectors:oi,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled"]],template:function(t,i){if(t&1){let r=T();it(),l(0,"div",5,0),v("click",function(){return g(r),b(i._handlePaginatorClick("before"))})("mousedown",function(s){return g(r),b(i._handlePaginatorPress("before",s))})("touchend",function(){return g(r),b(i._stopInterval())}),S(2,"div",6),c(),l(3,"div",7,1),v("keydown",function(s){return g(r),b(i._handleKeydown(s))}),l(5,"div",8,2),v("cdkObserveContent",function(){return g(r),b(i._onContentChanges())}),l(7,"div",9,3),nt(9),c()()(),l(10,"div",10,4),v("mousedown",function(s){return g(r),b(i._handlePaginatorPress("after",s))})("click",function(){return g(r),b(i._handlePaginatorClick("after"))})("touchend",function(){return g(r),b(i._stopInterval())}),S(12,"div",6),c()}t&2&&(O("mat-mdc-tab-header-pagination-disabled",i._disableScrollBefore),m("matRippleDisabled",i._disableScrollBefore||i.disableRipple),d(3),O("_mat-animation-noopable",i._animationMode==="NoopAnimations"),d(2),q("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby||null),d(5),O("mat-mdc-tab-header-pagination-disabled",i._disableScrollAfter),m("matRippleDisabled",i._disableScrollAfter||i.disableRipple))},dependencies:[Qt,ji],styles:[`.mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;outline:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color, var(--mat-sys-on-surface))}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height, 1px);border-bottom-color:var(--mat-tab-header-divider-color, var(--mat-sys-surface-variant))}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height, 1px);border-top-color:var(--mat-tab-header-divider-color, var(--mat-sys-surface-variant))}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.cdk-drop-list .mat-mdc-tab-labels,.mat-mdc-tab-labels.cdk-drop-list{min-height:var(--mdc-secondary-navigation-tab-container-height, 48px)}.mat-mdc-tab::before{margin:5px}@media(forced-colors: active){.mat-mdc-tab[aria-disabled=true]{color:GrayText}}
`],encapsulation:2})}return a})(),Ya=new V("MAT_TABS_CONFIG"),Kn=(()=>{class a extends $t{_host=u(ai);_centeringSub=F.EMPTY;_leavingSub=F.EMPTY;constructor(){super()}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(ve(this._host._isCenterPosition())).subscribe(e=>{this._host._content&&e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static \u0275fac=function(t){return new(t||a)};static \u0275dir=U({type:a,selectors:[["","matTabBodyHost",""]],features:[Ve]})}return a})(),ai=(()=>{class a{_elementRef=u(ne);_dir=u(Ee,{optional:!0});_ngZone=u(le);_injector=u(Ne);_renderer=u(Vt);_animationsModule=u(Xe,{optional:!0});_eventCleanups;_initialized;_fallbackTimer;_positionIndex;_dirChangeSubscription=F.EMPTY;_position;_previousPosition;_onCentering=new x;_beforeCentering=new x;_afterLeavingCenter=new x;_onCentered=new x(!0);_portalHost;_contentElement;_content;animationDuration="500ms";preserveContent=!1;set position(e){this._positionIndex=e,this._computePositionAnimationState()}constructor(){if(this._dir){let e=u(oe);this._dirChangeSubscription=this._dir.change.subscribe(t=>{this._computePositionAnimationState(t),e.markForCheck()})}}ngOnInit(){this._bindTransitionEvents(),this._position==="center"&&(this._setActiveClass(!0),De(()=>this._onCentering.emit(this._elementRef.nativeElement.clientHeight),{injector:this._injector})),this._initialized=!0}ngOnDestroy(){clearTimeout(this._fallbackTimer),this._eventCleanups?.forEach(e=>e()),this._dirChangeSubscription.unsubscribe()}_bindTransitionEvents(){this._ngZone.runOutsideAngular(()=>{let e=this._elementRef.nativeElement,t=i=>{i.target===this._contentElement?.nativeElement&&(this._elementRef.nativeElement.classList.remove("mat-tab-body-animating"),i.type==="transitionend"&&this._transitionDone())};this._eventCleanups=[this._renderer.listen(e,"transitionstart",i=>{i.target===this._contentElement?.nativeElement&&(this._elementRef.nativeElement.classList.add("mat-tab-body-animating"),this._transitionStarted())}),this._renderer.listen(e,"transitionend",t),this._renderer.listen(e,"transitioncancel",t)]})}_transitionStarted(){clearTimeout(this._fallbackTimer);let e=this._position==="center";this._beforeCentering.emit(e),e&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_transitionDone(){this._position==="center"?this._onCentered.emit():this._previousPosition==="center"&&this._afterLeavingCenter.emit()}_setActiveClass(e){this._elementRef.nativeElement.classList.toggle("mat-mdc-tab-body-active",e)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(){return this._positionIndex===0}_computePositionAnimationState(e=this._getLayoutDirection()){this._previousPosition=this._position,this._positionIndex<0?this._position=e=="ltr"?"left":"right":this._positionIndex>0?this._position=e=="ltr"?"right":"left":this._position="center",this._animationsDisabled()?this._simulateTransitionEvents():this._initialized&&(this._position==="center"||this._previousPosition==="center")&&(clearTimeout(this._fallbackTimer),this._fallbackTimer=this._ngZone.runOutsideAngular(()=>setTimeout(()=>this._simulateTransitionEvents(),100)))}_simulateTransitionEvents(){this._transitionStarted(),De(()=>this._transitionDone(),{injector:this._injector})}_animationsDisabled(){return this._animationsModule==="NoopAnimations"||this.animationDuration==="0ms"||this.animationDuration==="0s"}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=k({type:a,selectors:[["mat-tab-body"]],viewQuery:function(t,i){if(t&1&&(L(Kn,5),L(Ra,5)),t&2){let r;M(r=E())&&(i._portalHost=r.first),M(r=E())&&(i._contentElement=r.first)}},hostAttrs:[1,"mat-mdc-tab-body"],hostVars:1,hostBindings:function(t,i){t&2&&q("inert",i._position==="center"?null:"")},inputs:{_content:[0,"content","_content"],animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_onCentered:"_onCentered"},decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(t,i){t&1&&(l(0,"div",1,0),y(2,La,0,0,"ng-template",2),c()),t&2&&O("mat-tab-body-content-left",i._position==="left")("mat-tab-body-content-right",i._position==="right")("mat-tab-body-content-can-animate",i._position==="center"||i._previousPosition==="center")},dependencies:[Kn,en],styles:[`.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto;transform:none;visibility:hidden}.mat-tab-body-animating>.mat-mdc-tab-body-content,.mat-mdc-tab-body-active>.mat-mdc-tab-body-content{visibility:visible}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-tab-body-content-can-animate{transition:transform var(--mat-tab-animation-duration) 1ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable .mat-tab-body-content-can-animate{transition:none}.mat-tab-body-content-left{transform:translate3d(-100%, 0, 0)}.mat-tab-body-content-right{transform:translate3d(100%, 0, 0)}
`],encapsulation:2})}return a})(),Et=(()=>{class a{_elementRef=u(ne);_changeDetectorRef=u(oe);_ngZone=u(le);_tabsSubscription=F.EMPTY;_tabLabelSubscription=F.EMPTY;_tabBodySubscription=F.EMPTY;_animationMode=u(Xe,{optional:!0});_allTabs;_tabBodies;_tabBodyWrapper;_tabHeader;_tabs=new Ti;_indexToSelect=0;_lastFocusedTabIndex=null;_tabBodyWrapperHeight=0;color;get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(e){this._fitInkBarToContent=e,this._changeDetectorRef.markForCheck()}_fitInkBarToContent=!1;stretchTabs=!0;alignTabs=null;dynamicHeight=!1;get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=isNaN(e)?null:e}_selectedIndex=null;headerPosition="above";get animationDuration(){return this._animationDuration}set animationDuration(e){let t=e+"";this._animationDuration=/^\d+$/.test(t)?e+"ms":t}_animationDuration;get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=isNaN(e)?null:e}_contentTabIndex;disablePagination=!1;disableRipple=!1;preserveContent=!1;get backgroundColor(){return this._backgroundColor}set backgroundColor(e){let t=this._elementRef.nativeElement.classList;t.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),e&&t.add("mat-tabs-with-background",`mat-background-${e}`),this._backgroundColor=e}_backgroundColor;ariaLabel;ariaLabelledby;selectedIndexChange=new x;focusChange=new x;animationDone=new x;selectedTabChange=new x(!0);_groupId;_isServer=!u(jt).isBrowser;constructor(){let e=u(Ya,{optional:!0});this._groupId=u(dt).getId("mat-tab-group-"),this.animationDuration=e&&e.animationDuration?e.animationDuration:"500ms",this.disablePagination=e&&e.disablePagination!=null?e.disablePagination:!1,this.dynamicHeight=e&&e.dynamicHeight!=null?e.dynamicHeight:!1,e?.contentTabIndex!=null&&(this.contentTabIndex=e.contentTabIndex),this.preserveContent=!!e?.preserveContent,this.fitInkBarToContent=e&&e.fitInkBarToContent!=null?e.fitInkBarToContent:!1,this.stretchTabs=e&&e.stretchTabs!=null?e.stretchTabs:!0,this.alignTabs=e&&e.alignTabs!=null?e.alignTabs:null}ngAfterContentChecked(){let e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){let t=this._selectedIndex==null;if(!t){this.selectedTabChange.emit(this._createChangeEvent(e));let i=this._tabBodyWrapper.nativeElement;i.style.minHeight=i.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((i,r)=>i.isActive=r===e),t||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((t,i)=>{t.position=i-e,this._selectedIndex!=null&&t.position==0&&!t.origin&&(t.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){let t=this._tabs.toArray(),i;for(let r=0;r<t.length;r++)if(t[r].isActive){this._indexToSelect=this._selectedIndex=r,this._lastFocusedTabIndex=null,i=t[r];break}!i&&t[e]&&Promise.resolve().then(()=>{t[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._tabBodySubscription=this._tabBodies.changes.subscribe(()=>this._bodyCentered(!0))}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(ve(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(t=>t._closestTabGroup===this||!t._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe(),this._tabBodySubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){let t=this._tabHeader;t&&(t.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){let t=new ri;return t.index=e,this._tabs&&this._tabs.length&&(t.tab=this._tabs.toArray()[e]),t}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=se(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e,t){return e.id||`${this._groupId}-label-${t}`}_getTabContentId(e){return`${this._groupId}-content-${e}`}_setTabBodyWrapperHeight(e){if(!this.dynamicHeight||!this._tabBodyWrapperHeight){this._tabBodyWrapperHeight=e;return}let t=this._tabBodyWrapper.nativeElement;t.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(t.style.height=e+"px")}_removeTabBodyWrapperHeight(){let e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this._ngZone.run(()=>this.animationDone.emit())}_handleClick(e,t,i){t.focusIndex=i,e.disabled||(this.selectedIndex=i)}_getTabIndex(e){let t=this._lastFocusedTabIndex??this.selectedIndex;return e===t?0:-1}_tabFocusChanged(e,t){e&&e!=="mouse"&&e!=="touch"&&(this._tabHeader.focusIndex=t)}_bodyCentered(e){e&&this._tabBodies?.forEach((t,i)=>t._setActiveClass(i===this._selectedIndex))}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=k({type:a,selectors:[["mat-tab-group"]],contentQueries:function(t,i,r){if(t&1&&Ge(r,$e,5),t&2){let o;M(o=E())&&(i._allTabs=o)}},viewQuery:function(t,i){if(t&1&&(L(Aa,5),L(Fa,5),L(ai,5)),t&2){let r;M(r=E())&&(i._tabBodyWrapper=r.first),M(r=E())&&(i._tabHeader=r.first),M(r=E())&&(i._tabBodies=r)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:11,hostBindings:function(t,i){t&2&&(q("mat-align-tabs",i.alignTabs),tt("mat-"+(i.color||"primary")),ki("--mat-tab-animation-duration",i.animationDuration),O("mat-mdc-tab-group-dynamic-height",i.dynamicHeight)("mat-mdc-tab-group-inverted-header",i.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",i.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",P],stretchTabs:[2,"mat-stretch-tabs","stretchTabs",P],alignTabs:[0,"mat-align-tabs","alignTabs"],dynamicHeight:[2,"dynamicHeight","dynamicHeight",P],selectedIndex:[2,"selectedIndex","selectedIndex",Me],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[2,"contentTabIndex","contentTabIndex",Me],disablePagination:[2,"disablePagination","disablePagination",P],disableRipple:[2,"disableRipple","disableRipple",P],preserveContent:[2,"preserveContent","preserveContent",P],backgroundColor:"backgroundColor",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"]},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],features:[pe([{provide:Xn,useExisting:a}])],ngContentSelectors:oi,decls:9,vars:8,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination","aria-label","aria-labelledby"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","class","content","position","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","_beforeCentering","id","content","position","animationDuration","preserveContent"]],template:function(t,i){if(t&1){let r=T();it(),l(0,"mat-tab-header",3,0),v("indexFocused",function(s){return g(r),b(i._focusChanged(s))})("selectFocusedIndex",function(s){return g(r),b(i.selectedIndex=s)}),de(2,Va,8,17,"div",4,ce),c(),y(4,Ga,1,0),l(5,"div",5,1),de(7,Ha,1,10,"mat-tab-body",6,ce),c()}t&2&&(m("selectedIndex",i.selectedIndex||0)("disableRipple",i.disableRipple)("disablePagination",i.disablePagination)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),d(2),me(i._tabs),d(2),xe(i._isServer?4:-1),d(),O("_mat-animation-noopable",i._animationMode==="NoopAnimations"),d(2),me(i._tabs))},dependencies:[Ka,Jn,Hi,Qt,$t,ai],styles:[`.mdc-tab{min-width:90px;padding:0 24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;z-index:1}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab--active .mdc-tab__text-label{transition-delay:100ms}._mat-animation-noopable .mdc-tab__text-label{transition:none}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transition:var(--mat-tab-animation-duration, 250ms) transform cubic-bezier(0.4, 0, 0.2, 1);transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}._mat-animation-noopable .mdc-tab-indicator__content,.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mat-mdc-tab-ripple.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;height:var(--mdc-secondary-navigation-tab-container-height, 48px);font-family:var(--mat-tab-header-label-text-font, var(--mat-sys-title-small-font));font-size:var(--mat-tab-header-label-text-size, var(--mat-sys-title-small-size));letter-spacing:var(--mat-tab-header-label-text-tracking, var(--mat-sys-title-small-tracking));line-height:var(--mat-tab-header-label-text-line-height, var(--mat-sys-title-small-line-height));font-weight:var(--mat-tab-header-label-text-weight, var(--mat-sys-title-small-weight))}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-tab-indicator-active-indicator-height, 2px);border-radius:var(--mdc-tab-indicator-active-indicator-shape, 0)}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color, var(--mat-sys-primary))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color, var(--mat-sys-primary))}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color, var(--mat-sys-on-surface));display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}
`],encapsulation:2})}return a})(),ri=class{index;tab};function Ja(a,n){if(a&1&&(l(0,"li"),p(1),c()),a&2){let e=n.$implicit;d(),j(e.game.name)}}function er(a,n){if(a&1&&(l(0,"div",5),p(1," This music also appear in these games "),l(2,"ul"),y(3,Ja,2,1,"li",6),c(),p(4,` You'll need to remove them manually if necessary
`),c()),a&2){let e=_();d(3),m("ngForOf",e.gameToMusic.derivedGameToMusics)}}var ea=(()=>{class a{data;gameToMusic;gameToMusicType=Dt;constructor(e){this.data=e}ngOnInit(){this.gameToMusic=this.data}static \u0275fac=function(t){return new(t||a)(C(fe))};static \u0275cmp=k({type:a,selectors:[["app-confirm-music-delete-dialog"]],standalone:!1,decls:8,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content","",4,"ngIf"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-flat-button","","color","warn",3,"mat-dialog-close"],["mat-dialog-content",""],[4,"ngFor","ngForOf"]],template:function(t,i){t&1&&(l(0,"h1",0),p(1,"Are you sure you want to delete this music?"),c(),y(2,er,5,1,"div",1),l(3,"mat-dialog-actions",2)(4,"button",3),p(5,"Cancel"),c(),l(6,"button",4),p(7,"Confirm"),c()()),t&2&&(d(2),m("ngIf",i.gameToMusic.derivedGameToMusics&&i.gameToMusic.derivedGameToMusics.length>0),d(4),m("mat-dialog-close",!0))},dependencies:[_e,Z,Y,X,ee,J,te],encapsulation:2})}return a})();function nr(a,n){if(a&1&&(l(0,"mat-option",10),p(1),c()),a&2){let e=n.$implicit;m("value",e),d(),W(" ",e.name," ")}}var ta=(()=>{class a{data;gameHttpService;adminGameHttpService;dialogRef;myControl=new we;games;gameMusic;constructor(e,t,i,r){this.data=e,this.gameHttpService=t,this.adminGameHttpService=i,this.dialogRef=r}ngOnInit(){this.gameMusic=this.data,this.games=this.myControl.valueChanges.pipe(wi(),Ce(e=>e?this.gameHttpService.search({query:e,nsfw:!0}).pipe(qe(t=>t.data)):Ue(null)))}submit(){this.adminGameHttpService.addDerivedGameToMusic(this.gameMusic.id,this.myControl.value).subscribe(e=>{this.dialogRef.close(e)})}displayGame(e){return e?e.name:""}static \u0275fac=function(t){return new(t||a)(C(fe),C(mn),C(G),C(vt))};static \u0275cmp=k({type:a,selectors:[["app-derived-music-dialog-dialog"]],standalone:!1,decls:16,vars:10,consts:[["auto","matAutocomplete"],["mat-dialog-title",""],["mat-dialog-content",""],[3,"ngSubmit"],["id","lobby-autocomplete",2,"width","100%"],["type","text","placeholder","Choose a game","aria-label","Number","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],[3,"value",4,"ngFor","ngForOf"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-flat-button","","color","primary",3,"click"],[3,"value"]],template:function(t,i){if(t&1){let r=T();l(0,"h1",1),p(1,"Add this music to another game"),c(),l(2,"div",2)(3,"form",3),v("ngSubmit",function(){return g(r),b(!i.myControl.value||i.submit())}),l(4,"mat-form-field",4),S(5,"input",5),l(6,"mat-autocomplete",6,0),y(8,nr,2,2,"mat-option",7),Ie(9,"async"),Ie(10,"slice"),c()()()(),l(11,"mat-dialog-actions")(12,"button",8),p(13,"Cancel"),c(),l(14,"button",9),v("click",function(){return g(r),b(i.submit())}),p(15,"Confirm"),c()()}if(t&2){let r=I(7);d(5),m("formControl",i.myControl)("matAutocomplete",r),d(),m("displayWith",i.displayGame),d(2),m("ngForOf",Mi(10,6,Ii(9,4,i.games),0,30))}},dependencies:[_e,Y,X,ee,J,te,wt,ln,sn,cn,Ct,_t,ge,K,be,pt,ut,Ei,Li],encapsulation:2})}return a})();var ia=(()=>{class a{data;gameToMusic;constructor(e){this.data=e}ngOnInit(){this.gameToMusic=this.data}static \u0275fac=function(t){return new(t||a)(C(fe))};static \u0275cmp=k({type:a,selectors:[["app-confirm-unlink-dialog"]],standalone:!1,decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-flat-button","","color","warn",3,"mat-dialog-close"]],template:function(t,i){t&1&&(l(0,"h1",0),p(1,"Are you sure you want to unlink these musics?"),c(),l(2,"div",1),p(3,"The derived music won't be deleted. You'll have to delete it manually"),c(),l(4,"mat-dialog-actions",2)(5,"button",3),p(6,"Cancel"),c(),l(7,"button",4),p(8,"Confirm"),c()()),t&2&&(d(7),m("mat-dialog-close",!0))},dependencies:[Y,X,ee,J,te],encapsulation:2})}return a})();var ar=a=>["/admin/games/",a];function rr(a,n){a&1&&(ae(0),l(1,"div",5)(2,"span",6),p(3,"Loading..."),c()(),re())}function or(a,n){if(a&1){let e=T();l(0,"i",7),v("click",function(){g(e);let i=_();return b(i.delete())}),c()}}function sr(a,n){if(a&1&&(l(0,"span"),p(1," as "),l(2,"span",8),p(3),c()()),a&2){let e=_();d(3),at("",e.derivedGameToMusic.title," - ",e.derivedGameToMusic.artist,"")}}var na=(()=>{class a{gameHttpService;dialog;gameMusic;derivedGameToMusic;remove=new x;loading=!1;constructor(e,t){this.gameHttpService=e,this.dialog=t}delete(){this.dialog.open(ia,{data:this.derivedGameToMusic}).afterClosed().subscribe(t=>{t&&(this.loading=!0,this.gameHttpService.unlink(this.gameMusic.id,this.derivedGameToMusic.id).pipe(N(()=>this.loading=!1)).subscribe(()=>{this.remove.emit()}))})}static \u0275fac=function(t){return new(t||a)(C(G),C(Pe))};static \u0275cmp=k({type:a,selectors:[["app-derived-music"]],inputs:{gameMusic:"gameMusic",derivedGameToMusic:"derivedGameToMusic"},outputs:{remove:"remove"},decls:7,vars:7,consts:[["deleteIcon",""],[1,"d-inline"],[4,"ngIf","ngIfElse"],["target","_blank",3,"routerLink"],[4,"ngIf"],["role","status",1,"spinner-border","text-primary","spinner-border-sm"],[1,"sr-only"],[1,"me-2","fa-solid","fa-times","text-danger",3,"click"],[1,"text-primary"]],template:function(t,i){if(t&1&&(l(0,"small",1),y(1,rr,4,0,"ng-container",2)(2,or,1,0,"ng-template",null,0,ye),l(4,"a",3),p(5),c(),y(6,sr,4,2,"span",4),c()),t&2){let r=I(3);d(),m("ngIf",i.loading)("ngIfElse",r),d(3),m("routerLink",he(5,ar,i.derivedGameToMusic.game.slug)),d(),W(" ",i.derivedGameToMusic.game.name," "),d(),m("ngIf",i.gameMusic.title!==i.derivedGameToMusic.title||i.gameMusic.artist!==i.derivedGameToMusic.artist)}},dependencies:[st,Z],encapsulation:2})}return a})();var aa=(()=>{class a{data;adminGameHttpService;dialogRef;myControl=new we;gameMusic;constructor(e,t,i){this.data=e,this.adminGameHttpService=t,this.dialogRef=i}ngOnInit(){this.gameMusic=this.data}submit(){this.adminGameHttpService.link(this.gameMusic.id,String(this.myControl.value)).subscribe(e=>{this.dialogRef.close(e)})}static \u0275fac=function(t){return new(t||a)(C(fe),C(G),C(vt))};static \u0275cmp=k({type:a,selectors:[["app-link-dialog"]],standalone:!1,decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"ngSubmit"],["id","lobby-autocomplete",2,"width","100%"],["type","text","placeholder","enter the derived music ID","aria-label","Number","matInput","",3,"formControl"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-flat-button","","color","primary",3,"click"]],template:function(t,i){t&1&&(l(0,"h1",0),p(1,"Link this music with another music"),c(),l(2,"div",1)(3,"form",2),v("ngSubmit",function(){return!i.myControl.value||i.submit()}),l(4,"mat-form-field",3),S(5,"input",4),c()()(),l(6,"mat-dialog-actions")(7,"button",5),p(8,"Cancel"),c(),l(9,"button",6),v("click",function(){return i.submit()}),p(10,"Confirm"),c()()),t&2&&(d(5),m("formControl",i.myControl))},dependencies:[Y,X,ee,J,te,wt,Ct,_t,ge,K,be,pt,ut],encapsulation:2})}return a})();var lr=a=>({"is-invalid":a}),cr=a=>["/admin/games/",a];function dr(a,n){a&1&&(ae(0),l(1,"div",15)(2,"span",16),p(3,"Loading..."),c()(),re())}function mr(a,n){if(a&1&&S(0,"audio",18),a&2){let e=_(2);m("src",e.src,Oe)}}function pr(a,n){a&1&&S(0,"span",28)}function hr(a,n){if(a&1){let e=T();l(0,"button",25),v("click",function(){g(e);let i=_(3);return b(i.listen())}),S(1,"i",26),y(2,pr,1,0,"span",27),c()}if(a&2){let e=_(3);d(2),m("ngIf",e.listenLoading)}}function _r(a,n){if(a&1){let e=T();l(0,"button",24),v("click",function(){g(e);let i=_(3);return b(i.addDerivedGame())}),l(1,"mat-icon"),p(2,"add"),c(),l(3,"span"),p(4,"Add to a game"),c()()}}function ur(a,n){if(a&1){let e=T();l(0,"button",24),v("click",function(){g(e);let i=_(3);return b(i.link())}),l(1,"mat-icon"),p(2,"link"),c(),l(3,"span"),p(4,"Link"),c()()}}function gr(a,n){if(a&1){let e=T();ae(0),y(1,hr,3,1,"button",19),l(2,"button",20),v("click",function(){g(e);let i=_(2);return b(i.delete())}),S(3,"i",21),c(),l(4,"button",22)(5,"mat-icon"),p(6,"more_vert"),c()(),l(7,"mat-menu",null,4),y(9,_r,5,0,"button",23)(10,ur,5,0,"button",23),l(11,"button",24),v("click",function(){g(e);let i=_(2);return b(i.copyId())}),l(12,"mat-icon"),p(13,"content_copy"),c(),l(14,"span"),p(15,"copy ID"),c()()(),re()}if(a&2){let e=I(8),t=_(2);d(),m("ngIf",!t.src),d(3),m("matMenuTriggerFor",e),d(5),m("ngIf",t.gameMusic.type===t.gameToMusicType.Original),d(),m("ngIf",t.gameMusic.type===t.gameToMusicType.Original)}}function br(a,n){if(a&1){let e=T();l(0,"button",29),v("click",function(){g(e);let i=_(2);return b(i.save())}),p(1,"save"),c(),l(2,"button",30),v("click",function(){g(e);let i=_(2);return b(i.cancel())}),p(3,"cancel"),c()}}function fr(a,n){if(a&1&&y(0,mr,1,1,"audio",17)(1,gr,16,4,"ng-container",13)(2,br,4,0,"ng-template",null,3,ye),a&2){let e=I(3),t=_();m("ngIf",t.src),d(),m("ngIf",!t.edit)("ngIfElse",e)}}function vr(a,n){if(a&1){let e=T();l(0,"app-derived-music",33),v("remove",function(){let i=g(e).index,r=_(2);return b(r.handleGameMusicDeleted(i))}),c()}if(a&2){let e=n.$implicit,t=_(2);m("gameMusic",t.gameMusic)("derivedGameToMusic",e)}}function yr(a,n){if(a&1&&(l(0,"div",31)(1,"small"),p(2,"Also appears in"),c(),y(3,vr,1,2,"app-derived-music",32),c()),a&2){let e=_();d(3),m("ngForOf",e.gameMusic.derivedGameToMusics)}}function wr(a,n){if(a&1&&(l(0,"span"),p(1," as "),l(2,"span",36),p(3),c()()),a&2){let e=_(2);d(3),at("",e.gameMusic.originalGameToMusic.title," - ",e.gameMusic.originalGameToMusic.artist,"")}}function Cr(a,n){if(a&1&&(l(0,"div",31)(1,"small"),p(2,"from "),c(),l(3,"a",34),p(4),c(),y(5,wr,4,2,"span",35),c()),a&2){let e=_();d(3),m("routerLink",he(3,cr,e.gameMusic.originalGameToMusic.game.slug)),d(),W("",e.gameMusic.originalGameToMusic.game.name," "),d(),m("ngIf",e.gameMusic.title!==e.gameMusic.originalGameToMusic.title||e.gameMusic.artist!==e.gameMusic.originalGameToMusic.artist)}}var Lt=(()=>{class a{gameHttpService;dom;dialog;gameMusic;remove=new x;edit=!1;formGroup;loading=!1;duration;formErrorMessage;src;listenLoading=!1;gameToMusicType=Dt;constructor(e,t,i){this.gameHttpService=e,this.dom=t,this.dialog=i}ngOnInit(){this.duration=un.fromSeconds(this.gameMusic.music.duration).toJSDate(),this.formGroup=new qi({title:new we(this.gameMusic.title??this.gameMusic.music.title,mt.required.bind(this)),artist:new we(this.gameMusic.artist??this.gameMusic.music.artist)})}get title(){return this.formGroup.get("title")}get artist(){return this.formGroup.get("artist")}cancel(){this.edit=!1,this.formGroup.reset()}save(){this.loading=!0,this.gameHttpService.saveMusic(this.gameMusic.id,this.formGroup.value).pipe(N(()=>this.loading=!1)).subscribe({next:e=>{this.gameMusic.title=e.title,this.gameMusic.artist=e.artist,this.edit=!1},error:e=>{Array.isArray(e.message)?e.message.map(t=>{let i=this.formGroup.get(t.property);i?.markAsTouched(),i?.setErrors({serverError:t.errors})}):this.formErrorMessage=e.message}})}delete(){this.dialog.open(ea,{data:this.gameMusic}).afterClosed().subscribe(t=>{t&&(this.loading=!0,this.gameHttpService.deleteGameMusic(this.gameMusic).pipe(N(()=>this.loading=!1)).subscribe(()=>{this.remove.emit()}))})}listen(){this.listenLoading=!0,this.gameHttpService.listen(this.gameMusic.id).subscribe(e=>{let t=new FileReader;t.onload=i=>{this.listenLoading=!1;let r=i.target.result;typeof r=="string"&&(this.src=this.dom.bypassSecurityTrustUrl(r))},t.readAsDataURL(e)})}addDerivedGame(){this.dialog.open(ta,{data:this.gameMusic}).afterClosed().subscribe(t=>{t&&(this.gameMusic=t)})}handleGameMusicDeleted(e){this.gameMusic=pi(mi({},this.gameMusic),{derivedGameToMusics:this.gameMusic.derivedGameToMusics.filter((t,i)=>i!==e)})}link(){this.dialog.open(aa,{data:this.gameMusic}).afterClosed().subscribe(t=>{t&&(this.gameMusic=t)})}copyId(){navigator.clipboard.writeText(String(this.gameMusic.id))}static \u0275fac=function(t){return new(t||a)(C(G),C(Ni),C(Pe))};static \u0275cmp=k({type:a,selectors:[["app-music-row"]],inputs:{gameMusic:"gameMusic"},outputs:{remove:"remove"},decls:23,vars:17,consts:[["titleInput",""],["artistInput",""],["musicRowButtons",""],["editMusicButtons",""],["menu","matMenu"],[1,"row","tw-w-[100%]"],[1,"col-1"],[3,"formGroup"],[1,"col-3"],["formControlName","title",3,"focus","blur","keydown.enter","ngClass"],["formControlName","artist",3,"focus","blur","keydown.enter"],[1,"col"],[1,"row","justify-content-end"],[4,"ngIf","ngIfElse"],["class","col-12",4,"ngIf"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],["controls","",3,"src",4,"ngIf"],["controls","",3,"src"],["class","btn btn-sm btn-primary col",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-danger","col",3,"click"],[1,"fa-solid","fa-trash"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"btn","btn-sm","btn-primary","col",3,"click"],[1,"fa","fa-play"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"col-12"],["class","row",3,"gameMusic","derivedGameToMusic","remove",4,"ngFor","ngForOf"],[1,"row",3,"remove","gameMusic","derivedGameToMusic"],["target","_blank",3,"routerLink"],[4,"ngIf"],[1,"text-primary"]],template:function(t,i){if(t&1){let r=T();l(0,"div",5)(1,"div",6),p(2),c(),ae(3,7),l(4,"div",8)(5,"input",9,0),v("focus",function(){g(r);let s=I(6);return b(s.select())})("blur",function(){return g(r),b(i.save())})("keydown.enter",function(){g(r);let s=I(6);return b(s.blur())}),c()(),l(7,"div",8)(8,"input",10,1),v("focus",function(){g(r);let s=I(9);return b(s.select())})("blur",function(){return g(r),b(i.save())})("keydown.enter",function(){g(r);let s=I(9);return b(s.blur())}),c()(),re(),l(10,"div",6),p(11),Ie(12,"date"),c(),l(13,"div",6),p(14),Ie(15,"number"),c(),l(16,"div",11)(17,"div",12),y(18,dr,4,0,"ng-container",13)(19,fr,4,3,"ng-template",null,2,ye),c()(),y(21,yr,4,1,"div",14)(22,Cr,6,5,"div",14),c()}if(t&2){let r=I(20);d(2),j(i.gameMusic.track),d(),m("formGroup",i.formGroup),d(2),m("ngClass",he(15,lr,i.title.invalid&&(i.title.dirty||i.title.touched))),d(6),j(Gt(12,9,i.duration,"mm:ss")),d(3),W(" ",i.gameMusic.guessAccuracy!==null?Gt(15,12,i.gameMusic.guessAccuracy*100,"1.0-2")+"%":"-"," "),d(4),m("ngIf",i.loading)("ngIfElse",r),d(3),m("ngIf",i.gameMusic.derivedGameToMusics&&i.gameMusic.derivedGameToMusics.length>0),d(),m("ngIf",i.gameMusic.originalGameToMusic)}},dependencies:[na,_e,pn,bn,an,gn,fn,Z,Pi,Ri,Ki,ge,K,be,gt,bt,rt,st],encapsulation:2})}return a})();var Tr=["alternativeNameRow",""];function kr(a,n){a&1&&S(0,"span",3)}var ra=(()=>{class a{adminGameHttpService;alternativeName;disabled;loading=!1;constructor(e){this.adminGameHttpService=e}toggle(){this.loading=!0,this.adminGameHttpService.toggleAlternativeName(this.alternativeName).pipe(N(()=>this.loading=!1)).subscribe(()=>{this.alternativeName.enabled=!this.alternativeName.enabled})}static \u0275fac=function(t){return new(t||a)(C(G))};static \u0275cmp=k({type:a,selectors:[["","alternativeNameRow",""]],inputs:{alternativeName:"alternativeName",disabled:"disabled"},standalone:!1,attrs:Tr,decls:5,vars:4,consts:[["scope","row"],["color","primary",3,"ngModelChange","click","ngModel","disabled"],["class","spinner-border text-primary spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","text-primary","spinner-border-sm"]],template:function(t,i){t&1&&(l(0,"th",0),p(1),c(),l(2,"td")(3,"mat-slide-toggle",1),Se("ngModelChange",function(o){return ke(i.alternativeName.enabled,o)||(i.alternativeName.enabled=o),o}),v("click",function(){return i.loading||i.disabled||i.toggle()}),c(),y(4,kr,1,0,"span",2),c()),t&2&&(d(),j(i.alternativeName.name),d(2),Te("ngModel",i.alternativeName.enabled),m("disabled",i.loading||i.disabled),d(),m("ngIf",i.loading))},dependencies:[Z,yt,K,ht],encapsulation:2})}return a})();var Ir=["gameAlbumDropList"],oa=a=>({"is-invalid":a});function Mr(a,n){a&1&&(ae(0),l(1,"div",6)(2,"div",7)(3,"span",8),p(4,"Loading..."),c()()(),re())}function Er(a,n){a&1&&S(0,"span",33)}function Pr(a,n){if(a&1&&(l(0,"span",34),p(1),c()),a&2){let e=_(2);d(),j(e.toggleErrorMessage)}}function Rr(a,n){if(a&1&&(l(0,"div",35),p(1),c()),a&2){let e=_(2);d(),W(" ",e.musics.errors.apiError," ")}}function Lr(a,n){a&1&&S(0,"span",27)}function Ar(a,n){if(a&1){let e=T();l(0,"button",24),v("click",function(){g(e);let i=_(2);return b(i.generateAlbums())}),p(1," Generate albums from files metadata "),c()}if(a&2){let e=_(2);m("disabled",e.generateAlbumLoading)}}function Fr(a,n){a&1&&S(0,"span",27)}function Nr(a,n){if(a&1&&S(0,"img",53),a&2){let e=_().$implicit,t=_(3);m("src",t.cdnUrl+e.cover.path,Oe)}}function Or(a,n){if(a&1){let e=T();l(0,"app-music-row",54),v("remove",function(){let i=g(e).$index,r=_().$implicit,o=_().$implicit,s=_(3);return b(s.handleGameMusicDeleted(i,s.filterByDisk(o,r.number)))}),c()}if(a&2){let e=n.$implicit;m("gameMusic",e)}}function Br(a,n){if(a&1){let e=T();l(0,"h5"),p(1),c(),l(2,"div",50,1),v("cdkDropListDropped",function(i){let r=g(e).$implicit,o=_().$implicit,s=_(3);return b(s.drop(i,o,r.number))}),de(4,Or,1,1,"app-music-row",52,ce),c()}if(a&2){let e=n.$implicit,t=_().$implicit,i=_(3);d(),W("Disk ",e.number,""),d(),m("cdkDropListData",i.filterByDisk(t,e.number))("cdkDropListDisabled",i.reorderLoading),d(2),me(i.filterByDisk(t,e.number))}}function Vr(a,n){a&1&&(l(0,"div",51),p(1,"Drop files with no disks here"),c())}function Gr(a,n){if(a&1){let e=T();l(0,"app-music-row",54),v("remove",function(){let i=g(e).$index,r=_().$implicit,o=_(3);return b(o.handleGameMusicDeleted(i,r.musicsWithNoDisk))}),c()}if(a&2){let e=n.$implicit;m("gameMusic",e)}}function Hr(a,n){if(a&1){let e=T();l(0,"div",36)(1,"input",39,2),Se("ngModelChange",function(i){let r=g(e).$implicit;return ke(r.name,i)||(r.name=i),b(i)}),v("keydown.enter",function(){g(e);let i=I(2);return b(i.blur())})("blur",function(){let i=g(e).$implicit,r=_(3);return b(r.updateAlbumName(i))})("focus",function(){g(e);let i=I(2);return b(i.select())}),c(),l(3,"input",40,3),Se("ngModelChange",function(i){let r=g(e).$implicit;return ke(r.date,i)||(r.date=i),b(i)}),v("keydown.enter",function(){g(e);let i=I(4);return b(i.blur())})("blur",function(){let i=g(e).$implicit,r=_(3);return b(r.updateAlbumName(i))})("focus",function(){g(e);let i=I(4);return b(i.select())}),c(),l(5,"div",41)(6,"div",42)(7,"div",43)(8,"button",44),v("click",function(){g(e);let i=I(11);return b(i.click())}),p(9," Edit image "),c(),l(10,"input",45,4),v("change",function(i){let r=g(e).$implicit,o=_(3);return b(o.preUploadImage(i,r))}),c(),y(12,Nr,1,1,"img",46),c(),l(13,"button",47),v("click",function(){let i=g(e).$implicit,r=_(3);return b(r.delete(i))}),p(14,"Delete album"),c()(),l(15,"div",48),de(16,Br,6,3,null,null,ce),l(18,"button",49),v("click",function(){let i=g(e).$implicit,r=_(3);return b(r.addDiskToAlbum(i))}),p(19,"add Disk"),c(),l(20,"div",50,1),v("cdkDropListDropped",function(i){let r=g(e).$implicit,o=_(3);return b(o.drop(i,r))}),y(22,Vr,2,0,"div",51),de(23,Gr,1,1,"app-music-row",52,ce),c()()()()}if(a&2){let e=n.$implicit,t=_(3);d(),Te("ngModel",e.name),d(2),Te("ngModel",e.date),d(7),m("ngClass",he(7,oa,t.musics.invalid&&(t.musics.dirty||t.musics.touched))),d(2),m("ngIf",e==null||e.cover==null?null:e.cover.path),d(4),me(e.disks),d(4),m("cdkDropListData",e.musicsWithNoDisk)("cdkDropListDisabled",t.reorderLoading),d(2),xe(e.musicsWithNoDisk.length===0?22:-1),d(),me(e.musicsWithNoDisk)}}function zr(a,n){if(a&1){let e=T();l(0,"app-music-row",54),v("remove",function(){let i=g(e).index,r=_(3);return b(r.handleGameMusicDeleted(i,r.game.musics))}),c()}if(a&2){let e=n.$implicit;m("gameMusic",e)}}function jr(a,n){if(a&1){let e=T();de(0,Hr,25,9,"div",36,ce),l(2,"div",36)(3,"h1"),p(4,"Other musics"),c(),l(5,"div",37,1),v("cdkDropListDropped",function(i){g(e);let r=_(2);return b(r.drop(i))}),y(7,zr,1,1,"app-music-row",38),c()()}if(a&2){let e=_(2);me(e.game.albums),d(5),m("cdkDropListData",e.game.musics)("cdkDropListDisabled",e.reorderLoading),d(2),m("ngForOf",e.game.musics)}}function Wr(a,n){if(a&1&&(ae(0),S(1,"tr",55),re()),a&2){let e=n.$implicit,t=_(2);d(),m("alternativeName",e)("disabled",!t.game.enabled)}}function $r(a,n){if(a&1){let e=T();l(0,"h1"),p(1),l(2,"a",9),p(3,"IDGB"),c()(),l(4,"div",10)(5,"div",11),p(6," enabled "),l(7,"mat-slide-toggle",12),Se("ngModelChange",function(i){g(e);let r=_();return ke(r.game.enabled,i)||(r.game.enabled=i),b(i)}),v("click",function(){g(e);let i=_();return b(i.loading||i.toggle())}),c(),y(8,Er,1,0,"span",13)(9,Pr,2,1,"span",14),c(),l(10,"mat-tab-group",15)(11,"mat-tab",16)(12,"h2"),p(13,"Musics"),c(),l(14,"div",17)(15,"label",18),p(16,"add musics"),c(),l(17,"input",19),v("change",function(i){g(e);let r=_();return b(r.preUploadMusic(i))}),c(),S(18,"mat-progress-bar",20),y(19,Rr,2,1,"div",21),l(20,"button",22),v("click",function(){g(e);let i=_();return b(i.uploadLoading||i.musicFiles.length===0||i.uploadMusic())}),p(21," Upload "),y(22,Lr,1,0,"span",23),c()(),l(23,"div")(24,"button",24),v("click",function(){g(e);let i=_();return b(i.createAlbum())}),p(25," Add new album "),c(),y(26,Ar,2,1,"button",25),l(27,"button",26),v("click",function(){g(e);let i=_();return b(i.purgeMusics())}),p(28," Purge musics "),c()(),y(29,Fr,1,0,"span",27)(30,jr,8,3),c(),l(31,"mat-tab",28)(32,"table",29)(33,"thead",30)(34,"tr")(35,"th",31),p(36,"Alternative names"),c(),l(37,"th",31),p(38,"Enabled"),c()()(),l(39,"tbody"),y(40,Wr,2,2,"ng-container",32),c()()()()()}if(a&2){let e=_();d(),W("",e.game.name," "),d(),Si("href",e.game.url,Oe),d(5),Te("ngModel",e.game.enabled),m("disabled",e.toggleLoading),d(),m("ngIf",e.toggleLoading),d(),m("ngIf",e.toggleErrorMessage),d(5),m("formGroup",e.musicUploadForm),d(3),m("ngClass",he(17,oa,e.musics.invalid&&(e.musics.dirty||e.musics.touched))),d(),m("value",e.fileUploadProgress),d(),m("ngIf",e.musics.errors),d(),m("disabled",e.uploadLoading||e.musicFiles.length===0||e.generateAlbumLoading),d(2),m("ngIf",e.uploadLoading),d(2),m("disabled",e.generateAlbumLoading),d(2),m("ngIf",e.game.musics.length>0),d(),m("disabled",e.purgeLoading),d(2),xe(e.generateAlbumLoading?29:30),d(11),m("ngForOf",e.game.alternativeNames)}}var sa=(()=>{class a{adminGameHttpService;adminAlbumHttpService;route;formBuilder;changeDetectorRef;dialog;slug;game;loading=!1;uploadLoading=!1;generateAlbumLoading=!1;purgeLoading=!1;reorderLoading=!1;musicUploadForm;musicFiles=[];toggleLoading=!1;toggleErrorMessage;fileUploadProgress=0;cdnUrl=ot.cdnUrl;gameAlbumsDropLists;get musics(){return this.musicUploadForm.get("musics")}constructor(e,t,i,r,o,s){this.adminGameHttpService=e,this.adminAlbumHttpService=t,this.route=i,this.formBuilder=r,this.changeDetectorRef=o,this.dialog=s}ngOnInit(){this.init(),this.musicUploadForm=this.formBuilder.group({musics:[null,[mt.required.bind(this)]]})}init(){this.loading=!0,this.adminGameHttpService.get(this.route.snapshot.paramMap.get("slug")).subscribe(e=>{this.game=e,this.loading=!1,this.initGameAlbums()})}initGameAlbums(){for(let e of this.game.albums)e.disks=e.musics.reduce((t,i)=>{let r=i.disk??i.music.disk;return r!==null&&!t.some(o=>o.number===r)&&t.push({number:r,data:e.musics.filter(o=>o.disk===r)}),t},[]),e.musicsWithNoDisk=e.musics.filter(t=>t.disk===null);this.connectCdkDropLists()}connectCdkDropLists(){this.changeDetectorRef.detectChanges();for(let e of this.gameAlbumsDropLists)e.connectedTo=this.gameAlbumsDropLists.toArray()}uploadMusic(){this.uploadLoading=!0,this.fileUploadProgress=0,this.adminGameHttpService.uploadMusics(this.route.snapshot.paramMap.get("slug"),this.musicFiles).pipe(N(()=>this.uploadLoading=!1)).subscribe({next:e=>{e.type===zt.Response&&(this.game=e.body,this.initGameAlbums()),e.type===zt.UploadProgress&&(this.fileUploadProgress=e.loaded/e.total*100)},error:e=>{this.musics.setErrors({apiError:e.error.message})}})}preUploadMusic(e){this.musicFiles=e?.target?.files?e.target.files:void 0}preUploadImage(e,t){let r=e.target.files[0];this.adminAlbumHttpService.editCover(t.id,r).subscribe(o=>{t.cover=o})}handleGameMusicDeleted(e,t){t.splice(e,1)}toggle(){this.toggleErrorMessage=void 0,this.toggleLoading=!0,this.adminGameHttpService.toggleGame(this.game).pipe(N(()=>this.toggleLoading=!1)).subscribe({next:()=>{this.init()},error:e=>{this.toggleErrorMessage=e}})}drop(e,t,i){this.reorderLoading=!0;let r=[];if(e.previousContainer===e.container)Mt(e.container.data,e.previousIndex,e.currentIndex);else{Nn(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex);for(let o of e.previousContainer.data)o.track=e.previousContainer.data.indexOf(o)+1,r.push(this.adminGameHttpService.saveMusic(o.id,o))}for(let o of e.container.data)o.album=t?{id:t.id}:null,o.disk=i??null,o.track=e.container.data.indexOf(o)+1,r.push(this.adminGameHttpService.saveMusic(o.id,o));ui(r).pipe(N(()=>this.reorderLoading=!1)).subscribe({})}updateAlbumName(e){this.adminAlbumHttpService.edit(e.id,e).subscribe({})}createAlbum(){this.adminGameHttpService.createAlbum(this.game.slug).subscribe({next:e=>{this.game=e,this.initGameAlbums()}})}purgeMusics(){this.dialog.open(Qn).afterClosed().subscribe(t=>{t&&(this.purgeLoading=!0,this.adminGameHttpService.purgeGame(this.game.slug).pipe(N(()=>this.purgeLoading=!1)).subscribe({next:()=>{this.init()}}))})}delete(e){this.adminAlbumHttpService.delete(e.id).subscribe({next:t=>{this.game=t,this.initGameAlbums()}})}generateAlbums(){this.generateAlbumLoading=!0,this.adminGameHttpService.generateAlbums(this.game.slug).pipe(N(()=>this.generateAlbumLoading=!1)).subscribe({next:e=>{this.game=e,this.initGameAlbums()}})}filterByDisk(e,t){return e.disks.find(i=>i.number===t).data}addDiskToAlbum(e){e.disks.length===0?e.disks=[{number:1,data:[]}]:e.disks.push({number:e.disks[e.disks.length-1].number+1,data:[]}),this.connectCdkDropLists()}static \u0275fac=function(t){return new(t||a)(C(G),C(Un),C(Oi),C(Zi),C(oe),C(Pe))};static \u0275cmp=k({type:a,selectors:[["app-game-show"]],viewQuery:function(t,i){if(t&1&&L(Ir,5),t&2){let r;M(r=E())&&(i.gameAlbumsDropLists=r)}},standalone:!1,decls:3,vars:2,consts:[["gameShow",""],["gameAlbumDropList","cdkDropList"],["gameAlbumNameInput",""],["gameAlbumDateInput",""],["imageUpload",""],[4,"ngIf","ngIfElse"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","orange"],[1,"sr-only"],["mat-stroked-button","","target","_blank",3,"href"],[1,"row"],[1,"col-md-12"],["color","primary",3,"ngModelChange","click","ngModel","disabled"],["class","spinner-border text-primary spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["class","text-danger",4,"ngIf"],["mat-stretch-tabs","false","mat-align-tabs","start"],["label","Musics"],[1,"form-group",3,"formGroup"],["for","exampleFormControlFile1"],["type","file","id","exampleFormControlFile1","formControlName","musics","multiple","","accept","audio/mpeg",1,"form-control-file",3,"change","ngClass"],["mode","determinate",3,"value"],["class","invalid-feedback",4,"ngIf"],[1,"btn","btn-outline-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"btn","btn-small","btn-primary",3,"click","disabled"],["class","btn btn-small btn-primary",3,"disabled","click",4,"ngIf"],[1,"btn","btn-small","btn-danger",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["label","Alternative names"],[1,"table","table-dark","table-striped"],[1,"thead-dark"],["scope","col"],[4,"ngFor","ngForOf"],["role","status","aria-hidden","true",1,"spinner-border","text-primary","spinner-border-sm"],[1,"text-danger"],[1,"invalid-feedback"],[1,"example-container"],["cdkDropList","",1,"example-list","tw-w-4/5",3,"cdkDropListDropped","cdkDropListData","cdkDropListDisabled"],["cdkDrag","","class","example-box",3,"gameMusic","remove",4,"ngFor","ngForOf"],[1,"name-input",3,"ngModelChange","keydown.enter","blur","focus","ngModel"],[3,"ngModelChange","keydown.enter","blur","focus","ngModel"],[1,"tw-flex","tw-w-[100%]"],[1,"tw-w-1/5","pe-4"],[1,"tw-w-full","tw-aspect-square","tw-bg-[#141F2B]","tw-relative"],[1,"btn","btn-small","btn-primary","tw-absolute","tw-bottom-0","tw-right-0",3,"click"],["type","file","accept","image/png, image/jpeg",1,"form-control-file","tw-hidden",3,"change","ngClass"],["width","100%","height","100%","alt","album cover",3,"src",4,"ngIf"],[1,"btn","btn-danger",3,"click"],[1,"tw-w-4/5"],[1,"btn","btn-sm","btn-primary",3,"click"],["cdkDropList","",1,"example-list",3,"cdkDropListDropped","cdkDropListData","cdkDropListDisabled"],[1,"tw-text-center"],["cdkDrag","",1,"example-box",3,"gameMusic"],["width","100%","height","100%","alt","album cover",3,"src"],["cdkDrag","",1,"example-box",3,"remove","gameMusic"],["alternativeNameRow","",3,"alternativeName","disabled"]],template:function(t,i){if(t&1&&y(0,Mr,5,0,"ng-container",5)(1,$r,41,19,"ng-template",null,0,ye),t&2){let r=I(2);m("ngIf",i.loading)("ngIfElse",r)}},dependencies:[rt,_e,Z,yt,rn,ge,K,be,ht,gt,bt,Qi,$n,Wn,Et,$e,Lt,ra],encapsulation:2})}return a})();var Qr=[{path:":slug",component:sa}],bl=(()=>{class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=et({type:a});static \u0275inj=Ze({imports:[Ai,Bi.forChild(Qr),_n,Ui,tn,dn,vn,hn,Et,$e,Lt]})}return a})();export{bl as GameModule};
