"use strict";(self.webpackChunkvgmq=self.webpackChunkvgmq||[]).push([[634],{492:(L,x,l)=>{l.d(x,{I:()=>E});var t=l(2843),o=l(2340),_=l(262),w=l(5e3),C=l(520);let E=(()=>{class g{constructor(m){this.http=m,this.apiEndpoint=o.N.apiEndpoint}search(m,v,D){return this.http.get(`${this.apiEndpoint}/admin/games`,{params:{query:m.query,...m.showDisabled&&{showDisabled:"true"},...m.onlyShowWithoutMusics&&{onlyShowWithoutMusics:"true"},...v&&{skip:v},...D&&{limit:D}}})}importByUrl(m){return this.http.get(`${this.apiEndpoint}/admin/games/import`,{params:{url:m}}).pipe((0,_.K)(v=>(0,t._)(v.error)))}get(m){return this.http.get(`${this.apiEndpoint}/admin/games/${m}`)}uploadMusics(m,v){const D=new FormData;for(const P of v)D.append("files",P);return this.http.post(`${this.apiEndpoint}/admin/games/${m}/musics`,D,{reportProgress:!0,observe:"events"})}saveMusic(m,v){return this.http.patch(`${this.apiEndpoint}/musics/${m.id}`,v)}deleteGameMusic(m){return this.http.delete(`${this.apiEndpoint}/admin/game-to-music/${m.id}`)}toggleGame(m){return this.http.patch(`${this.apiEndpoint}/admin/games/${m.slug}/toggle`,null).pipe((0,_.K)(v=>(0,t._)(v.error)))}toggleAlternativeName(m){return this.http.patch(`${this.apiEndpoint}/alternative-names/${m.id}/toggle`,null).pipe((0,_.K)(v=>(0,t._)(v.error)))}listen(m){return this.http.get(`${this.apiEndpoint}/admin/game-to-music/${m}/listen`,{responseType:"blob"})}addDerivedGameToMusic(m,v){return this.http.post(`${this.apiEndpoint}/admin/game-to-music/${m}/add-derived`,{gameId:v.id}).pipe((0,_.K)(D=>(0,t._)(D.error)))}}return g.\u0275fac=function(m){return new(m||g)(w.LFG(C.eN))},g.\u0275prov=w.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},9743:(L,x,l)=>{l.d(x,{q:()=>w});var t=l(2340),o=l(5e3),_=l(520);let w=(()=>{class C{constructor(g){this.http=g,this.apiEndpoint=t.N.apiEndpoint}search(g,U,m){return this.http.get(`${this.apiEndpoint}/games`,{params:{query:g.query,...g.myGames&&{filterByUser:"true"},...U&&{skip:U},...m&&{limit:m}}})}get(g){return this.http.get(`${this.apiEndpoint}/games/${g}`)}addToList(g){return this.http.get(`${this.apiEndpoint}/games/${g}/add`)}removeFromList(g){return this.http.get(`${this.apiEndpoint}/games/${g}/remove`)}getNames(g){return this.http.get(`${this.apiEndpoint}/games/names`,{params:{query:g}})}}return C.\u0275fac=function(g){return new(g||C)(o.LFG(_.eN))},C.\u0275prov=o.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},3818:(L,x,l)=>{l.d(x,{X:()=>p});var t=l(5e3),o=l(8372),_=l(3075),w=l(8746),C=l(8966),E=l(492),g=l(9808);function U(r,S){if(1&r&&(t.ynx(0),t._uU(1),t.BQk()),2&r){const s=t.oxw(2);t.xp6(1),t.hij(" ",s.form.errors.serverError," ")}}function m(r,S){if(1&r&&(t.TgZ(0,"div",9),t.YNc(1,U,2,1,"ng-container",4),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.form.errors.serverError)}}function v(r,S){if(1&r&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&r){const s=S.$implicit;t.xp6(1),t.Oqu(s)}}function D(r,S){if(1&r&&(t.TgZ(0,"div")(1,"p",10),t._uU(2),t.qZA(),t.TgZ(3,"ul"),t.YNc(4,v,2,1,"li",11),t.qZA()()),2&r){const s=t.oxw();t.xp6(2),t.hij("Successfully imported ",s.importedGames.length," games!"),t.xp6(2),t.Q6J("ngForOf",s.importedGames)}}function P(r,S){1&r&&t._UZ(0,"span",12)}const N=function(r){return{"is-invalid":r}},W=function(r){return{disabled:r}};let B=(()=>{class r{constructor(s,u){this.dialogRef=s,this.gameHttpService=u,this.loading=!1,this.form=new _.NI(null,_.kI.required.bind(this)),this.importedGames=[]}ngOnInit(){}submit(){this.loading=!0,this.importedGames=[],this.gameHttpService.importByUrl(this.form.value).pipe((0,w.x)(()=>this.loading=!1)).subscribe({next:s=>{this.importedGames=s,this.form.reset()},error:s=>{Array.isArray(s.message)?this.form.setErrors({serverError:s.message[0].errors}):this.errorMessage=s.message}})}}return r.\u0275fac=function(s){return new(s||r)(t.Y36(C.so),t.Y36(E.I))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-import-game-dialog"]],decls:16,vars:11,consts:[["href","https://www.igdb.com/search","target","_blank"],[1,"form-group"],["required","","placeholder","IGDB url",1,"form-control",3,"formControl","ngClass"],["class","invalid-feedback",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions","",1,"row","justify-content-end"],[1,"col"],[1,"btn","btn-outline-primary",3,"disabled","ngClass","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"invalid-feedback"],[1,"text-success"],[4,"ngFor","ngForOf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(s,u){1&s&&(t.TgZ(0,"h2"),t._uU(1,"Import a game"),t.qZA(),t.TgZ(2,"p"),t._uU(3," import a game from "),t.TgZ(4,"a",0),t._uU(5,"igdb.com"),t.qZA(),t._uU(6," by searching a game and copying its url below\n"),t.qZA(),t.TgZ(7,"div",1),t._UZ(8,"input",2),t.YNc(9,m,2,1,"div",3),t.qZA(),t.YNc(10,D,5,2,"div",4),t.TgZ(11,"div",5)(12,"div",6)(13,"button",7),t.NdJ("click",function(){return u.form.invalid||u.loading||u.submit()}),t._uU(14," Import"),t.YNc(15,P,1,0,"span",8),t.qZA()()()),2&s&&(t.xp6(8),t.Q6J("formControl",u.form)("ngClass",t.VKq(7,N,u.form.invalid&&(u.form.dirty||u.form.touched))),t.xp6(1),t.Q6J("ngIf",u.form.errors),t.xp6(1),t.Q6J("ngIf",u.importedGames.length>0),t.xp6(3),t.Q6J("disabled",u.form.invalid||u.loading)("ngClass",t.VKq(9,W,u.form.invalid||u.loading)),t.xp6(2),t.Q6J("ngIf",u.loading))},directives:[_.Fj,_.Q7,_.JJ,_.oH,g.mk,g.O5,g.sg,C.H8],encapsulation:2}),r})();var Y=l(7961),A=l(1083);function G(r,S){if(1&r&&(t.TgZ(0,"h1"),t._uU(1),t.qZA()),2&r){const s=t.oxw();t.xp6(1),t.hij("",s.gamesCount," games")}}function Z(r,S){if(1&r&&(t.TgZ(0,"form",8)(1,"div",9)(2,"div",10)(3,"div",11),t._UZ(4,"input",12),t.qZA()(),t.TgZ(5,"div",1)(6,"mat-checkbox",13),t._uU(7,"Only Show Without Music"),t.qZA()(),t.TgZ(8,"div",1)(9,"mat-checkbox",14),t._uU(10,"Disabled "),t.qZA()()()()),2&r){const s=t.oxw();t.Q6J("formGroup",s.form)}}function R(r,S){1&r&&(t.ynx(0),t.TgZ(1,"div",15)(2,"div",16)(3,"span",17),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function d(r,S){1&r&&t._UZ(0,"app-game-item",21),2&r&&t.Q6J("game",S.$implicit)}function M(r,S){1&r&&(t.TgZ(0,"div",15)(1,"div",16)(2,"span",17),t._uU(3,"Loading..."),t.qZA()()())}function c(r,S){if(1&r){const s=t.EpF();t.TgZ(0,"div",18),t.NdJ("scrolled",function(){return t.CHM(s),t.oxw().onScrollDown()}),t.YNc(1,d,1,1,"app-game-item",19),t.YNc(2,M,4,0,"div",20),t.qZA()}if(2&r){const s=t.oxw();t.xp6(1),t.Q6J("ngForOf",s.games),t.xp6(1),t.Q6J("ngIf",s.scrollLoading)}}let p=(()=>{class r{constructor(s,u,O,J){this.adminGameHttpService=s,this.dialog=u,this.router=O,this.activatedRoute=J,this.name="xd",this.games=[],this.query="",this.showDisabled=!1,this.onlyShowWithoutMusics=!1,this.loading=!1,this.scrollLoading=!1}ngOnInit(){this.activatedRoute.queryParamMap.subscribe(s=>{var u;this.form=new _.cw({query:new _.NI(null!==(u=s.get("query"))&&void 0!==u?u:"",_.kI.required.bind(this)),showDisabled:new _.NI("true"===s.get("showDisabled")),onlyShowWithoutMusics:new _.NI("true"===s.get("onlyShowWithoutMusics"))}),this.search()}).unsubscribe(),this.form.valueChanges.pipe((0,o.b)(250)).subscribe(()=>{this.search(),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:this.form.value,replaceUrl:!0})})}search(){this.loading=!0,this.adminGameHttpService.search(this.form.value,0,24).pipe((0,w.x)(()=>this.loading=!1)).subscribe(s=>{this.gamesCount=s.count,this.games=s.data})}onScrollDown(){this.scrollLoading||(this.scrollLoading=!0,this.adminGameHttpService.search(this.form.value,this.games.length,24).pipe((0,w.x)(()=>this.scrollLoading=!1)).subscribe(s=>{this.games=[...this.games,...s.data]}))}openImportDialog(){this.dialog.open(B).afterClosed().subscribe(()=>{this.search()})}}return r.\u0275fac=function(s){return new(s||r)(t.Y36(E.I),t.Y36(C.uw),t.Y36(A.F0),t.Y36(A.gz))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-game-search"]],features:[t._Bn([{provide:Y.X,useExisting:(0,t.Gpc)(()=>r)}])],decls:10,vars:4,consts:[[1,"row","justify-content-between"],[1,"col"],[4,"ngIf"],[1,"col","text-end"],[1,"btn","btn-outline-primary",3,"click"],[3,"formGroup",4,"ngIf"],[4,"ngIf","ngIfElse"],["cardColumns",""],[3,"formGroup"],[1,"row","justify-content-between","align-items-center"],[1,"col-md-3"],[1,"form-group"],["type","text","id","exampleFormControlInput1","placeholder","game...","formControlName","query",1,"form-control"],["color","primary","formControlName","onlyShowWithoutMusics"],["color","primary","formControlName","showDisabled"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],["infinite-scroll","",1,"mt-4","row",3,"scrolled"],["class","col-6 col-md-2",3,"game",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"col-6","col-md-2",3,"game"]],template:function(s,u){if(1&s&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,G,2,1,"h1",2),t.qZA(),t.TgZ(3,"div",3)(4,"button",4),t.NdJ("click",function(){return u.openImportDialog()}),t._uU(5,"Import game from IGDB"),t.qZA()()(),t.YNc(6,Z,11,1,"form",5),t.YNc(7,R,5,0,"ng-container",6),t.YNc(8,c,3,2,"ng-template",null,7,t.W1O)),2&s){const O=t.MAs(9);t.xp6(2),t.Q6J("ngIf",u.gamesCount),t.xp6(4),t.Q6J("ngIf",u.form),t.xp6(1),t.Q6J("ngIf",u.loading)("ngIfElse",O)}},encapsulation:2}),r})()},8636:(L,x,l)=>{l.d(x,{F:()=>R});var t=l(3818),o=l(5e3),_=l(9743),w=l(263),C=l(7961),E=l(9808),g=l(1083),U=l(7423),m=l(5245);const v=function(d){return{"background-color":d}};function D(d,M){if(1&d&&(o.TgZ(0,"button",10),o._uU(1),o._UZ(2,"i",11),o.qZA()),2&d){const c=o.oxw();o.Q6J("ngStyle",o.VKq(2,v,c.game.cover?c.game.cover.colorPalette.backgroundColorHex:"black")),o.xp6(1),o.hij(" ",c.game.countUsers," ")}}function P(d,M){if(1&d){const c=o.EpF();o.TgZ(0,"button",13),o.NdJ("click",function(){o.CHM(c);const r=o.oxw(2);return r.addToList(r.game)}),o.TgZ(1,"mat-icon"),o._uU(2,"add"),o.qZA()()}if(2&d){const c=o.oxw(2);o.Q6J("ngStyle",o.VKq(1,v,c.game.cover?c.game.cover.colorPalette.backgroundColorHex:"black"))}}function N(d,M){if(1&d){const c=o.EpF();o.TgZ(0,"button",13),o.NdJ("click",function(){o.CHM(c);const r=o.oxw(2);return r.removeFromList(r.game)}),o.TgZ(1,"mat-icon"),o._uU(2,"remove"),o.qZA()()}if(2&d){const c=o.oxw(2);o.Q6J("ngStyle",o.VKq(1,v,c.game.cover?c.game.cover.colorPalette.backgroundColorHex:"black"))}}function W(d,M){if(1&d&&(o.ynx(0),o.YNc(1,P,3,3,"button",12),o.YNc(2,N,3,3,"button",12),o.BQk()),2&d){const c=o.oxw();o.xp6(1),o.Q6J("ngIf",!1===c.game.selectedByUser),o.xp6(1),o.Q6J("ngIf",!0===c.game.selectedByUser)}}function B(d,M){1&d&&o._UZ(0,"div",14)}const Y=function(d){return{"d-none":d}},A=function(d){return["/admin/games/",d]},G=function(){return[]},Z=function(d){return{"has-admin-pill":d}};let R=(()=>{class d{constructor(c,p,r){this.gameHttpService=c,this.authService=p,this.parentComponent=r,this.isAdminSearchComponent=!0,this.hidden=!0,this.isAdmin=!1}ngOnInit(){this.isAdminSearchComponent=this.parentComponent instanceof t.X,this.isAdmin=this.authService.isAdmin}addToList(c){this.gameHttpService.addToList(c.slug).subscribe(()=>{c.selectedByUser=!c.selectedByUser})}removeFromList(c){this.gameHttpService.removeFromList(c.slug).subscribe(()=>{c.selectedByUser=!c.selectedByUser})}}return d.\u0275fac=function(c){return new(c||d)(o.Y36(_.q),o.Y36(w.e),o.Y36(C.X,8))},d.\u0275cmp=o.Xpm({type:d,selectors:[["app-game-item"]],inputs:{game:"game"},decls:13,vars:31,consts:[[2,"position","relative","aspect-ratio","3/4","display","flex","align-items","center"],[1,"card-img-top",2,"flex","0",3,"src","ngClass","alt","routerLink","load"],[1,"w-100","h-100",2,"position","absolute","top","0","z-index","-1","filter","brightness(50%)",3,"ngStyle","routerLink"],[1,"pills-container",3,"ngClass"],["class","pill countUsers","mat-raised-button","",3,"ngStyle",4,"ngIf"],["mat-raised-button","",1,"pill","countMusics",3,"ngStyle"],[1,"fa-solid","fa-music"],[4,"ngIf"],[1,"card-title","orange",3,"routerLink"],["class","played",4,"ngIf"],["mat-raised-button","",1,"pill","countUsers",3,"ngStyle"],[1,"fa-solid","fa-gamepad"],["class","game-item-cta","mat-mini-fab","","aria-label","Example icon button with a heart icon",3,"ngStyle","click",4,"ngIf"],["mat-mini-fab","","aria-label","Example icon button with a heart icon",1,"game-item-cta",3,"ngStyle","click"],[1,"played"]],template:function(c,p){1&c&&(o.TgZ(0,"div",0)(1,"img",1),o.NdJ("load",function(){return p.hidden=!1}),o.qZA(),o._UZ(2,"div",2),o.TgZ(3,"div",3),o.YNc(4,D,3,4,"button",4),o.TgZ(5,"button",5),o._uU(6),o._UZ(7,"i",6),o.qZA()(),o.YNc(8,W,3,2,"ng-container",7),o.qZA(),o.TgZ(9,"div",8),o.YNc(10,B,1,0,"div",9),o.TgZ(11,"p"),o._uU(12),o.qZA()()),2&c&&(o.xp6(1),o.Q6J("src",null!=p.game.cover&&p.game.cover.imageId?"https://images.igdb.com/igdb/image/upload/t_720p/"+p.game.cover.imageId+".jpg":"assets/imgs/missing picture.png",o.LSH)("ngClass",o.VKq(14,Y,p.hidden))("alt",p.game.name)("routerLink",p.isAdmin?o.VKq(16,A,p.game.slug):o.DdM(18,G)),o.xp6(1),o.Q6J("ngStyle",o.VKq(19,v,p.game.cover?p.game.cover.colorPalette.backgroundColorHex:"black"))("routerLink",p.isAdmin?o.VKq(21,A,p.game.slug):o.DdM(23,G)),o.xp6(1),o.Q6J("ngClass",o.VKq(24,Z,p.isAdminSearchComponent)),o.xp6(1),o.Q6J("ngIf",p.isAdminSearchComponent),o.xp6(1),o.Q6J("ngStyle",o.VKq(26,v,p.game.cover?p.game.cover.colorPalette.backgroundColorHex:"black")),o.xp6(1),o.hij(" ",p.game.countMusics," "),o.xp6(2),o.Q6J("ngIf",!1===p.isAdminSearchComponent),o.xp6(1),o.Q6J("routerLink",p.isAdmin?o.VKq(28,A,p.game.slug):o.DdM(30,G)),o.xp6(1),o.Q6J("ngIf",p.game.selectedByUser),o.xp6(2),o.Oqu(p.game.name))},directives:[E.mk,g.rH,E.PC,E.O5,U.lW,m.Hw],encapsulation:2}),d})()},7961:(L,x,l)=>{l.d(x,{X:()=>t});class t{}},9685:(L,x,l)=>{l.d(x,{Ry:()=>ut,Rq:()=>dt});var t=l(5e3),o=l(9646),_=l(4968),w=l(4986),C=l(4482),E=l(5403),g=l(8421);const U={leading:!0,trailing:!1};var v=l(5963);var P=l(5577),N=l(4004),W=l(8505),B=l(9300);function A(e,n,i,a){const f=window&&!!window.document&&window.document.documentElement;let h=f&&n?window:i;if(e&&(h=e&&f&&"string"==typeof e?function G(e,n,i){return(i?window.document:n).querySelector(e)}(e,i.nativeElement,a):e,!h))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return h}function Z(e){return e&&!e.firstChange}const d={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},M={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class c{constructor(n=!0){this.vertical=n,this.propsMap=n?d:M}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function s(e){return["Window","global"].some(i=>Object.prototype.toString.call(e).includes(i))}function u(e,n){return e?n.document.documentElement:null}function O(e,n){const i=function X({container:e,isWindow:n,axis:i}){const{offsetHeightKey:a,clientHeightKey:f}=$(i);return k(e,n,a,f)}(n);return n.isWindow?function J(e,n,i){const{axis:a,container:f,isWindow:h}=i,{offsetHeightKey:T,clientHeightKey:b}=$(a),y=e+q(u(h,f),a,h),I=k(n.nativeElement,h,T,b),H=function tt(e,n,i){const a=n.topKey();if(e.getBoundingClientRect)return e.getBoundingClientRect()[a]+q(e,n,i)}(n.nativeElement,a,h)+I;return{height:e,scrolled:y,totalToScroll:H,isWindow:h}}(i,e,n):function z(e,n,i){const{axis:a,container:f}=i;return{height:e,scrolled:f[a.scrollTopKey()],totalToScroll:f[a.scrollHeightKey()],isWindow:!1}}(i,0,n)}function $(e){return{offsetHeightKey:e.offsetHeightKey(),clientHeightKey:e.clientHeightKey()}}function k(e,n,i,a){if(isNaN(e[i])){const f=u(n,e);return f?f[a]:0}return e[i]}function q(e,n,i){const a=n.pageYOffsetKey(),f=n.scrollTopKey(),h=n.offsetTopKey();return isNaN(window.pageYOffset)?u(i,e)[f]:e.ownerDocument?e.ownerDocument.defaultView[a]:e[h]}function et(e,n={down:0,up:0},i){let a,f;if(e.totalToScroll<=0)return!1;const h=e.isWindow?e.scrolled:e.height+e.scrolled;return i?(a=(e.totalToScroll-h)/e.totalToScroll,f=((null==n?void 0:n.down)?n.down:0)/10):(a=e.scrolled/(e.scrolled+(e.totalToScroll-h)),f=((null==n?void 0:n.up)?n.up:0)/10),a<=f}class st{constructor({totalToScroll:n}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=n}updateScrollPosition(n){return this.lastScrollPosition=n}updateTotalToScroll(n){this.lastTotalToScroll!==n&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=n)}updateScroll(n,i){this.updateScrollPosition(n),this.updateTotalToScroll(i)}updateTriggeredFlag(n,i){i?this.triggered.down=n:this.triggered.up=n}isTriggeredScroll(n,i){return i?this.triggered.down===n:this.triggered.up===n}}function lt(e){const{scrollContainer:n,scrollWindow:i,element:a,fromRoot:f}=e,h=function r({windowElement:e,axis:n}){return function S(e,n){const i=e.isWindow||n&&!n.nativeElement?n:n.nativeElement;return Object.assign(Object.assign({},e),{container:i})}({axis:n,isWindow:s(e)},e)}({axis:new c(!e.horizontal),windowElement:A(n,i,a,f)}),T=new st({totalToScroll:O(a,h)}),y={up:e.upDistance,down:e.downDistance};return function at(e){let n=(0,_.R)(e.container,"scroll");return e.throttle&&(n=n.pipe(function D(e,n=w.z,i=U){const a=(0,v.H)(e,n);return function m(e,n=U){return(0,C.e)((i,a)=>{const{leading:f,trailing:h}=n;let T=!1,b=null,y=null,I=!1;const H=()=>{null==y||y.unsubscribe(),y=null,h&&(V(),I&&a.complete())},Q=()=>{y=null,I&&a.complete()},j=K=>y=(0,g.Xf)(e(K)).subscribe((0,E.x)(a,H,Q)),V=()=>{if(T){T=!1;const K=b;b=null,a.next(K),!I&&j(K)}};i.subscribe((0,E.x)(a,K=>{T=!0,b=K,(!y||y.closed)&&(f?V():j(K))},()=>{I=!0,(!(h&&T&&y)||y.closed)&&a.complete()}))})}(()=>a,i)}(e.throttle,void 0,{leading:!0,trailing:!0}))),n}({container:h.container,throttle:e.throttle}).pipe((0,P.z)(()=>(0,o.of)(O(a,h))),(0,N.U)(I=>function ct(e,n,i){const{scrollDown:a,fire:f}=function ot(e,n,i){const a=function nt(e,n){return e<n.scrolled}(e,n);return{fire:et(n,i,a),scrollDown:a}}(e,n,i);return{scrollDown:a,fire:f,stats:n}}(T.lastScrollPosition,I,y)),(0,W.b)(({stats:I})=>T.updateScroll(I.scrolled,I.totalToScroll)),(0,B.h)(({fire:I,scrollDown:H,stats:{totalToScroll:Q}})=>function p(e,n,i){return!!(e&&n||!i&&n)}(e.alwaysCallback,I,T.isTriggeredScroll(Q,H))),(0,W.b)(({scrollDown:I,stats:{totalToScroll:H}})=>{T.updateTriggeredFlag(H,I)}),(0,N.U)(mt))}function mt(e){const{scrollDown:n,stats:{scrolled:i}}=e;return{type:n?"[NGX_ISE] DOWN":"[NGX_ISE] UP",payload:{currentScrollPosition:i}}}let ut=(()=>{class e{constructor(i,a){this.element=i,this.zone=a,this.scrolled=new t.vpe,this.scrolledUp=new t.vpe,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:i,infiniteScrollDisabled:a,infiniteScrollDistance:f}){const h=Z(i),T=Z(a),b=Z(f),y=!T&&!this.infiniteScrollDisabled||T&&!a.currentValue||b;(h||T||b)&&(this.destroyScroller(),y&&this.setup())}setup(){(function R(){return"undefined"!=typeof window})()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=lt({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(i=>this.zone.run(()=>this.handleOnScroll(i)))})}handleOnScroll({type:i,payload:a}){switch(i){case"[NGX_ISE] DOWN":return this.scrolled.emit(a);case"[NGX_ISE] UP":return this.scrolledUp.emit(a);default:return}}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(t.SBq),t.Y36(t.R0b))},e.\u0275dir=t.lG2({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[t.TTD]}),e})(),dt=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[],imports:[[]]}),e})()}}]);