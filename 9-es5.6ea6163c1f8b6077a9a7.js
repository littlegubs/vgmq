function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{BXcl:function(e,t,n){"use strict";n.r(t),n.d(t,"GameModule",(function(){return de}));var i,r=n("ofXK"),a=function e(t){_classCallCheck(this,e),Object.assign(this,t)},c=function e(t){_classCallCheck(this,e),Object.assign(this,t)},s=function e(t){_classCallCheck(this,e),this.id=t.id,this.title=t.title,this.artist=t.artist,this.duration=t.duration,this.durationDate=new Date(0,0,0,0,0,this.duration),this.guessAccuracy=t.guessAccuracy,this.playNumber=t.playNumber},o=function e(t){_classCallCheck(this,e),this.title=t.title,this.artist=t.artist},l=function e(t){_classCallCheck(this,e),this.id=t.id,this.music=new s(t.music)},u=function e(t){var n,i;_classCallCheck(this,e),this.id=t.id,this.firstReleaseDate=t.firstReleaseDate,this.name=t.name,this.slug=t.slug,this.alternativeNames=null===(n=t.alternativeNames)||void 0===n?void 0:n.map((function(e){return new c(e)})),this.gameMusics=null===(i=t.gameMusics)||void 0===i?void 0:i.map((function(e){return new l(e)})),this.cover=new a(t.cover),this.enabled=t.enabled},b=function e(t){_classCallCheck(this,e),this.errors=[],this.errors=t.errors},d=n("nYR2"),f=n("fXoL"),g=n("z6cu"),m=n("AytR"),p=n("JIr8"),h=n("tk/3"),v=((i=function(){function e(t){_classCallCheck(this,e),this.http=t,this.apiEndpoint=m.a.apiEndpoint}return _createClass(e,[{key:"search",value:function(e,t){return this.http.get(this.apiEndpoint+"/admin/games",{params:_objectSpread(_objectSpread({},(null==e?void 0:e.length)>0&&{query:e}),t&&{showDisabled:"true"})})}},{key:"get",value:function(e){return this.http.get("".concat(this.apiEndpoint,"/admin/games/").concat(e))}},{key:"uploadMusics",value:function(e,t){var n,i=new FormData,r=_createForOfIteratorHelper(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;i.append("music_files[files][]",a)}}catch(c){r.e(c)}finally{r.f()}return this.http.post("".concat(this.apiEndpoint,"/admin/games/").concat(e,"/musics/upload"),i).pipe(Object(p.a)((function(e){return Object(g.a)(new b(e.error))})))}},{key:"saveMusic",value:function(e,t){return this.http.patch("".concat(this.apiEndpoint,"/admin/musics/").concat(e.id),t).pipe(Object(p.a)((function(e){return Object(g.a)(new o(e.error.errors))})))}},{key:"deleteGameMusic",value:function(e){return this.http.delete("".concat(this.apiEndpoint,"/admin/games-musics/").concat(e.id))}},{key:"toggleGame",value:function(e){return this.http.patch("".concat(this.apiEndpoint,"/admin/games/").concat(e.slug,"/toggle"),null).pipe(Object(p.a)((function(e){return Object(g.a)(e.error)})))}},{key:"toggleAlternativeName",value:function(e){return this.http.patch("".concat(this.apiEndpoint,"/admin/alternative-names/").concat(e.id,"/toggle"),null).pipe(Object(p.a)((function(e){return Object(g.a)(e.error)})))}}]),e}()).\u0275fac=function(e){return new(e||i)(f.Sb(h.b))},i.\u0275prov=f.Fb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),y=n("1jcm"),O=n("3Pt+"),N=n("tyNb");function k(e,t){if(1&e&&(f.Ob(0,"h1"),f.sc(1),f.Nb()),2&e){var n=f.Zb();f.zb(1),f.uc("",n.gamesCount," games")}}function w(e,t){1&e&&(f.Mb(0),f.Ob(1,"div",6),f.Ob(2,"div",7),f.Ob(3,"span",8),f.sc(4,"Loading..."),f.Nb(),f.Nb(),f.Nb(),f.Lb())}function M(e,t){if(1&e&&f.Kb(0,"img",16),2&e){var n=f.Zb().$implicit;f.fc("src","https://images.igdb.com/igdb/image/upload/t_720p/",n.cover.imageId,".jpg",f.nc)}}var C=function(e){return["/admin/games/",e]};function I(e,t){if(1&e&&(f.Ob(0,"a",11),f.qc(1,M,1,1,"img",12),f.Ob(2,"div",13),f.Ob(3,"h3",14),f.sc(4),f.Nb(),f.Ob(5,"p",15),f.sc(6),f.ac(7,"date"),f.Nb(),f.Nb(),f.Nb()),2&e){var n=t.$implicit;f.ec("routerLink",f.hc(7,C,n.slug)),f.zb(1),f.ec("ngIf",n.cover.imageId),f.zb(3),f.tc(n.name),f.zb(2),f.tc(f.bc(7,4,n.firstReleaseDate,"y"))}}function z(e,t){if(1&e&&(f.Ob(0,"div",9),f.qc(1,I,8,9,"a",10),f.Nb()),2&e){var n=f.Zb();f.zb(1),f.ec("ngForOf",n.games)}}var j,_=((j=function(){function e(t){_classCallCheck(this,e),this.adminGameHttpService=t,this.games=[],this.query="",this.showDisabled=!1,this.loading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.search()}},{key:"search",value:function(){var e=this;this.http&&this.http.unsubscribe(),this.loading=!0,this.http=this.adminGameHttpService.search(this.query,this.showDisabled).pipe(Object(d.a)((function(){return e.loading=!1}))).subscribe((function(t){e.gamesCount=t.count,e.games=t.data.map((function(e){return new u(e)}))}))}},{key:"toggleShowDisabled",value:function(){this.showDisabled=!this.showDisabled,this.search()}}]),e}()).\u0275fac=function(e){return new(e||j)(f.Jb(v))},j.\u0275cmp=f.Db({type:j,selectors:[["app-game-search"]],decls:10,vars:6,consts:[[1,"form-group"],[4,"ngIf"],["color","primary",3,"ngModel","disabled","ngModelChange","click"],["type","text","id","exampleFormControlInput1","placeholder","game...",1,"form-control",3,"ngModel","ngModelChange","keyup"],[4,"ngIf","ngIfElse"],["cardColumns",""],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","orange"],[1,"sr-only"],[1,"card-columns","admin-card-columns"],["class","card","style","width: 18rem;",3,"routerLink",4,"ngFor","ngForOf"],[1,"card",2,"width","18rem",3,"routerLink"],["class","card-img-top","alt","...",3,"src",4,"ngIf"],[1,"card-body"],[1,"card-title","orange"],[1,"card-text"],["alt","...",1,"card-img-top",3,"src"]],template:function(e,t){if(1&e&&(f.Ob(0,"div",0),f.qc(1,k,2,1,"h1",1),f.Ob(2,"div",0),f.Ob(3,"label"),f.sc(4,"Show disabled game"),f.Nb(),f.Ob(5,"mat-slide-toggle",2),f.Vb("ngModelChange",(function(e){return t.showDisabled=e}))("click",(function(){return t.loading||t.toggleShowDisabled()})),f.Nb(),f.Nb(),f.Ob(6,"input",3),f.Vb("ngModelChange",(function(e){return t.query=e}))("keyup",(function(){return t.search()})),f.Nb(),f.Nb(),f.qc(7,w,5,0,"ng-container",4),f.qc(8,z,2,1,"ng-template",null,5,f.rc)),2&e){var n=f.kc(9);f.zb(1),f.ec("ngIf",t.gamesCount),f.zb(4),f.ec("ngModel",t.showDisabled)("disabled",t.loading),f.zb(1),f.ec("ngModel",t.query),f.zb(1),f.ec("ngIf",t.loading)("ngIfElse",n)}},directives:[r.k,y.a,O.k,O.m,O.b,r.j,N.e],pipes:[r.d],encapsulation:2}),j),E=n("PCNd"),L=n("Xa2L"),q=n("6NWb"),D=["musicRow",""];function G(e,t){if(1&e&&(f.Mb(0),f.Ob(1,"th",3),f.sc(2),f.Nb(),f.Ob(3,"td"),f.sc(4),f.Nb(),f.Lb()),2&e){var n=f.Zb();f.zb(2),f.tc(n.gameMusic.music.title),f.zb(2),f.tc(n.gameMusic.music.artist)}}function F(e,t){1&e&&(f.Mb(0),f.sc(1," title cannot be empty "),f.Lb())}function S(e,t){if(1&e&&(f.Mb(0),f.sc(1),f.Lb()),2&e){var n=f.Zb(3);f.zb(1),f.uc(" ",n.title.errors.apiError[0]," ")}}function P(e,t){if(1&e&&(f.Ob(0,"div",8),f.qc(1,F,2,0,"ng-container",9),f.qc(2,S,2,1,"ng-container",9),f.Nb()),2&e){var n=f.Zb(2);f.zb(1),f.ec("ngIf",n.title.errors.required),f.zb(1),f.ec("ngIf",n.title.errors.apiError)}}var Z=function(e){return{"is-invalid":e}};function A(e,t){if(1&e&&(f.Mb(0,4),f.Ob(1,"th",3),f.Kb(2,"input",5),f.qc(3,P,3,2,"div",6),f.Nb(),f.Ob(4,"td"),f.Kb(5,"input",7),f.Nb(),f.Lb()),2&e){var n=f.Zb();f.ec("formGroup",n.formGroup),f.zb(2),f.ec("ngClass",f.hc(3,Z,n.title.invalid&&(n.title.dirty||n.title.touched))),f.zb(1),f.ec("ngIf",n.title.errors)}}function H(e,t){1&e&&(f.Mb(0),f.Ob(1,"div",10),f.Ob(2,"span",11),f.sc(3,"Loading..."),f.Nb(),f.Nb(),f.Lb())}var K=function(){return["fas","pen"]},x=function(){return["fas","times"]};function R(e,t){if(1&e){var n=f.Pb();f.Mb(0),f.Ob(1,"button",13),f.Vb("click",(function(){return f.lc(n),f.Zb(2).createFormGroup()})),f.Kb(2,"fa-icon",14),f.Nb(),f.Ob(3,"button",15),f.Vb("click",(function(){return f.lc(n),f.Zb(2).delete()})),f.Kb(4,"fa-icon",14),f.Nb(),f.Lb()}2&e&&(f.zb(2),f.ec("icon",f.gc(2,K)),f.zb(2),f.ec("icon",f.gc(3,x)))}var V=function(){return["fas","check"]};function J(e,t){if(1&e){var n=f.Pb();f.Ob(0,"button",16),f.Vb("click",(function(){return f.lc(n),f.Zb(2).save()})),f.Kb(1,"fa-icon",14),f.Nb(),f.Ob(2,"button",15),f.Vb("click",(function(){return f.lc(n),f.Zb(2).cancel()})),f.Kb(3,"fa-icon",14),f.Nb()}2&e&&(f.zb(1),f.ec("icon",f.gc(2,V)),f.zb(2),f.ec("icon",f.gc(3,x)))}function T(e,t){if(1&e&&(f.qc(0,R,5,4,"ng-container",0),f.qc(1,J,4,4,"ng-template",null,12,f.rc)),2&e){var n=f.kc(2),i=f.Zb();f.ec("ngIf",!i.edit)("ngIfElse",n)}}var U,B=((U=function(){function e(t,n){_classCallCheck(this,e),this.formBuilder=t,this.adminGameHttpService=n,this.onDelete=new f.n,this.edit=!1,this.loading=!1}return _createClass(e,[{key:"createFormGroup",value:function(){this.edit=!0,this.formGroup=new O.f({title:new O.d(this.gameMusic.music.title,O.p.required.bind(this)),artist:new O.d(this.gameMusic.music.artist)})}},{key:"cancel",value:function(){this.edit=!1,this.formGroup.reset()}},{key:"save",value:function(){var e=this;this.loading=!0,this.adminGameHttpService.saveMusic(this.gameMusic.music,this.formGroup.value).pipe(Object(d.a)((function(){return e.loading=!1}))).subscribe((function(t){e.gameMusic.music=t,e.edit=!1}),(function(t){t.title&&e.title.setErrors({apiError:t.title}),t.artist&&e.artist.setErrors({apiError:t.artist})}))}},{key:"delete",value:function(){var e=this;this.loading=!0,this.adminGameHttpService.deleteGameMusic(this.gameMusic).pipe(Object(d.a)((function(){return e.loading=!1}))).subscribe((function(){e.onDelete.emit(e.gameMusic)}))}},{key:"title",get:function(){return this.formGroup.get("title")}},{key:"artist",get:function(){return this.formGroup.get("artist")}}]),e}()).\u0275fac=function(e){return new(e||U)(f.Jb(O.c),f.Jb(v))},U.\u0275cmp=f.Db({type:U,selectors:[["","musicRow",""]],inputs:{gameMusic:"gameMusic"},outputs:{onDelete:"onDelete"},attrs:D,decls:14,vars:10,consts:[[4,"ngIf","ngIfElse"],["editMusic",""],["musicRowButtons",""],["scope","row"],[3,"formGroup"],["formControlName","title",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","artist"],[1,"invalid-feedback"],[4,"ngIf"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],["editMusicButtons",""],[1,"btn","btn-sm","btn-primary",3,"click"],[3,"icon"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"btn","btn-sm","btn-success",3,"click"]],template:function(e,t){if(1&e&&(f.qc(0,G,5,2,"ng-container",0),f.qc(1,A,6,5,"ng-template",null,1,f.rc),f.Ob(3,"td"),f.sc(4),f.ac(5,"date"),f.Nb(),f.Ob(6,"td"),f.sc(7),f.Nb(),f.Ob(8,"td"),f.sc(9),f.Nb(),f.Ob(10,"td"),f.qc(11,H,4,0,"ng-container",0),f.qc(12,T,3,2,"ng-template",null,2,f.rc),f.Nb()),2&e){var n=f.kc(2),i=f.kc(13);f.ec("ngIf",!t.edit)("ngIfElse",n),f.zb(4),f.tc(f.bc(5,7,t.gameMusic.music.durationDate,"HH:mm:ss")),f.zb(3),f.tc(t.gameMusic.music.guessAccuracy||"-"),f.zb(2),f.tc(t.gameMusic.music.playNumber),f.zb(2),f.ec("ngIf",t.loading)("ngIfElse",i)}},directives:[r.k,O.l,O.g,O.b,O.k,O.e,r.i,q.a],pipes:[r.d],encapsulation:2}),U),$=["alternativeNameRow",""];function X(e,t){1&e&&f.Kb(0,"mat-spinner",3)}var W,Y=((W=function(){function e(t){_classCallCheck(this,e),this.adminGameHttpService=t,this.loading=!1}return _createClass(e,[{key:"toggle",value:function(){var e=this;this.loading=!0,this.adminGameHttpService.toggleAlternativeName(this.alternativeName).pipe(Object(d.a)((function(){return e.loading=!1}))).subscribe((function(){e.alternativeName.enabled=!e.alternativeName.enabled}))}}]),e}()).\u0275fac=function(e){return new(e||W)(f.Jb(v))},W.\u0275cmp=f.Db({type:W,selectors:[["","alternativeNameRow",""]],inputs:{alternativeName:"alternativeName"},attrs:$,decls:5,vars:4,consts:[["scope","row"],["color","primary",3,"ngModel","disabled","ngModelChange","click"],["color","primary",4,"ngIf"],["color","primary"]],template:function(e,t){1&e&&(f.Ob(0,"th",0),f.sc(1),f.Nb(),f.Ob(2,"td"),f.Ob(3,"mat-slide-toggle",1),f.Vb("ngModelChange",(function(e){return t.alternativeName.enabled=e}))("click",(function(){return t.loading||t.toggle()})),f.Nb(),f.qc(4,X,1,0,"mat-spinner",2),f.Nb()),2&e&&(f.zb(1),f.tc(t.alternativeName.name),f.zb(2),f.ec("ngModel",t.alternativeName.enabled)("disabled",t.loading),f.zb(1),f.ec("ngIf",t.loading))},directives:[y.a,O.k,O.m,r.k,L.b],encapsulation:2}),W);function Q(e,t){1&e&&(f.Mb(0),f.Ob(1,"div",3),f.Ob(2,"div",4),f.Ob(3,"span",5),f.sc(4,"Loading..."),f.Nb(),f.Nb(),f.Nb(),f.Lb())}function ee(e,t){1&e&&f.Kb(0,"mat-spinner",22)}function te(e,t){if(1&e&&(f.Ob(0,"span",23),f.sc(1),f.Nb()),2&e){var n=f.Zb(2);f.zb(1),f.tc(n.toggleErrorMessage)}}function ne(e,t){if(1&e&&(f.Ob(0,"div",25),f.sc(1),f.Nb()),2&e){var n=t.$implicit;f.zb(1),f.uc(" ",n," ")}}function ie(e,t){if(1&e&&(f.Mb(0),f.qc(1,ne,2,1,"div",24),f.Lb()),2&e){var n=f.Zb(2);f.zb(1),f.ec("ngForOf",n.musics.errors.apiErrors)}}function re(e,t){1&e&&f.Kb(0,"span",26)}function ae(e,t){if(1&e){var n=f.Pb();f.Mb(0),f.Ob(1,"tr",27),f.Vb("onDelete",(function(e){return f.lc(n),f.Zb(2).handleGameMusicDeleted(e)})),f.Nb(),f.Lb()}if(2&e){var i=t.$implicit;f.zb(1),f.ec("gameMusic",i)}}function ce(e,t){if(1&e&&(f.Mb(0),f.Kb(1,"tr",28),f.Lb()),2&e){var n=t.$implicit;f.zb(1),f.ec("alternativeName",n)}}var se=function(e){return{"is-invalid":e}};function oe(e,t){if(1&e){var n=f.Pb();f.Ob(0,"h1"),f.sc(1),f.Nb(),f.Ob(2,"div",6),f.Ob(3,"div",7),f.sc(4," enabled "),f.Ob(5,"mat-slide-toggle",8),f.Vb("ngModelChange",(function(e){return f.lc(n),f.Zb().game.enabled=e}))("click",(function(){f.lc(n);var e=f.Zb();return e.loading||e.toggle()})),f.Nb(),f.qc(6,ee,1,0,"mat-spinner",9),f.qc(7,te,2,1,"span",10),f.Nb(),f.Ob(8,"div",11),f.Ob(9,"h2"),f.sc(10,"Musics"),f.Nb(),f.Ob(11,"div",12),f.Ob(12,"label",13),f.sc(13,"add musics"),f.Nb(),f.Ob(14,"input",14),f.Vb("change",(function(e){return f.lc(n),f.Zb().fileUpload(e)})),f.Nb(),f.qc(15,ie,2,1,"ng-container",15),f.Ob(16,"button",16),f.Vb("click",(function(){f.lc(n);var e=f.Zb();return e.uploadLoading||0===e.musicFiles.length||e.uploadMusic()})),f.sc(17," Upload "),f.qc(18,re,1,0,"span",17),f.Nb(),f.Nb(),f.Ob(19,"table",18),f.Ob(20,"thead",19),f.Ob(21,"tr"),f.Ob(22,"th",20),f.sc(23,"title"),f.Nb(),f.Ob(24,"th",20),f.sc(25,"artist"),f.Nb(),f.Ob(26,"th",20),f.sc(27,"duration"),f.Nb(),f.Ob(28,"th",20),f.sc(29,"accuracy"),f.Nb(),f.Ob(30,"th",20),f.sc(31,"played"),f.Nb(),f.Ob(32,"th",20),f.sc(33,"action"),f.Nb(),f.Nb(),f.Nb(),f.Ob(34,"tbody"),f.qc(35,ae,2,1,"ng-container",21),f.Nb(),f.Nb(),f.Nb(),f.Ob(36,"div",11),f.Ob(37,"table",18),f.Ob(38,"thead",19),f.Ob(39,"tr"),f.Ob(40,"th",20),f.sc(41,"Alternative names"),f.Nb(),f.Ob(42,"th",20),f.sc(43,"Enabled"),f.Nb(),f.Nb(),f.Nb(),f.Ob(44,"tbody"),f.qc(45,ce,2,1,"ng-container",21),f.Nb(),f.Nb(),f.Nb(),f.Nb()}if(2&e){var i=f.Zb();f.zb(1),f.tc(i.game.name),f.zb(4),f.ec("ngModel",i.game.enabled)("disabled",i.toggleLoading),f.zb(1),f.ec("ngIf",i.toggleLoading),f.zb(1),f.ec("ngIf",i.toggleErrorMessage),f.zb(4),f.ec("formGroup",i.musicUploadForm),f.zb(3),f.ec("ngClass",f.hc(12,se,i.musics.invalid&&(i.musics.dirty||i.musics.touched))),f.zb(1),f.ec("ngIf",i.musics.errors),f.zb(1),f.ec("disabled",i.uploadLoading||0===i.musicFiles.length),f.zb(2),f.ec("ngIf",i.uploadLoading),f.zb(17),f.ec("ngForOf",i.game.gameMusics),f.zb(10),f.ec("ngForOf",i.game.alternativeNames)}}var le,ue,be=[{path:":slug",component:(le=function(){function e(t,n,i){_classCallCheck(this,e),this.adminGameHttpService=t,this.route=n,this.formBuilder=i,this.loading=!1,this.uploadLoading=!1,this.musicFiles=[],this.toggleLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.loading=!0,this.adminGameHttpService.get(this.route.snapshot.paramMap.get("slug")).subscribe((function(t){e.game=new u(t),e.loading=!1})),this.musicUploadForm=this.formBuilder.group({musics:[null,[O.p.required.bind(this)]]})}},{key:"uploadMusic",value:function(){var e=this;this.uploadLoading=!0,this.adminGameHttpService.uploadMusics(this.route.snapshot.paramMap.get("slug"),this.musicFiles).pipe(Object(d.a)((function(){return e.uploadLoading=!1}))).subscribe((function(t){e.game=new u(t)}),(function(t){t.errors.forEach((function(t){e.musics.setErrors({apiErrors:t})}))}))}},{key:"fileUpload",value:function(e){this.musicFiles=e.target.files&&e.target.files.length?e.target.files:[]}},{key:"handleGameMusicDeleted",value:function(e){this.game.gameMusics.splice(this.game.gameMusics.indexOf(this.game.gameMusics.find((function(t){return t.id===e.id}))),1)}},{key:"toggle",value:function(){var e=this;this.toggleErrorMessage=void 0,this.toggleLoading=!0,this.adminGameHttpService.toggleGame(this.game).pipe(Object(d.a)((function(){return e.toggleLoading=!1}))).subscribe((function(t){e.game=t}),(function(t){e.toggleErrorMessage=t}))}},{key:"musics",get:function(){return this.musicUploadForm.get("musics")}}]),e}(),le.\u0275fac=function(e){return new(e||le)(f.Jb(v),f.Jb(N.a),f.Jb(O.c))},le.\u0275cmp=f.Db({type:le,selectors:[["app-game-show"]],decls:5,vars:2,consts:[["routerLink","admin/games",1,"btn","btn-info"],[4,"ngIf","ngIfElse"],["gameShow",""],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","orange"],[1,"sr-only"],[1,"row"],[1,"col-md-12"],["color","primary",3,"ngModel","disabled","ngModelChange","click"],["color","primary",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"col-md-6"],[1,"form-group",3,"formGroup"],["for","exampleFormControlFile1"],["type","file","id","exampleFormControlFile1","formControlName","musics","multiple","","accept","audio/mpeg",1,"form-control-file",3,"ngClass","change"],[4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"table"],[1,"thead-dark"],["scope","col"],[4,"ngFor","ngForOf"],["color","primary"],[1,"text-danger"],["class","invalid-feedback",4,"ngFor","ngForOf"],[1,"invalid-feedback"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["musicRow","",3,"gameMusic","onDelete"],["alternativeNameRow","",3,"alternativeName"]],template:function(e,t){if(1&e&&(f.Ob(0,"a",0),f.sc(1,"back to list"),f.Nb(),f.qc(2,Q,5,0,"ng-container",1),f.qc(3,oe,46,14,"ng-template",null,2,f.rc)),2&e){var n=f.kc(4);f.zb(2),f.ec("ngIf",t.loading)("ngIfElse",n)}},directives:[N.e,r.k,y.a,O.k,O.m,O.l,O.g,O.b,O.e,r.i,r.j,L.b,B,Y],encapsulation:2}),le)},{path:"",component:_}],de=((ue=function e(){_classCallCheck(this,e)}).\u0275mod=f.Hb({type:ue}),ue.\u0275inj=f.Gb({factory:function(e){return new(e||ue)},imports:[[r.b,N.f.forChild(be),E.a]]}),ue)}}]);