"use strict";(self.webpackChunkvgmq=self.webpackChunkvgmq||[]).push([[813],{813:(E,h,l)=>{l.r(h),l.d(h,{ResetPasswordModule:()=>Y});var u=l(6814),c=l(8184),w=l(2132),p=l(7679),a=l(6223),g=l(4716),v=l(553),e=l(9212),b=l(4621),C=l(304),f=l(2939);const y=["recaptcha"];function T(r,m){if(1&r&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&r){const n=e.oxw();e.xp6(),e.hij(" ",n.formErrorMessage," ")}}function Z(r,m){if(1&r&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&r){const n=m.ngIf;e.xp6(),e.hij(" ",n," ")}}function _(r,m){1&r&&e._UZ(0,"span",16)}const R=r=>({"is-invalid":r}),J=["recaptcha"];function A(r,m){if(1&r&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&r){const n=e.oxw();e.xp6(),e.hij(" ",n.formErrorMessage," ")}}function k(r,m){if(1&r&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&r){const n=m.ngIf;e.xp6(),e.hij(" ",n," ")}}function q(r,m){1&r&&e._UZ(0,"span",16)}const Q=r=>({"is-invalid":r}),S=[{path:"",component:(()=>{class r{fb;router;authHttpService;authService;snackBar;form;formErrorMessage;loading=!1;environment=v.N;recaptchaComponent;constructor(n,o,t,s,i){this.fb=n,this.router=o,this.authHttpService=t,this.authService=s,this.snackBar=i,this.form=this.fb.group({email:["",a.kI.required.bind(this)]})}submit(n){this.loading=!0,this.authHttpService.requestResetPassword(this.form.value,n).pipe((0,g.x)(()=>this.loading=!1)).subscribe({next:()=>{this.snackBar.open("Email successfully sent",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:1e4}),this.form.reset(),this.recaptchaComponent.reset()},error:o=>{Array.isArray(o.message)?o.message.map(t=>{if("string"!=typeof t){const s=this.form.get(t.property);s?.markAsTouched(),s?.setErrors({serverError:t.errors})}}):this.formErrorMessage=o.message,this.recaptchaComponent.reset()}})}static \u0275fac=function(o){return new(o||r)(e.Y36(a.qu),e.Y36(c.F0),e.Y36(b.C),e.Y36(C.e),e.Y36(f.ux))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-request-reset-password"]],viewQuery:function(o,t){if(1&o&&e.Gf(y,5),2&o){let s;e.iGM(s=e.CRH())&&(t.recaptchaComponent=s.first)}},decls:18,vars:9,consts:[[1,"row","align-items-center"],[1,"col-md-12"],[1,"form-login",3,"formGroup","ngSubmit"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],[1,"form-group"],["type","email","formControlName","email","placeholder","email","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["theme","dark","size","invisible",3,"siteKey","resolved"],["recaptcha",""],[1,"col-md-12","text-center","mt-3"],["type","submit",1,"btn","btn-primary","col-md-6",3,"disabled"],["class","spinner-border spinner-border-sm","type","button","role","status","aria-hidden","true",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/"],["role","alert",1,"col-md-12","alert","alert-danger"],[1,"invalid-feedback"],["type","button","role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,t){if(1&o){const s=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){e.CHM(s);const d=e.MAs(10);return e.KtG(t.loading||d.execute())}),e.YNc(3,T,2,1,"div",3),e.TgZ(4,"div",4)(5,"label"),e._uU(6,"Email"),e.qZA(),e._UZ(7,"input",5),e.YNc(8,Z,2,1,"div",6),e.qZA(),e.TgZ(9,"re-captcha",7,8),e.NdJ("resolved",function(d){return d&&t.submit(d)}),e.qZA(),e.TgZ(11,"div",9)(12,"button",10),e.YNc(13,_,1,0,"span",11),e._uU(14," Reset password "),e.qZA()()(),e.TgZ(15,"div",12)(16,"a",13),e._uU(17,"Back to login"),e.qZA()()()()}if(2&o){let s,i;e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(),e.Q6J("ngIf",t.formErrorMessage),e.xp6(4),e.Q6J("ngClass",e.VKq(7,R,(null==(s=t.form.get("email"))?null:s.invalid)&&((null==(s=t.form.get("email"))?null:s.dirty)||(null==(s=t.form.get("email"))?null:s.touched)))),e.xp6(),e.Q6J("ngIf",null==(i=t.form.get("email"))||null==i.errors?null:i.errors.serverError),e.xp6(),e.Q6J("siteKey",t.environment.recaptchaKey),e.xp6(3),e.Q6J("disabled",t.loading),e.xp6(),e.Q6J("ngIf",t.loading)}},dependencies:[u.mk,u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,c.rH,p.wT],encapsulation:2})}return r})()},{path:":token",component:(()=>{class r{fb;router;authHttpService;authService;snackBar;route;form;formErrorMessage;loading=!1;environment=v.N;recaptchaComponent;constructor(n,o,t,s,i,d){this.fb=n,this.router=o,this.authHttpService=t,this.authService=s,this.snackBar=i,this.route=d,this.form=this.fb.group({password:["",a.kI.required.bind(this)]})}submit(n){this.loading=!0,this.route.paramMap.subscribe(o=>{this.authHttpService.resetPassword(this.form.value,o.get("token"),n).pipe((0,g.x)(()=>this.loading=!1)).subscribe({next:t=>{this.authService.setAccessTokenCookie(t.accessToken),this.authService.setRefreshTokenCookie(t.refreshToken),this.snackBar.open("Password successfully updated!",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:5e3}),this.router.navigate(["/"])},error:t=>{Array.isArray(t.message)?t.message.map(s=>{if("string"!=typeof s){const i=this.form.get(s.property);i?.markAsTouched(),i?.setErrors({serverError:s.errors})}}):this.formErrorMessage=t.message,this.recaptchaComponent.reset()}})})}static \u0275fac=function(o){return new(o||r)(e.Y36(a.qu),e.Y36(c.F0),e.Y36(b.C),e.Y36(C.e),e.Y36(f.ux),e.Y36(c.gz))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-reset-password"]],viewQuery:function(o,t){if(1&o&&e.Gf(J,5),2&o){let s;e.iGM(s=e.CRH())&&(t.recaptchaComponent=s.first)}},decls:18,vars:9,consts:[[1,"row","align-items-center"],[1,"col-md-12"],[1,"form-login",3,"formGroup","ngSubmit"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],[1,"form-group"],["type","password","formControlName","password","placeholder","password","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["theme","dark","size","invisible",3,"siteKey","resolved"],["recaptcha",""],[1,"col-md-12","text-center","mt-3"],["type","submit",1,"btn","btn-primary","col-md-6",3,"disabled"],["class","spinner-border spinner-border-sm","type","button","role","status","aria-hidden","true",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/"],["role","alert",1,"col-md-12","alert","alert-danger"],[1,"invalid-feedback"],["type","button","role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,t){if(1&o){const s=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){e.CHM(s);const d=e.MAs(10);return e.KtG(t.loading||d.execute())}),e.YNc(3,A,2,1,"div",3),e.TgZ(4,"div",4)(5,"label"),e._uU(6,"New Password"),e.qZA(),e._UZ(7,"input",5),e.YNc(8,k,2,1,"div",6),e.qZA(),e.TgZ(9,"re-captcha",7,8),e.NdJ("resolved",function(d){return d&&t.submit(d)}),e.qZA(),e.TgZ(11,"div",9)(12,"button",10),e.YNc(13,q,1,0,"span",11),e._uU(14," Update password "),e.qZA()()(),e.TgZ(15,"div",12)(16,"a",13),e._uU(17,"Back to login"),e.qZA()()()()}if(2&o){let s,i;e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(),e.Q6J("ngIf",t.formErrorMessage),e.xp6(4),e.Q6J("ngClass",e.VKq(7,Q,(null==(s=t.form.get("password"))?null:s.invalid)&&((null==(s=t.form.get("password"))?null:s.dirty)||(null==(s=t.form.get("password"))?null:s.touched)))),e.xp6(),e.Q6J("ngIf",null==(i=t.form.get("password"))||null==i.errors?null:i.errors.serverError),e.xp6(),e.Q6J("siteKey",t.environment.recaptchaKey),e.xp6(3),e.Q6J("disabled",t.loading),e.xp6(),e.Q6J("ngIf",t.loading)}},dependencies:[u.mk,u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,c.rH,p.wT],encapsulation:2})}return r})()}];let Y=(()=>{class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=e.oAB({type:r});static \u0275inj=e.cJS({imports:[u.ez,w.m,c.Bz.forChild(S),p.lQ,p.a,f.ZX]})}return r})()}}]);