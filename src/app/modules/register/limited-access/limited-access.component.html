<div class="col-md-12 mt-5">
  <div class="col-md-12 alert alert-danger" role="alert" *ngIf="formErrorMessage">
    {{ formErrorMessage }}
  </div>
  <form [formGroup]="limitedAccessForm">
    <label>This website is a work in progress, to create an account, please enter the magic password below</label>
    <div class="input-group" [ngClass]="{ 'is-invalid': limitedAccessForm.get('password').hasError('serverError') }">
      <input
        type="password"
        class="form-control"
        placeholder="Limited password"
        aria-label="Limited password"
        aria-describedby="button-addon2"
        [ngClass]="{ 'is-invalid': limitedAccessForm.get('password').hasError('serverError') }"
        formControlName="password"
      />
    </div>
    <div
      class="invalid-feedback"
      *ngIf="limitedAccessForm.get('password').hasError('serverError') || limitedAccessError"
    >
      <ng-container *ngFor="let error of limitedAccessForm.get('password').getError('serverError')">
        {{ error }}
      </ng-container>
      <ng-container *ngFor="let error of limitedAccessError">
        {{ error }}
      </ng-container>
    </div>
    <re-captcha
      class="text-center"
      #recaptchaPassword
      [siteKey]="environment.recaptchaKey"
      (resolved)="$event && testLimitedAccessPassword($event)"
      theme="dark"
      size="invisible"
    ></re-captcha>
    <div class="col-md-12 text-center mt-3">
      <button
        type="button"
        class="btn btn-primary col-md-6"
        [disabled]="limitedAccessLoading"
        (click)="limitedAccessLoading || recaptchaPassword.execute()"
      >
        <span
          class="spinner-border spinner-border-sm"
          role="status"
          aria-hidden="true"
          *ngIf="limitedAccessLoading"
        ></span>
        Enter
      </button>
    </div>
    <div class="col-md-12 text-center mt-3">
      <a routerLink="/login">Come back to login</a>
    </div>
  </form>
</div>
