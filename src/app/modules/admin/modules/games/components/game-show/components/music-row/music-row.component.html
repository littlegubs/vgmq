<ng-container *ngIf="!edit; else editMusic">
  <th scope="row">{{ gameMusic.music.title }}</th>
  <td>{{ gameMusic.music.artist }}</td>
</ng-container>
<ng-template #editMusic>
  <ng-container [formGroup]="formGroup">
    <th scope="row">
      <input formControlName="title" [ngClass]="{ 'is-invalid': title.invalid && (title.dirty || title.touched) }" />
      <div *ngIf="title.errors" class="invalid-feedback">
        <ng-container *ngIf="title.errors.required"> title cannot be empty </ng-container>
        <ng-container *ngIf="title.errors.serverError">
          {{ title.errors.serverError }}
        </ng-container>
      </div>
    </th>
    <td><input formControlName="artist" /></td>
  </ng-container>
</ng-template>
<td>{{ duration | date: 'mm:ss' }}</td>
<td>{{ gameMusic.guessAccuracy || '-' }}</td>
<td>{{ gameMusic.playNumber }}</td>
<td class="row justify-content-end">
  <ng-container *ngIf="loading; else musicRowButtons">
    <div class="spinner-border text-primary" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </ng-container>
  <ng-template #musicRowButtons>
    <button *ngIf="!src" class="btn btn-sm btn-primary col" (click)="listen()">
      <i class="fa fa-play"></i>
      <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" *ngIf="listenLoading"></span>
    </button>
    <audio *ngIf="src" [src]="src" controls></audio>
    <ng-container *ngIf="!edit; else editMusicButtons">
      <button class="btn btn-sm btn-info col" (click)="createFormGroup()">
        <i class="fa-solid fa-pen-to-square"></i>
      </button>
      <button class="btn btn-sm btn-danger col" (click)="delete()"><i class="fa-solid fa-trash"></i></button>
      <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item>
          <mat-icon>add</mat-icon>
          <span>Add to a game</span>
        </button>
      </mat-menu>
    </ng-container>
    <ng-template #editMusicButtons>
      <button class="btn btn-sm btn-success" (click)="save()">save</button>
      <button class="btn btn-sm btn-danger" (click)="cancel()">cancel</button>
    </ng-template>
  </ng-template>
</td>
