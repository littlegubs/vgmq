"use strict";(self.webpackChunkvgmq=self.webpackChunkvgmq||[]).push([[320],{4320:(zt,E,r)=>{r.r(E),r.d(E,{LobbyModule:()=>Pt});var d=r(9808),e=r(5e3),u=r(3075),S=(()=>{return(i=S||(S={})).Host="host",i.Player="player",i.Spectator="spectator",S;var i})(),C=r(8720),k=r(4100),x=r(7282),I=r(1135),B=r(263);let v=(()=>{class i{constructor(t,s){this.authService=t,this.router=s,this.usersBehaviorSubject=new I.X(null),this.meBehaviorSubject=new I.X(null),this.lobbyBehaviorSubject=new I.X(null),this.currentLobbyMusicIdBehaviorSubject=new I.X(null),this.currentLobbyMusicAnswerBehaviorSubject=new I.X(null),this.lobby=this.lobbyBehaviorSubject.asObservable(),this.users=this.usersBehaviorSubject.asObservable(),this.me=this.meBehaviorSubject.asObservable(),this.currentLobbyMusicId=this.currentLobbyMusicIdBehaviorSubject.asObservable(),this.currentLobbyMusicAnswer=this.currentLobbyMusicAnswerBehaviorSubject.asObservable()}disconnect(){this.lobbyBehaviorSubject.next(null),this.usersBehaviorSubject.next(null),this.meBehaviorSubject.next(null),this.currentLobbyMusicIdBehaviorSubject.next(null),this.currentLobbyMusicAnswerBehaviorSubject.next(null)}getLobby(){return this.lobbyBehaviorSubject.getValue()}setLobby(t){this.lobbyBehaviorSubject.next(t)}getUsers(){return this.usersBehaviorSubject.getValue()}setUsers(t){const s=t.find(o=>o.user.username===this.authService.decodeJwt().username);void 0===s?this.router.navigate(["/"]):(this.usersBehaviorSubject.next(t),this.meBehaviorSubject.next(s))}getCurrentLobbyMusicId(){return this.currentLobbyMusicIdBehaviorSubject.getValue()}setCurrentLobbyMusicId(t){this.currentLobbyMusicIdBehaviorSubject.next(t)}getCurrentLobbyMusicAnswer(){return this.currentLobbyMusicAnswerBehaviorSubject.getValue()}setCurrentLobbyMusicAnswer(t){this.currentLobbyMusicAnswerBehaviorSubject.next(t)}handleLobbyUserAnswer(t){const s=this.getUsers(),o=s.findIndex(a=>a.user.username===t.user.username);-1!==o&&(s[o]=t),this.setUsers(s)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(B.e),e.LFG(k.F0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function z(i,n){if(1&i&&(e.TgZ(0,"button",4),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.lobby?"Save":"Create")}}let U=(()=>{class i{constructor(t,s,o,a,l,h){this.fb=t,this.lobbyHttpService=s,this.router=o,this.route=a,this.socket=l,this.lobbyStore=h,this.userCanEdit=!0,this.subscriptions=[]}ngOnInit(){var t,s;this.lobby=this.lobbyStore.getLobby(),this.lobbyForm=this.fb.group({name:[null===(t=this.lobby)||void 0===t?void 0:t.name,u.kI.required.bind(this)],password:[null===(s=this.lobby)||void 0===s?void 0:s.password]}),this.lobby&&(this.subscriptions=[this.lobbyStore.lobby.subscribe(o=>{var a,l;this.lobby=o,this.lobbyForm.patchValue({name:this.lobby.name,...(null===(a=this.lobby)||void 0===a?void 0:a.password)&&{password:null===(l=this.lobby)||void 0===l?void 0:l.password}})}),this.lobbyStore.me.subscribe(o=>{null!==o&&(this.userCanEdit=o.role===S.Host,this.userCanEdit?this.lobbyForm.enable():this.lobbyForm.disable())})])}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}submit(){null===this.lobby?this.lobbyHttpService.create({name:this.lobbyForm.get("name").value,password:this.lobbyForm.get("password").value}).subscribe(t=>{this.router.navigate([`/lobby/${t.code}`])}):this.lobbyHttpService.update(this.lobby.code,{name:this.lobbyForm.get("name").value,password:this.lobbyForm.get("password").value}).subscribe(t=>{console.log(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.qu),e.Y36(C.Y),e.Y36(k.F0),e.Y36(k.gz),e.Y36(x.i),e.Y36(v))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lobby-config"]],decls:4,vars:2,consts:[[3,"formGroup","ngSubmit"],["type","text","formControlName","name","placeholder","Room name","required","required"],["type","text","formControlName","password","placeholder","Password (keep empty if public)"],["type","submit",4,"ngIf"],["type","submit"]],template:function(t,s){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return!s.userCanEdit||s.submit()}),e._UZ(1,"input",1)(2,"input",2),e.YNc(3,z,2,1,"button",3),e.qZA()),2&t&&(e.Q6J("formGroup",s.lobbyForm),e.xp6(3),e.Q6J("ngIf",s.userCanEdit))},directives:[u._Y,u.JL,u.sg,u.Fj,u.JJ,u.u,u.Q7,d.O5],encapsulation:2}),i})(),O=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create"]],decls:1,vars:0,template:function(t,s){1&t&&e._UZ(0,"app-lobby-config")},directives:[U],encapsulation:2}),i})();var H=r(7288),y=r(5594),Z=r(9150),J=r(6217),N=r(8966);function V(i,n){1&i&&(e.ynx(0),e._uU(1,"(loading)"),e.BQk())}function j(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",1),e.NdJ("click",function(){return e.CHM(t),e.oxw().play()}),e._uU(2," Play "),e.YNc(3,V,2,0,"ng-container",0),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.lobby.status===t.lobbyStatus.Loading)}}let R=(()=>{class i{constructor(t,s,o){this.lobbyHttpService=t,this.lobbyStore=s,this.socket=o,this.lobbyUsersRoles=S,this.lobbyStatus=y.D,this.subscriptions=[]}ngOnInit(){this.subscriptions=[this.lobbyStore.lobby.subscribe(t=>{this.lobby=t}),this.lobbyStore.me.subscribe(t=>{null!==t&&(this.role=t.role)})]}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}play(){this.socket.emit("play",this.lobby.code)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.Y),e.Y36(v),e.Y36(x.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-button-play"]],decls:1,vars:1,consts:[[4,"ngIf"],["type","button",3,"click"]],template:function(t,s){1&t&&e.YNc(0,j,4,1,"ng-container",0),2&t&&e.Q6J("ngIf",s.role===s.lobbyUsersRoles.Host)},directives:[d.O5],encapsulation:2}),i})(),Q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lobby-waiting"]],decls:2,vars:0,template:function(t,s){1&t&&e._UZ(0,"app-lobby-config")(1,"app-button-play")},directives:[U,R],encapsulation:2}),i})();var $=r(2340),X=r(520);let G=(()=>{class i{constructor(t){this.http=t,this.apiEndpoint=$.N.apiEndpoint}get(t){return this.http.get(`${this.apiEndpoint}/lobby-music/${t}`,{responseType:"blob"})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(X.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var w=r(508),f=r(3191),p=r(1159),W=r(6360),K=r(925),q=r(727),tt=r(8255),et=r(226);const it=["sliderWrapper"],b=(0,K.i$)({passive:!1}),at={provide:u.JU,useExisting:(0,e.Gpc)(()=>D),multi:!0};class lt{}const ct=(0,w.sb)((0,w.pj)((0,w.Id)(class{constructor(i){this._elementRef=i}}),"accent"));let D=(()=>{class i extends ct{constructor(t,s,o,a,l,h,g,_){super(t),this._focusMonitor=s,this._changeDetectorRef=o,this._dir=a,this._ngZone=h,this._animationMode=_,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new e.vpe,this.input=new e.vpe,this.valueChange=new e.vpe,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=q.w0.EMPTY,this._pointerDown=c=>{this.disabled||this._isSliding||!M(c)&&0!==c.button||this._ngZone.run(()=>{this._touchId=M(c)?function ut(i,n){for(let t=0;t<i.touches.length;t++){const s=i.touches[t].target;if(n===s||n.contains(s))return i.touches[t].identifier}}(c,this._elementRef.nativeElement):void 0;const T=F(c,this._touchId);if(T){const L=this.value;this._isSliding="pointer",this._lastPointerEvent=c,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(c),this._focusHostElement(),this._updateValueFromPosition(T),this._valueOnSlideStart=L,c.cancelable&&c.preventDefault(),L!=this.value&&this._emitInputEvent()}})},this._pointerMove=c=>{if("pointer"===this._isSliding){const T=F(c,this._touchId);if(T){c.preventDefault();const L=this.value;this._lastPointerEvent=c,this._updateValueFromPosition(T),L!=this.value&&this._emitInputEvent()}}},this._pointerUp=c=>{"pointer"===this._isSliding&&(!M(c)||"number"!=typeof this._touchId||A(c.changedTouches,this._touchId))&&(c.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=g,this.tabIndex=parseInt(l)||0,h.runOutsideAngular(()=>{const c=t.nativeElement;c.addEventListener("mousedown",this._pointerDown,b),c.addEventListener("touchstart",this._pointerDown,b)})}get invert(){return this._invert}set invert(t){this._invert=(0,f.Ig)(t)}get max(){return this._max}set max(t){this._max=(0,f.su)(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=(0,f.su)(t,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=(0,f.su)(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=(0,f.Ig)(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?(0,f.su)(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let s=(0,f.su)(t,0);this._roundToDecimal&&s!==this.min&&s!==this.max&&(s=parseFloat(s.toFixed(this._roundToDecimal))),this._value=s,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=(0,f.Ig)(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const s=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${s})`}}_getTrackFillStyles(){const t=this.percent,o=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${o})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,h={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const g=this._shouldInvertAxis();let _;_=this.vertical?g?"Bottom":"Top":g?"Right":"Left",h[`padding${_}`]=`${this._getThumbGap()}px`}return h}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,b),t.removeEventListener("touchstart",this._pointerDown,b),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||(0,p.Vb)(t)||this._isSliding&&"keyboard"!==this._isSliding)return;const s=this.value;switch(t.keyCode){case p.Ku:this._increment(10);break;case p.VM:this._increment(-10);break;case p.uR:this.value=this.max;break;case p.Sd:this.value=this.min;break;case p.oh:this._increment("rtl"==this._getDirection()?1:-1);break;case p.LH:this._increment(1);break;case p.SV:this._increment("rtl"==this._getDirection()?-1:1);break;case p.JH:this._increment(-1);break;default:return}s!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",t.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const s=this._document,o=M(t),l=o?"touchend":"mouseup";s.addEventListener(o?"touchmove":"mousemove",this._pointerMove,b),s.addEventListener(l,this._pointerUp,b),o&&s.addEventListener("touchcancel",this._pointerUp,b);const h=this._getWindow();void 0!==h&&h&&h.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,b),t.removeEventListener("mouseup",this._pointerUp,b),t.removeEventListener("touchmove",this._pointerMove,b),t.removeEventListener("touchend",this._pointerUp,b),t.removeEventListener("touchcancel",this._pointerUp,b);const s=this._getWindow();void 0!==s&&s&&s.removeEventListener("blur",this._windowBlur)}_increment(t){const s=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(s+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let l=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(l=1-l),0===l)this.value=this.min;else if(1===l)this.value=this.max;else{const h=this._calculateValue(l),g=Math.round((h-this.min)/this.step)*this.step+this.min;this.value=this._clamp(g,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let t;if("auto"==this.tickInterval){let s=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;t=Math.ceil(30/(s*this.step/(this.max-this.min)))*this.step/s}else t=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=Y(t)?t:0}_createChangeEvent(t=this.value){let s=new lt;return s.source=this,s.value=t,s}_calculatePercentage(t){const s=((t||0)-this.min)/(this.max-this.min);return Y(s)?s:0}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,s=0,o=1){return Math.max(s,Math.min(t,o))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(tt.tE),e.Y36(e.sBO),e.Y36(et.Is,8),e.$8M("tabindex"),e.Y36(e.R0b),e.Y36(d.K0),e.Y36(W.Qb,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-slider"]],viewQuery:function(t,s){if(1&t&&e.Gf(it,5),2&t){let o;e.iGM(o=e.CRH())&&(s._sliderWrapper=o.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,s){1&t&&e.NdJ("focus",function(){return s._onFocus()})("blur",function(){return s._onBlur()})("keydown",function(a){return s._onKeydown(a)})("keyup",function(){return s._onKeyup()})("mouseenter",function(){return s._onMouseenter()})("selectstart",function(a){return a.preventDefault()}),2&t&&(e.Ikx("tabIndex",s.tabIndex),e.uIk("aria-disabled",s.disabled)("aria-valuemax",s.max)("aria-valuemin",s.min)("aria-valuenow",s.value)("aria-valuetext",null==s.valueText?s.displayValue:s.valueText)("aria-orientation",s.vertical?"vertical":"horizontal"),e.ekj("mat-slider-disabled",s.disabled)("mat-slider-has-ticks",s.tickInterval)("mat-slider-horizontal",!s.vertical)("mat-slider-axis-inverted",s._shouldInvertAxis())("mat-slider-invert-mouse-coords",s._shouldInvertMouseCoords())("mat-slider-sliding",s._isSliding)("mat-slider-thumb-label-showing",s.thumbLabel)("mat-slider-vertical",s.vertical)("mat-slider-min-value",s._isMinValue())("mat-slider-hide-last-tick",s.disabled||s._isMinValue()&&s._getThumbGap()&&s._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===s._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[e._Bn([at]),e.qOj],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0,1)(2,"div",2),e._UZ(3,"div",3)(4,"div",4),e.qZA(),e.TgZ(5,"div",5),e._UZ(6,"div",6),e.qZA(),e.TgZ(7,"div",7),e._UZ(8,"div",8)(9,"div",9),e.TgZ(10,"div",10)(11,"span",11),e._uU(12),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("ngStyle",s._getTrackBackgroundStyles()),e.xp6(1),e.Q6J("ngStyle",s._getTrackFillStyles()),e.xp6(1),e.Q6J("ngStyle",s._getTicksContainerStyles()),e.xp6(1),e.Q6J("ngStyle",s._getTicksStyles()),e.xp6(1),e.Q6J("ngStyle",s._getThumbContainerStyles()),e.xp6(5),e.Oqu(s.displayValue))},directives:[d.PC],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:-webkit-grabbing;cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:-webkit-grab;cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n'],encapsulation:2,changeDetection:0}),i})();function Y(i){return!isNaN(i)&&isFinite(i)}function M(i){return"t"===i.type[0]}function F(i,n){let t;return t=M(i)?"number"==typeof n?A(i.touches,n)||A(i.changedTouches,n):i.touches[0]||i.changedTouches[0]:i,t?{x:t.clientX,y:t.clientY}:void 0}function A(i,n){for(let t=0;t<i.length;t++)if(i[t].identifier===n)return i[t]}let ht=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,w.BQ],w.BQ]}),i})(),dt=(()=>{class i{constructor(t,s,o){this.lobbyStore=t,this.lobbyMusicHttpService=s,this.socket=o,this.subscriptions=[]}ngOnInit(){this.audio=new Audio,this.audio.volume=.5,this.subscriptions=[this.lobbyStore.currentLobbyMusicId.subscribe(t=>{null!==t?this.lobbyMusicHttpService.get(t).subscribe(s=>{const o=new FileReader;o.onload=a=>{const l=a.target.result;"string"==typeof l&&(this.audio.src=l,this.audio.play())},o.readAsDataURL(s)}):this.audio.pause()}),this.lobbyStore.lobby.subscribe(t=>{t&&t.status!==y.D.PlayingMusic&&this.audio.pause()})]}ngOnDestroy(){this.audio.pause(),this.audio=void 0,this.subscriptions.forEach(t=>t.unsubscribe()),console.log("yoo")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v),e.Y36(G),e.Y36(x.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lobby-audio-player"]],decls:1,vars:4,consts:[["aria-label","unit(s)",3,"ngModel","min","max","step","ngModelChange"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-slider",0),e.NdJ("ngModelChange",function(a){return s.audio.volume=a}),e.qZA()),2&t&&e.Q6J("ngModel",s.audio.volume)("min",0)("max",1)("step",.01)},directives:[D,u.JJ,u.On],encapsulation:2}),i})(),bt=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lobby-countdown"]],decls:2,vars:3,template:function(t,s){1&t&&(e._uU(0),e.ALo(1,"async")),2&t&&e.hij("",e.lcZ(1,1,s.counter),"\n")},pipes:[d.Ov],encapsulation:2}),i})();var mt=r(9094),pt=r(9300),ft=r(3900),gt=r(9743),vt=r(7322),yt=r(7531),P=r(3092);function _t(i,n){if(1&i&&(e.TgZ(0,"mat-option",6),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let St=(()=>{class i{constructor(t,s,o,a){this.lobbyHttpService=t,this.lobbyStore=s,this.gameHttpService=o,this.socket=a,this.myControl=new u.NI,this.lobbyStatuses=y.D,this.subscriptions=[]}ngOnInit(){this.subscriptions=[this.lobbyStore.lobby.subscribe(t=>{null!==t&&(t.status===y.D.AnswerReveal?this.myControl.disable():(this.myControl.enable(),this.myControl.setValue(""))),this.lobby=t}),this.lobbyStore.me.subscribe(t=>{null!==t&&null!==t.correctAnswer&&(this.myControl.setValue(null),!0===t.correctAnswer&&this.myControl.disable())})],this.gameNames=this.myControl.valueChanges.pipe((0,mt.x)(),(0,pt.h)(t=>!!t),(0,ft.w)(t=>this.gameHttpService.getNames(t)))}submit(){this.socket.emit("answer",this.myControl.value)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.Y),e.Y36(v),e.Y36(gt.q),e.Y36(x.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lobby-answer"]],decls:8,vars:9,consts:[[3,"ngSubmit"],[2,"width","100%"],["type","text","placeholder","Pick one","aria-label","Number","matInput","",3,"formControl","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,s){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return s.lobby.status===s.lobbyStatuses.AnswerReveal||s.submit()}),e.TgZ(1,"mat-form-field",1),e._UZ(2,"input",2),e.TgZ(3,"mat-autocomplete",3,4),e.NdJ("optionSelected",function(){return s.lobby.status===s.lobbyStatuses.AnswerReveal||s.submit()}),e.YNc(5,_t,2,2,"mat-option",5),e.ALo(6,"slice"),e.ALo(7,"async"),e.qZA()()()),2&t){const o=e.MAs(4);e.xp6(2),e.Q6J("formControl",s.myControl)("matAutocomplete",o),e.xp6(3),e.Q6J("ngForOf",e.Dn7(6,3,e.lcZ(7,7,s.gameNames),0,30))}},directives:[u._Y,u.JL,u.F,vt.KE,yt.Nt,u.Fj,P.ZL,u.JJ,u.oH,P.XC,d.sg,w.ey],pipes:[d.OU,d.Ov],encapsulation:2}),i})(),kt=(()=>{class i{constructor(t){this.lobbyStore=t,this.subscriptions=[]}ngOnInit(){this.subscriptions=[this.lobbyStore.currentLobbyMusicAnswer.subscribe(t=>{this.answer=t}),this.lobbyStore.lobby.subscribe(t=>{this.lobby=t,t.status!==y.D.AnswerReveal&&(this.answer=null)})]}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lobby-center-container"]],decls:4,vars:3,template:function(t,s){1&t&&(e._uU(0),e._UZ(1,"app-lobby-audio-player")(2,"app-lobby-countdown")(3,"app-lobby-answer")),2&t&&e.lnq("music ",null==s.lobby?null:s.lobby.currentLobbyMusicPosition,"/",null==s.lobby?null:s.lobby.lobbyMusics," ",s.answer," ")},directives:[dt,bt,St],encapsulation:2}),i})(),wt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lobby-playing"]],decls:1,vars:0,template:function(t,s){1&t&&e._UZ(0,"app-lobby-center-container")},directives:[kt],encapsulation:2}),i})();var m=r(1777);function Ct(i,n){1&i&&(e.ynx(0),e._uU(1,"gg"),e.BQk())}function xt(i,n){1&i&&e._UZ(0,"i",5)}function It(i,n){1&i&&e._UZ(0,"i",6)}function Mt(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij("-> ",t.answer,"")}}const Tt=function(i){return{"text-muted":i}};function Lt(i,n){if(1&i&&(e.TgZ(0,"div")(1,"span",2),e.YNc(2,xt,1,0,"i",3),e.YNc(3,It,1,0,"i",4),e._uU(4),e.YNc(5,Mt,2,1,"span",0),e.qZA()()),2&i){const t=n.$implicit,s=e.oxw();e.xp6(1),e.Q6J("@userStatus",s.getStatusClass(t))("ngClass",e.VKq(6,Tt,t.disconnected||t.role===s.lobbyUserRoles.Spectator)),e.xp6(1),e.Q6J("ngIf",t.role===s.lobbyUserRoles.Host),e.xp6(1),e.Q6J("ngIf",t.role===s.lobbyUserRoles.Spectator&&!t.disconnected),e.xp6(1),e.hij(" ",t.user.username," "),e.xp6(1),e.Q6J("ngIf",t.answer)}}let At=(()=>{class i{constructor(t){this.lobbyStore=t,this.showRank=!1,this.lobbyStatuses=y.D,this.lobbyUserRoles=S,this.subscriptions=[]}ngOnInit(){this.subscriptions=[this.lobbyStore.users.subscribe(t=>{this.users=t}),this.lobbyStore.lobby.subscribe(t=>{this.lobbyStatus=t.status})]}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}getStatusClass(t){return!1===t.correctAnswer?"wrongAnswer":!0===t.correctAnswer?"correctAnswer":"default"}animationDone(t){console.log(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lobby-users"]],inputs:{showRank:"showRank"},decls:3,vars:2,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],["class","fa fa-star mr-1",4,"ngIf"],["class","fa fa-ghost mr-1",4,"ngIf"],[1,"fa","fa-star","mr-1"],[1,"fa","fa-ghost","mr-1"]],template:function(t,s){1&t&&(e.ynx(0),e.YNc(1,Ct,2,0,"ng-container",0),e.YNc(2,Lt,6,8,"div",1),e.BQk()),2&t&&(e.xp6(1),e.Q6J("ngIf",s.showRank),e.xp6(1),e.Q6J("ngForOf",s.users))},directives:[d.O5,d.sg,d.mk],encapsulation:2,data:{animation:[(0,m.X$)("userStatus",[(0,m.SB)("wrongAnswer",(0,m.oB)({color:"white"})),(0,m.SB)("correctAnswer",(0,m.oB)({color:"green"})),(0,m.SB)("default",(0,m.oB)({color:"white"})),(0,m.eR)("* => wrongAnswer",[(0,m.jt)("1s",(0,m.F4)([(0,m.oB)({color:"red",offset:0}),(0,m.oB)({color:"white",offset:.75})]))])])]}}),i})();function Et(i,n){1&i&&(e.ynx(0),e._UZ(1,"app-lobby-waiting"),e.BQk())}function Bt(i,n){1&i&&(e.ynx(0),e._uU(1," Loading musics "),e.BQk())}function Ut(i,n){1&i&&(e.ynx(0),e._UZ(1,"app-lobby-playing"),e.BQk())}function Dt(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",2),e.NdJ("click",function(){return e.CHM(t),e.oxw().leave()}),e._uU(2,"Leave"),e.qZA(),e.YNc(3,Et,2,0,"ng-container",3),e.YNc(4,Bt,2,0,"ng-container",3),e.YNc(5,Ut,2,0,"ng-container",3),e._UZ(6,"app-lobby-users",4),e.BQk()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.lobby.status===t.lobbyStatuses.Waiting),e.xp6(1),e.Q6J("ngIf",t.lobby.status===t.lobbyStatuses.Loading),e.xp6(1),e.Q6J("ngIf",t.lobbyService.isPLaying(t.lobby)),e.xp6(1),e.Q6J("showRank",t.lobby.status===t.lobbyStatuses.FinalStanding)}}function Yt(i,n){1&i&&e._uU(0,"loading")}const Ft=[{path:"create",component:O},{path:":code",component:(()=>{class i{constructor(t,s,o,a,l,h,g,_){this.lobbyHttpService=t,this.lobbyService=s,this.router=o,this.route=a,this.dialog=l,this.socket=h,this.authService=g,this.lobbyStore=_,this.lobbyStatuses=y.D,this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.lobbyStore.disconnect(),this.lobbyHttpService.leave().subscribe(()=>{})}ngOnInit(){this.subscriptions=[this.socket.fromEvent("UnauthorizedException").subscribe(()=>{this.socket.disconnect(),this.authService.refreshToken().subscribe(()=>{this.socket.connect(),this.socket.emitWithoutSaving("reconnect",this.lobbyCode),this.socket.emit(this.socket.lastTriedOutputEventName,...this.socket.lastTriedOutputArgs)})}),this.socket.fromEvent("MissingPasswordException").subscribe(()=>{this.dialog.open(Z.q,{data:this.lobbyCode}).afterClosed().subscribe(()=>{void 0===this.lobby&&this.router.navigate(["/"])})}),this.socket.fromEvent("lobbyJoined").subscribe(t=>{this.lobby=t,this.lobbyStore.setLobby(this.lobby)}),this.socket.fromEvent("lobbyUsers").subscribe(t=>{console.log(t),this.lobbyStore.setUsers(t)}),this.socket.fromEvent("lobby").subscribe(t=>{this.lobby=t,this.lobbyStore.setLobby(this.lobby)}),this.socket.fromEvent("lobbyMusic").subscribe(t=>{this.lobbyStore.setCurrentLobbyMusicId(t)}),this.socket.fromEvent("lobbyAnswer").subscribe(t=>{this.lobbyStore.setCurrentLobbyMusicAnswer(t)}),this.socket.fromEvent("lobbyUserAnswer").subscribe(t=>{this.lobbyStore.handleLobbyUserAnswer(t)}),this.socket.fromEvent("lobbyClosed").subscribe(t=>{this.router.navigate(["/"])}),this.socket.fromEvent("lobbyReset").subscribe(t=>{this.lobby=t,this.lobbyStore.setLobby(this.lobby),this.lobbyStore.setCurrentLobbyMusicId(null),this.lobbyStore.setCurrentLobbyMusicAnswer(null)}),this.route.paramMap.subscribe(t=>{this.lobbyCode=t.get("code")})],this.lobbyService.join(this.lobbyCode)}leave(){this.lobbyHttpService.leave().subscribe(()=>{this.router.navigate(["/"])})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.Y),e.Y36(J.V),e.Y36(k.F0),e.Y36(k.gz),e.Y36(N.uw),e.Y36(x.i),e.Y36(B.e),e.Y36(v))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lobby"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],["type","button",1,"btn","btn-primary-reverse",3,"click"],[4,"ngIf"],[3,"showRank"]],template:function(t,s){if(1&t&&(e.YNc(0,Dt,7,4,"ng-container",0),e.YNc(1,Yt,1,0,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("ngIf",s.lobby)("ngIfElse",o)}},directives:[d.O5,Q,wt,At],encapsulation:2}),i})()},{path:"**",redirectTo:"create"}];let Pt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[C.Y],imports:[[d.ez,k.Bz.forChild(Ft),H.m,ht]]}),i})()}}]);