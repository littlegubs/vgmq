"use strict";(self.webpackChunkvgmq=self.webpackChunkvgmq||[]).push([[732],{1732:(V,v,c)=>{c.r(v),c.d(v,{RegisterModule:()=>z});var l=c(9808),m=c(4521),b=c(3149),n=c(3075),u=c(8746),_=c(2340),e=c(5e3),C=c(8966),g=c(4857),p=c(3290);const y=["recaptchaPassword"];function T(t,s){if(1&t&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.hij(" ",r.formErrorMessage," ")}}function Z(t,s){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=s.$implicit;e.xp6(1),e.hij(" ",r," ")}}function w(t,s){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=s.$implicit;e.xp6(1),e.hij(" ",r," ")}}function k(t,s){if(1&t&&(e.TgZ(0,"div",13),e.YNc(1,Z,2,1,"ng-container",14),e.YNc(2,w,2,1,"ng-container",14),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.limitedAccessForm.get("password").getError("serverError")),e.xp6(1),e.Q6J("ngForOf",r.limitedAccessError)}}function Q(t,s){1&t&&e._UZ(0,"span",15)}const A=function(t){return{"is-invalid":t}};let J=(()=>{class t{constructor(r,i){this.dialogRef=r,this.authHttpService=i,this.limitedAccessLoading=!1,this.limitedAccessForm=new n.cw({password:new n.NI("",n.kI.required.bind(this))}),this.environment=_.N}testLimitedAccessPassword(r){this.limitedAccessError=void 0,this.formErrorMessage=void 0,this.limitedAccessLoading=!0,this.authHttpService.limitedAccessPassword(this.limitedAccessForm.get("password").value,r).pipe((0,u.x)(()=>this.limitedAccessLoading=!1)).subscribe({next:()=>{this.dialogRef.close(!0)},error:i=>{Array.isArray(i.message)?i.message.map(o=>{if("string"!=typeof o){const a=this.limitedAccessForm.get(o.property);null==a||a.markAsTouched(),null==a||a.setErrors({serverError:o.errors})}}):this.formErrorMessage=i.message,this.recaptchaPasswordComponent.reset()}})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(C.so),e.Y36(g.C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-limited-access"]],viewQuery:function(r,i){if(1&r&&e.Gf(y,5),2&r){let o;e.iGM(o=e.CRH())&&(i.recaptchaPasswordComponent=o.first)}},decls:17,vars:12,consts:[[1,"col-md-12","mt-5"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"input-group",3,"ngClass"],["type","password","placeholder","Limited password","aria-label","Limited password","aria-describedby","button-addon2","formControlName","password",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["theme","dark","size","invisible",1,"text-center",3,"siteKey","resolved"],["recaptchaPassword",""],[1,"col-md-12","text-center","mt-3"],["type","submit",1,"btn","btn-primary","col-md-6",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["routerLink","/"],["role","alert",1,"col-md-12","alert","alert-danger"],[1,"invalid-feedback"],[4,"ngFor","ngForOf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(r,i){if(1&r){const o=e.EpF();e.TgZ(0,"div",0),e.YNc(1,T,2,1,"div",1),e.TgZ(2,"form",2),e.NdJ("ngSubmit",function(){e.CHM(o);const d=e.MAs(9);return i.limitedAccessLoading||d.execute()}),e.TgZ(3,"label"),e._uU(4,"This website is a work in progress, to create an account, please enter the magic password below"),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"input",4),e.qZA(),e.YNc(7,k,3,2,"div",5),e.TgZ(8,"re-captcha",6,7),e.NdJ("resolved",function(d){return d&&i.testLimitedAccessPassword(d)}),e.qZA(),e.TgZ(10,"div",8)(11,"button",9),e.YNc(12,Q,1,0,"span",10),e._uU(13," Enter "),e.qZA()(),e.TgZ(14,"div",8)(15,"a",11),e._uU(16,"Come back to login"),e.qZA()()()()}2&r&&(e.xp6(1),e.Q6J("ngIf",i.formErrorMessage),e.xp6(1),e.Q6J("formGroup",i.limitedAccessForm),e.xp6(3),e.Q6J("ngClass",e.VKq(8,A,i.limitedAccessForm.get("password").hasError("serverError"))),e.xp6(1),e.Q6J("ngClass",e.VKq(10,A,i.limitedAccessForm.get("password").hasError("serverError"))),e.xp6(1),e.Q6J("ngIf",i.limitedAccessForm.get("password").hasError("serverError")||i.limitedAccessError),e.xp6(1),e.Q6J("siteKey",i.environment.recaptchaKey),e.xp6(3),e.Q6J("disabled",i.limitedAccessLoading),e.xp6(1),e.Q6J("ngIf",i.limitedAccessLoading))},directives:[l.O5,n._Y,n.JL,n.sg,l.mk,n.Fj,n.JJ,n.u,l.sg,p.wT,m.yS],encapsulation:2}),t})();var I=c(2160),x=c(263),f=c(7261);const L=["recaptcha"];function Y(t,s){if(1&t&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.hij(" ",r.formErrorMessage," ")}}function E(t,s){1&t&&(e.ynx(0),e._uU(1," Username should be at least 4 characters long. "),e.BQk())}function F(t,s){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw(2);e.xp6(1),e.hij(" ",r.username.errors.serverError," ")}}function U(t,s){if(1&t&&(e.TgZ(0,"div",18),e.YNc(1,E,2,0,"ng-container",19),e.YNc(2,F,2,1,"ng-container",19),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.username.errors.minlength),e.xp6(1),e.Q6J("ngIf",r.username.errors.serverError)}}function N(t,s){1&t&&(e.ynx(0),e._uU(1," Please enter a correct email. "),e.BQk())}function R(t,s){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw(2);e.xp6(1),e.hij(" ",r.email.errors.serverError," ")}}function q(t,s){if(1&t&&(e.TgZ(0,"div",18),e.YNc(1,N,2,0,"ng-container",19),e.YNc(2,R,2,1,"ng-container",19),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.email.errors.email),e.xp6(1),e.Q6J("ngIf",r.email.errors.serverError)}}function S(t,s){1&t&&(e.ynx(0),e._uU(1," Password should at least have 3 characters. "),e.BQk())}function M(t,s){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw(2);e.xp6(1),e.hij(" ",r.password.errors.serverError," ")}}function P(t,s){if(1&t&&(e.TgZ(0,"div",18),e.YNc(1,S,2,0,"ng-container",19),e.YNc(2,M,2,1,"ng-container",19),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.password.errors.minlength),e.xp6(1),e.Q6J("ngIf",r.password.errors.serverError)}}function B(t,s){1&t&&e._UZ(0,"span",20)}const h=function(t){return{"is-invalid":t}};function H(t,s){1&t&&(e.TgZ(0,"div",1)(1,"div",2)(2,"span",3),e._uU(3,"Loading..."),e.qZA()()())}const K=[{path:"",component:(()=>{class t{constructor(r,i,o,a,d,O,G){this.fb=r,this.authHttpService=i,this.router=o,this.cookieService=a,this.dialog=d,this.authService=O,this.snackBar=G,this.loading=!1,this.environment=_.N}ngOnInit(){this.signupForm=this.fb.group({username:["",[n.kI.required.bind(this),n.kI.minLength(4)]],email:["",[n.kI.required.bind(this),n.kI.email.bind(this)]],password:["",[n.kI.required.bind(this),n.kI.minLength(3)]]}),this.checkLimitedAccessAllowed()}ngOnDestroy(){this.dialog.closeAll()}registerUser(r){this.loading=!0,this.authHttpService.register(this.signupForm.value,r).pipe((0,u.x)(()=>this.loading=!1)).subscribe({next:()=>{this.signupForm.reset(),this.snackBar.open("Account created! Please check your emails to activate your account",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:1e4}),this.router.navigate(["/"])},error:i=>{i=i.error,Array.isArray(i.message)?i.message.map(o=>{if("string"!=typeof o){const a=this.signupForm.get(o.property);null==a||a.markAsTouched(),null==a||a.setErrors({serverError:o.errors})}}):this.formErrorMessage=i.message,this.recaptchaComponent.reset()}})}get username(){return this.signupForm.get("username")}get email(){return this.signupForm.get("email")}get password(){return this.signupForm.get("password")}checkLimitedAccessAllowed(){this.authHttpService.limitedAccessAllowed().subscribe(r=>{!1===r&&this.dialog.open(J,{disableClose:!0}).afterClosed().subscribe(i=>{void 0!==i&&this.checkLimitedAccessAllowed()})})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(n.qu),e.Y36(g.C),e.Y36(m.F0),e.Y36(I.N),e.Y36(C.uw),e.Y36(x.e),e.Y36(f.ux))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],viewQuery:function(r,i){if(1&r&&e.Gf(L,5),2&r){let o;e.iGM(o=e.CRH())&&(i.recaptchaComponent=o.first)}},decls:36,vars:17,consts:[[1,"form-login",3,"formGroup","ngSubmit"],[1,"h3","mb-3","font-weight-normal","text-center"],[1,"row"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],[1,"col-md-8","offset-md-2"],[1,"form-group"],["type","text","formControlName","username","placeholder","ex : Dark sasuke","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","email","formControlName","email","placeholder","ex : Darksaasuke420@sulfura.com","required","",1,"form-control",3,"ngClass"],["type","password","formControlName","password","placeholder","Password","required","",1,"form-control",3,"ngClass"],["theme","dark","size","invisible",1,"text-center",3,"siteKey","resolved"],["recaptcha",""],[1,"col","text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/",1,"btn","btn-primary"],["role","alert",1,"col-md-12","alert","alert-danger"],[1,"invalid-feedback"],[4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(r,i){if(1&r){const o=e.EpF();e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){e.CHM(o);const d=e.MAs(26);return i.loading||d.execute()}),e.TgZ(1,"h3",1),e._uU(2,"Inscription"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,Y,2,1,"div",3),e.TgZ(5,"div",4)(6,"div",5)(7,"label"),e._uU(8,"Username"),e.qZA(),e._UZ(9,"input",6),e.YNc(10,U,3,2,"div",7),e.qZA()()(),e.TgZ(11,"div",2)(12,"div",4)(13,"div",5)(14,"label"),e._uU(15,"Email address"),e.qZA(),e._UZ(16,"input",8),e.YNc(17,q,3,2,"div",7),e.qZA()()(),e.TgZ(18,"div",2)(19,"div",4)(20,"div",5)(21,"label"),e._uU(22,"Password"),e.qZA(),e._UZ(23,"input",9),e.YNc(24,P,3,2,"div",7),e.qZA()()(),e.TgZ(25,"re-captcha",10,11),e.NdJ("resolved",function(d){return d&&i.registerUser(d)}),e.qZA(),e.TgZ(27,"div",2)(28,"div",12)(29,"button",13),e._uU(30," Sign up "),e.YNc(31,B,1,0,"span",14),e.qZA()()()(),e.TgZ(32,"div",15),e._uU(33," Already have an account ? "),e.TgZ(34,"a",16),e._uU(35,"Login"),e.qZA()()}2&r&&(e.Q6J("formGroup",i.signupForm),e.xp6(4),e.Q6J("ngIf",i.formErrorMessage),e.xp6(5),e.Q6J("ngClass",e.VKq(11,h,i.username.invalid&&(i.username.dirty||i.username.touched))),e.xp6(1),e.Q6J("ngIf",i.username.errors),e.xp6(6),e.Q6J("ngClass",e.VKq(13,h,i.email.invalid&&(i.email.dirty||i.email.touched))),e.xp6(1),e.Q6J("ngIf",i.email.errors),e.xp6(6),e.Q6J("ngClass",e.VKq(15,h,i.password.invalid&&(i.password.dirty||i.password.touched))),e.xp6(1),e.Q6J("ngIf",i.password.errors),e.xp6(1),e.Q6J("siteKey",i.environment.recaptchaKey),e.xp6(4),e.Q6J("disabled",i.signupForm.invalid||i.loading),e.xp6(2),e.Q6J("ngIf",i.loading))},directives:[n._Y,n.JL,n.sg,l.O5,n.Fj,n.JJ,n.u,n.Q7,l.mk,p.wT,m.yS],encapsulation:2}),t})()},{path:":token",component:(()=>{class t{constructor(r,i,o,a,d){this.authHttpService=r,this.authService=i,this.route=o,this.router=a,this.snackBar=d,this.loading=!1}ngOnInit(){this.loading=!0,this.route.paramMap.subscribe(r=>{this.authHttpService.confirm(r.get("token")).pipe((0,u.x)(()=>this.loading=!1)).subscribe({next:i=>{this.authService.setAccessTokenCookie(i.accessToken),this.authService.setRefreshTokenCookie(i.refreshToken),this.snackBar.open("Account activated!",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:5e3})},error:i=>{400===i.status&&this.snackBar.open("account already activated",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"danger",duration:5e3}),this.router.navigate(["/"])}})})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(g.C),e.Y36(x.e),e.Y36(m.gz),e.Y36(m.F0),e.Y36(f.ux))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-confirmation"]],decls:1,vars:1,consts:[["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(r,i){1&r&&e.YNc(0,H,4,0,"div",0),2&r&&e.Q6J("ngIf",i.loading)},directives:[l.O5],encapsulation:2}),t})()}];let z=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,b.m,m.Bz.forChild(K),p.lQ,p.a,f.ZX]]}),t})()}}]);