(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{g7DB:function(e,s,i){"use strict";i.r(s),i.d(s,"LoginModule",(function(){return N}));var t=i("ofXK"),r=i("tyNb"),o=i("3Pt+"),c=i("nYR2"),n=i("fXoL"),b=i("ZEaD");function d(e,s){if(1&e&&(n.Ob(0,"div",22),n.sc(1),n.Nb()),2&e){const e=n.Zb();n.zb(1),n.uc(" ",e.formErrorMessage," ")}}function a(e,s){1&e&&n.Kb(0,"span",23)}function l(e,s){1&e&&n.Kb(0,"span",23)}function m(e,s){if(1&e&&(n.Ob(0,"div",31),n.sc(1),n.Nb()),2&e){const e=n.Zb(2);n.zb(1),n.uc(" ",e.limitedAccessError," ")}}const u=function(e){return{"is-invalid":e}};function p(e,s){if(1&e){const e=n.Pb();n.Ob(0,"div",24),n.Ob(1,"form",25),n.Vb("ngSubmit",(function(){n.lc(e);const s=n.Zb();return s.limitedAccessLoading||s.testLimitedAccessPassword()})),n.Ob(2,"label"),n.sc(3,"This website is a work in progress, to create an account and get a limited access, please enter the magic password below"),n.Nb(),n.Ob(4,"div",26),n.Kb(5,"input",27),n.Ob(6,"div",28),n.Ob(7,"button",29),n.sc(8," Enter"),n.qc(9,l,1,0,"span",16),n.Nb(),n.Nb(),n.Nb(),n.qc(10,m,2,1,"div",30),n.Nb(),n.Nb()}if(2&e){const e=n.Zb();n.zb(1),n.ec("formGroup",e.limitedAccessForm),n.zb(3),n.ec("ngClass",n.hc(6,u,e.limitedAccessError)),n.zb(1),n.ec("ngClass",n.hc(8,u,e.limitedAccessError)),n.zb(2),n.ec("disabled",e.limitedAccessLoading),n.zb(2),n.ec("ngIf",e.limitedAccessLoading),n.zb(1),n.ec("ngIf",e.limitedAccessError)}}const g=function(e){return{disabled:e}};let f=(()=>{class e{constructor(e,s,i){this.fb=e,this.router=s,this.authHttpService=i,this.loading=!1,this.limitedAccessLoading=!1,this.limitedAccessAllowed=!0,this.loginForm=this.fb.group({username:["",o.p.required.bind(this)],password:["",o.p.required.bind(this)]}),this.limitedAccessForm=this.fb.group({password:["",o.p.required.bind(this)]}),this.setLimitedAccessAllowed()}loginUser(){this.loading=!0,this.authHttpService.login(this.loginForm.value).pipe(Object(c.a)(()=>this.loading=!1)).subscribe(()=>{this.router.navigate([""])},e=>{this.formErrorMessage=e.message,this.loginForm.get("password").setValue("")})}testLimitedAccessPassword(){this.limitedAccessLoading=!0,this.limitedAccessError=void 0,this.authHttpService.limitedAccessPassword(this.limitedAccessForm.get("password").value).pipe(Object(c.a)(()=>this.limitedAccessLoading=!1)).subscribe(()=>{this.setLimitedAccessAllowed()},e=>{this.limitedAccessError=e.error})}setLimitedAccessAllowed(){this.authHttpService.limitedAccessAllowed().subscribe(e=>{this.limitedAccessAllowed=e})}}return e.\u0275fac=function(s){return new(s||e)(n.Jb(o.c),n.Jb(r.b),n.Jb(b.a))},e.\u0275cmp=n.Db({type:e,selectors:[["app-login"]],decls:38,vars:8,consts:[[1,"container"],[1,"h1","font-weight-normal","text-center"],[1,"h4","font-weight-normal","text-center"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"form-login",3,"formGroup","ngSubmit"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],[1,"form-group"],["type","email","formControlName","username","placeholder","username","required","",1,"form-control"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],[1,"row","pt-2"],[1,"form-check"],["type","checkbox","id","checkRemember",1,"form-check-input"],["for","checkRemember",1,"form-check-label"],[1,"col-md-12","text-center"],["type","submit",1,"btn","btn-primary","col-md-6",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"col-md-6","text-center"],[1,"orange"],[1,"col-md-12"],["routerLink","/register",1,"btn","btn-primary","col-md-6",3,"ngClass"],["class","col-md-12 mt-5",4,"ngIf"],["role","alert",1,"col-md-12","alert","alert-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"col-md-12","mt-5"],[3,"formGroup","ngSubmit"],[1,"input-group",3,"ngClass"],["type","password","placeholder","Limited password","aria-label","Limited password","aria-describedby","button-addon2","formControlName","password",1,"form-control",3,"ngClass"],[1,"input-group-append"],["type","submit","id","button-addon2",1,"btn","btn-primary",3,"disabled"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(e,s){1&e&&(n.Ob(0,"div",0),n.Ob(1,"h1",1),n.sc(2,"VGMQ"),n.Nb(),n.Ob(3,"h4",2),n.sc(4,"Video Game Music Quiz"),n.Nb(),n.Ob(5,"div",3),n.Ob(6,"div",4),n.Ob(7,"form",5),n.Vb("ngSubmit",(function(){return s.loading||s.loginUser()})),n.qc(8,d,2,1,"div",6),n.Ob(9,"div",7),n.Ob(10,"label"),n.sc(11,"Username"),n.Nb(),n.Kb(12,"input",8),n.Nb(),n.Ob(13,"div",7),n.Ob(14,"label"),n.sc(15,"Password"),n.Nb(),n.Kb(16,"input",9),n.Nb(),n.Ob(17,"div",10),n.Ob(18,"div",4),n.Ob(19,"div",11),n.Kb(20,"input",12),n.Ob(21,"label",13),n.sc(22,"Remember me"),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Ob(23,"div",14),n.Ob(24,"button",15),n.qc(25,a,1,0,"span",16),n.sc(26," Log in "),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Ob(27,"div",17),n.Ob(28,"div",7),n.Ob(29,"label"),n.sc(30,"No "),n.Ob(31,"span",18),n.sc(32,"account"),n.Nb(),n.sc(33," ?"),n.Nb(),n.Ob(34,"div",19),n.Ob(35,"a",20),n.sc(36,"Register now"),n.Nb(),n.Nb(),n.qc(37,p,11,10,"div",21),n.Nb(),n.Nb(),n.Nb(),n.Nb()),2&e&&(n.zb(7),n.ec("formGroup",s.loginForm),n.zb(1),n.ec("ngIf",s.formErrorMessage),n.zb(16),n.ec("disabled",s.loading),n.zb(1),n.ec("ngIf",s.loading),n.zb(10),n.ec("ngClass",n.hc(6,g,!s.limitedAccessAllowed)),n.zb(2),n.ec("ngIf",!s.limitedAccessAllowed))},directives:[o.q,o.l,o.g,t.k,o.b,o.k,o.e,o.o,r.e,t.i],encapsulation:2}),e})();var h=i("PCNd");const w=[{path:"",component:f}];let N=(()=>{class e{}return e.\u0275mod=n.Hb({type:e}),e.\u0275inj=n.Gb({factory:function(s){return new(s||e)},imports:[[t.b,h.a,r.f.forChild(w)]]}),e})()}}]);