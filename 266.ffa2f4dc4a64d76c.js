"use strict";(self.webpackChunkvgmq=self.webpackChunkvgmq||[]).push([[266],{9266:(O,g,r)=>{r.r(g),r.d(g,{GameModule:()=>S});var m=r(9808),l=r(7771),e=r(5e3);let f=(()=>{class t{constructor(){this.loading=!1}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-game-show"]],decls:0,vars:0,template:function(o,n){},encapsulation:2}),t})();var h=r(3149),v=r(8372),c=r(8746),a=r(3075),p=r(2349),d=r(9743);function _(t,i){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.form.errors.serverError," ")}}function G(t,i){if(1&t&&(e.TgZ(0,"div",12),e.YNc(1,_,2,1,"ng-container",7),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.form.errors.serverError)}}function C(t,i){if(1&t&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Oqu(o.errorMessage)}}function I(t,i){if(1&t&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.xp6(1),e.Oqu(o)}}function x(t,i){if(1&t&&(e.TgZ(0,"div")(1,"p",14),e._uU(2),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,I,2,1,"li",15),e.qZA()()),2&t){const o=e.oxw();e.xp6(2),e.hij("Successfully imported ",o.importedGames.length," games!"),e.xp6(2),e.Q6J("ngForOf",o.importedGames)}}function Z(t,i){1&t&&e._UZ(0,"span",16)}const y=function(t){return{"is-invalid":t}},b=function(t){return{disabled:t}};let T=(()=>{class t{constructor(o,n){this.dialogRef=o,this.gameHttpService=n,this.loading=!1,this.form=new a.NI(null,a.kI.required.bind(this)),this.importedGames=[]}submit(){this.errorMessage=void 0,this.loading=!0,this.importedGames=[],this.gameHttpService.importByUrl(this.form.value).pipe((0,c.x)(()=>this.loading=!1)).subscribe({next:o=>{this.importedGames=o,this.form.reset()},error:o=>{Array.isArray(o.message)?this.form.setErrors({serverError:o.message[0].errors}):this.errorMessage=o.message}})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(p.so),e.Y36(d.q))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-import-game-dialog"]],decls:26,vars:12,consts:[["href","https://www.igdb.com/search","target","_blank"],[1,"text-primary"],["href","https://discord.com/channels/978654868296331314/1036244380031402075","target","_blank"],[1,"form-group",3,"ngSubmit"],["required","","placeholder","IGDB url (ex: https://www.igdb.com/games/nier-automata)",1,"form-control",3,"formControl","ngClass"],["class","invalid-feedback",4,"ngIf"],["class","text-danger",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions","",1,"row","justify-content-end"],[1,"col"],[1,"btn","btn-outline-primary",3,"disabled","ngClass","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"invalid-feedback"],[1,"text-danger"],[1,"text-success"],[4,"ngFor","ngForOf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,n){1&o&&(e.TgZ(0,"h2"),e._uU(1,"Import a game"),e.qZA(),e.TgZ(2,"p"),e._uU(3," import a game from "),e.TgZ(4,"a",0),e._uU(5,"igdb.com"),e.qZA(),e._uU(6," by searching a game and copying its url below\n"),e.qZA(),e.TgZ(7,"p"),e._uU(8," You are only allowed to import what IGDB calls "),e.TgZ(9,"b",1),e._uU(10,'"main games"'),e.qZA(),e._uU(11,"."),e._UZ(12,"br"),e._uU(13," If you want to add a DLC, expansion, chapter, etc... please request your game in "),e.TgZ(14,"a",2),e._uU(15," the dedicated Discord channel "),e.qZA()(),e.TgZ(16,"form",3),e.NdJ("ngSubmit",function(){return n.submit()}),e._UZ(17,"input",4),e.YNc(18,G,2,1,"div",5),e.qZA(),e.YNc(19,C,2,1,"p",6),e.YNc(20,x,5,2,"div",7),e.TgZ(21,"div",8)(22,"div",9)(23,"button",10),e.NdJ("click",function(){return n.form.invalid||n.loading||n.submit()}),e._uU(24," Import"),e.YNc(25,Z,1,0,"span",11),e.qZA()()()),2&o&&(e.xp6(17),e.Q6J("formControl",n.form)("ngClass",e.VKq(8,y,n.form.invalid&&(n.form.dirty||n.form.touched))),e.xp6(1),e.Q6J("ngIf",n.form.errors),e.xp6(1),e.Q6J("ngIf",n.errorMessage),e.xp6(1),e.Q6J("ngIf",n.importedGames.length>0),e.xp6(3),e.Q6J("disabled",n.form.invalid||n.loading)("ngClass",e.VKq(10,b,n.form.invalid||n.loading)),e.xp6(2),e.Q6J("ngIf",n.loading))},dependencies:[m.mk,m.sg,m.O5,p.H8,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.F,a.oH],encapsulation:2}),t})();var w=r(7446),q=r(8636),u=r(9685);function J(t,i){if(1&t&&(e.TgZ(0,"h1"),e._uU(1),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.hij("",o.gamesCount," games")}}function U(t,i){if(1&t&&(e.TgZ(0,"form",9)(1,"div",10)(2,"div",11)(3,"div",12),e._UZ(4,"input",13),e.qZA()(),e.TgZ(5,"div",2)(6,"div",12)(7,"mat-checkbox",14),e._uU(8,"Only Show My Games"),e.qZA()()()()()),2&t){const o=e.oxw();e.Q6J("formGroup",o.form)}}function A(t,i){1&t&&(e.ynx(0),e.TgZ(1,"div",15)(2,"div",16)(3,"span",17),e._uU(4,"Loading..."),e.qZA()()(),e.BQk())}function L(t,i){1&t&&e._UZ(0,"app-game-item",21),2&t&&e.Q6J("game",i.$implicit)}function D(t,i){1&t&&(e.TgZ(0,"div",15)(1,"div",22)(2,"span",17),e._uU(3,"Loading..."),e.qZA()()())}function N(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",18),e.NdJ("scrolled",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.onScrollDown())}),e.YNc(1,L,1,1,"app-game-item",19),e.YNc(2,D,4,0,"div",20),e.qZA()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.games),e.xp6(1),e.Q6J("ngIf",o.scrollLoading)}}let Y=(()=>{class t{constructor(o,n,s,M){this.gameHttpService=o,this.router=n,this.activatedRoute=s,this.dialog=M,this.games=[],this.loading=!1,this.myGames=!1,this.scrollLoading=!1}ngOnInit(){this.activatedRoute.queryParamMap.subscribe(o=>{var n;this.form=new a.cw({query:new a.NI(null!==(n=o.get("query"))&&void 0!==n?n:"",a.kI.required.bind(this)),myGames:new a.NI("true"===o.get("myGames"))}),this.search()}).unsubscribe(),this.form.valueChanges.pipe((0,v.b)(250)).subscribe(()=>{this.search(),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:this.form.value,replaceUrl:!0})})}search(){this.loading=!0,this.gameHttpService.search(this.form.value,0,24).pipe((0,c.x)(()=>this.loading=!1)).subscribe(o=>{this.gamesCount=o.count,this.games=o.data})}onScrollDown(){this.scrollLoading||(this.scrollLoading=!0,this.gameHttpService.search(this.form.value,this.games.length,24).pipe((0,c.x)(()=>this.scrollLoading=!1)).subscribe(o=>{this.games=[...this.games,...o.data]}))}openImportDialog(){this.dialog.open(T).afterClosed().subscribe(()=>{this.search()})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(d.q),e.Y36(l.F0),e.Y36(l.gz),e.Y36(p.uw))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-game-list"]],decls:11,vars:4,consts:[[1,"container"],[1,"row","justify-content-between"],[1,"col"],[4,"ngIf"],[1,"col","text-end"],[1,"btn","btn-outline-primary",3,"click"],[3,"formGroup",4,"ngIf"],[4,"ngIf","ngIfElse"],["cardColumns",""],[3,"formGroup"],[1,"row","justify-content-between","align-items-center"],[1,"col-md-3"],[1,"form-group"],["type","text","id","exampleFormControlInput1","placeholder","game...","formControlName","query",1,"form-control"],["color","primary","formControlName","myGames"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","orange"],[1,"sr-only"],["infinite-scroll","",1,"mt-4","row",3,"scrolled"],["class","col-6 col-md-2",3,"game",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"col-6","col-md-2",3,"game"],["role","status",1,"spinner-border","text-primary"]],template:function(o,n){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,J,2,1,"h1",3),e.qZA(),e.TgZ(4,"div",4)(5,"button",5),e.NdJ("click",function(){return n.openImportDialog()}),e._uU(6,"Import game from IGDB"),e.qZA()()(),e.YNc(7,U,9,1,"form",6),e.YNc(8,A,5,0,"ng-container",7),e.YNc(9,N,3,2,"ng-template",null,8,e.W1O),e.qZA()),2&o){const s=e.MAs(10);e.xp6(3),e.Q6J("ngIf",n.gamesCount),e.xp6(4),e.Q6J("ngIf",n.form),e.xp6(1),e.Q6J("ngIf",n.loading)("ngIfElse",s)}},dependencies:[m.sg,m.O5,w.oG,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,q.F,u.Ry],encapsulation:2}),t})();var Q=r(5245);const F=[{path:":slug",component:f},{path:"",component:Y}];let S=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,l.Bz.forChild(F),h.m,Q.Ps,u.Rq]}),t})()}}]);