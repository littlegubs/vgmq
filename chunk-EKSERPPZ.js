import{a as Le,c as Qe}from"./chunk-E5KH3J4E.js";import{d as $e}from"./chunk-FZQUIEEO.js";import{b as me}from"./chunk-4UC5HMIL.js";import{$a as je,A as he,B as fe,D as ge,G as be,Ka as Se,La as De,Ma as Ie,Na as Te,Oa as Ae,Pa as Me,Q as xe,Qa as Ue,Ra as Ee,Sa as Oe,Ta as Re,Ua as ke,Va as Be,Wa as Ze,Xa as Fe,Ya as Ne,Za as H,_a as U,bb as He,ca as Ce,cb as E,fb as Pe,ha as we,hb as Ve,ia as ve,ja as _e,v as pe,w as de,x as ce,xa as ye,y as ue}from"./chunk-5VCEJCLM.js";import"./chunk-FHFROVIL.js";import{E as le,d as ie,f as _,m as ae,n as re,t as oe,y as se}from"./chunk-DJK5JOL4.js";import{$b as x,Cb as c,Da as X,Dc as v,Ec as j,Fa as Y,Ga as m,Ja as J,M as $,Oa as K,Ob as d,Yb as s,Zb as r,_b as u,ac as C,cc as B,da as G,ea as A,hc as w,i as Q,ia as q,ic as h,ja as O,jb as o,nc as Z,ob as b,oc as F,pc as N,qa as z,ra as R,rb as W,rc as ee,sa as k,sc as te,tc as ne,uc as p,vc as g,wb as f,wc as I,xb as M}from"./chunk-OYZ5XOMV.js";import{g as L}from"./chunk-GAL4ENT6.js";var S=(()=>{class e{http;apiEndpoint=se.apiEndpoint;constructor(i){this.http=i}getAllUsers(){return this.http.get(`${this.apiEndpoint}/admin/users`)}ban(i,t){return this.http.put(`${this.apiEndpoint}/admin/users/ban/${i}`,{banReason:t})}static \u0275fac=function(t){return new(t||e)(q(oe))};static \u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var We=["chart"],Ge=(()=>{let a=class a{constructor(){this.chart=m(),this.annotations=m(),this.colors=m(),this.dataLabels=m(),this.series=m(),this.stroke=m(),this.labels=m(),this.legend=m(),this.markers=m(),this.noData=m(),this.fill=m(),this.tooltip=m(),this.plotOptions=m(),this.responsive=m(),this.xaxis=m(),this.yaxis=m(),this.forecastDataPoints=m(),this.grid=m(),this.states=m(),this.title=m(),this.subtitle=m(),this.theme=m(),this.autoUpdateSeries=m(!0),this.chartReady=Y(),this.chartInstance=J(null),this.chartElement=W.required("chart"),this.ngZone=O(X),this.isBrowser=re(O(K))}ngOnChanges(t){this.isBrowser&&this.ngZone.runOutsideAngular(()=>{Q.schedule(()=>this.hydrate(t))})}ngOnDestroy(){this.destroy()}hydrate(t){if(this.autoUpdateSeries()&&Object.keys(t).filter(l=>l!=="series").length===0){this.updateSeries(this.series(),!0);return}this.createElement()}createElement(){return L(this,null,function*(){let{default:t}=yield import("./chunk-RXQGZIIF.js");window.ApexCharts||=t;let n={};["annotations","chart","colors","dataLabels","series","stroke","labels","legend","fill","tooltip","plotOptions","responsive","markers","noData","xaxis","yaxis","forecastDataPoints","grid","states","title","subtitle","theme"].forEach(T=>{let V=this[T]();V&&(n[T]=V)}),this.destroy();let D=this.ngZone.runOutsideAngular(()=>new t(this.chartElement().nativeElement,n));this.chartInstance.set(D),this.render(),this.chartReady.emit({chartObj:D})})}render(){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.render())}updateOptions(t,n,l,D){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateOptions(t,n,l,D))}updateSeries(t,n){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateSeries(t,n))}appendSeries(t,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendSeries(t,n))}appendData(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendData(t))}highlightSeries(t){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.highlightSeries(t))}toggleSeries(t){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleSeries(t))}showSeries(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.showSeries(t))}hideSeries(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.hideSeries(t))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.resetSeries())}zoomX(t,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.zoomX(t,n))}toggleDataPointSelection(t,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleDataPointSelection(t,n))}destroy(){this.chartInstance()?.destroy(),this.chartInstance.set(null)}setLocale(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.setLocale(t))}paper(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.paper())}addXaxisAnnotation(t,n,l){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addXaxisAnnotation(t,n,l))}addYaxisAnnotation(t,n,l){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addYaxisAnnotation(t,n,l))}addPointAnnotation(t,n,l){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addPointAnnotation(t,n,l))}removeAnnotation(t,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.removeAnnotation(t,n))}clearAnnotations(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.clearAnnotations(t))}dataURI(t){return this.chartInstance()?.dataURI(t)}};a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=f({type:a,selectors:[["apx-chart"]],viewQuery:function(n,l){n&1&&ee(l.chartElement,We,5),n&2&&te()},inputs:{chart:[1,"chart"],annotations:[1,"annotations"],colors:[1,"colors"],dataLabels:[1,"dataLabels"],series:[1,"series"],stroke:[1,"stroke"],labels:[1,"labels"],legend:[1,"legend"],markers:[1,"markers"],noData:[1,"noData"],fill:[1,"fill"],tooltip:[1,"tooltip"],plotOptions:[1,"plotOptions"],responsive:[1,"responsive"],xaxis:[1,"xaxis"],yaxis:[1,"yaxis"],forecastDataPoints:[1,"forecastDataPoints"],grid:[1,"grid"],states:[1,"states"],title:[1,"title"],subtitle:[1,"subtitle"],theme:[1,"theme"],autoUpdateSeries:[1,"autoUpdateSeries"]},outputs:{chartReady:"chartReady"},features:[z],decls:2,vars:0,consts:[["chart",""]],template:function(n,l){n&1&&u(0,"div",null,0)},encapsulation:2,changeDetection:0});let e=a;return e})();var qe=(()=>{let a=class a{};a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=M({type:a}),a.\u0275inj=A({});let e=a;return e})();var tt=()=>({type:"line"}),nt=()=>({curve:"stepline",width:2}),it=()=>({mode:"dark"});function at(e,a){if(e&1&&u(0,"apx-chart",1),e&2){let i=h();d("series",i.series)("chart",v(6,tt))("stroke",v(7,nt))("theme",v(8,it))("xaxis",i.xaxis)("annotations",i.annotations)}}var Xe=(()=>{class e{users;series;xaxis={type:"datetime",max:Date.now()};annotations={xaxis:[{x:new Date("28 Aug 2023").getTime(),borderColor:"#775DD0",label:{style:{color:"#fff",background:"#775DD0"},text:"Removed limited access"}},{x:new Date("27 Apr 2024").getTime(),borderColor:"#2df35e",label:{style:{color:"#000",background:"#2df35e"},orientation:"horizontal",text:"New homepage"}}]};ngOnInit(){this.series=[{data:[...this.users.filter(i=>i.enabled).map((i,t)=>({x:i.createdAt,y:t+1})),{x:Le.now().toString(),y:this.users.length}]}]}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=f({type:e,selectors:[["app-users-graph"]],inputs:{users:"users"},standalone:!1,decls:1,vars:1,consts:[[3,"series","chart","stroke","theme","xaxis","annotations",4,"ngIf"],[3,"series","chart","stroke","theme","xaxis","annotations"]],template:function(t,n){t&1&&c(0,at,1,9,"apx-chart",0),t&2&&d("ngIf",n.users)},dependencies:[_,Ge],encapsulation:2})}return e})();var st=e=>({"is-invalid":e}),lt=e=>({disabled:e});function mt(e,a){if(e&1&&(x(0),p(1),C()),e&2){let i=h(2);o(),I(" ",i.form.errors.serverError," ")}}function pt(e,a){if(e&1&&(s(0,"div",8),c(1,mt,2,1,"ng-container",9),r()),e&2){let i=h();o(),d("ngIf",i.form.errors.serverError)}}function dt(e,a){if(e&1&&(s(0,"p",10),p(1),r()),e&2){let i=h();o(),g(i.errorMessage)}}function ct(e,a){e&1&&u(0,"span",11)}var Ye=(()=>{class e{data;usersHttpService;dialogRef;errorMessage="";loading=!1;form=new fe(null,de.required.bind(this));constructor(i,t,n){this.data=i,this.usersHttpService=t,this.dialogRef=n}submit(){this.errorMessage=void 0,this.loading=!0,this.usersHttpService.ban(this.data.user.id,this.form.value).pipe($(()=>this.loading=!1)).subscribe({next:()=>{this.dialogRef.close({action:"banned"})},error:i=>{Array.isArray(i.message)?this.form.setErrors({serverError:i.message[0].errors}):this.errorMessage=i.message}})}static \u0275fac=function(t){return new(t||e)(b(ve),b(S),b(we))};static \u0275cmp=f({type:e,selectors:[["app-ban-dialog"]],standalone:!1,decls:10,vars:12,consts:[[1,"tw-flex","tw-flex-col","tw-items-center","!tw-bg-grey","tw-w-[280px]","tw-h-[200px]"],[1,"!tw-mt-4","!tw-font-bold","!tw-text-4xl","tw-text-center"],[1,"tw-w-3/4",3,"ngSubmit"],["required","","placeholder","Reason for ban",1,"form-control","!tw-bg-grey","tw-rounded-md","placeholder:tw-text-light-grey",3,"formControl","ngClass"],["class","invalid-feedback",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"btn","btn-outline-primary","tw-mt-4",3,"click","disabled","ngClass"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"text-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"h4",1),p(2),r(),s(3,"form",2),w("ngSubmit",function(){return n.submit()}),u(4,"input",3),c(5,pt,2,1,"div",4),r(),c(6,dt,2,1,"p",5),s(7,"button",6),w("click",function(){return n.form.invalid||n.loading||n.submit()}),p(8," Ban"),c(9,ct,1,0,"span",7),r()()),t&2&&(o(2),I("Ban ",n.data.user.username,""),o(2),d("formControl",n.form)("ngClass",j(8,st,n.form.invalid&&(n.form.dirty||n.form.touched))),o(),d("ngIf",n.form.errors),o(),d("ngIf",n.errorMessage),o(),d("disabled",n.form.invalid||n.loading)("ngClass",j(10,lt,n.form.invalid||n.loading)),o(2),d("ngIf",n.loading))},dependencies:[ie,_,ge,pe,ce,ue,xe,he,be],encapsulation:2})}return e})();var ut=()=>[25,50,100];function ht(e,a){e&1&&(s(0,"th",18),p(1,"Username"),r())}function ft(e,a){if(e&1&&(s(0,"td",19),p(1),r()),e&2){let i=a.$implicit;o(),g(i.username)}}function gt(e,a){e&1&&(s(0,"th",18),p(1,"Enabled"),r())}function bt(e,a){if(e&1&&(s(0,"td",19),p(1),r()),e&2){let i=a.$implicit;o(),g(i.enabled)}}function xt(e,a){e&1&&(s(0,"th",18),p(1,"Created At"),r())}function Ct(e,a){if(e&1&&(s(0,"td",19),p(1),r()),e&2){let i=a.$implicit;o(),g(i.createdAt)}}function wt(e,a){e&1&&(s(0,"th",20),p(1,"Ban Reason"),r())}function vt(e,a){if(e&1&&(s(0,"td",19),p(1),r()),e&2){let i=a.$implicit;o(),g(i.banReason)}}function _t(e,a){e&1&&(s(0,"th",20),p(1,"Banned By"),r())}function yt(e,a){if(e&1&&(s(0,"td",19),p(1),r()),e&2){let i=a.$implicit;o(),g(i.bannedBy==null?null:i.bannedBy.username)}}function St(e,a){e&1&&(s(0,"th",20),p(1,"Actions"),r())}function Dt(e,a){if(e&1){let i=B();s(0,"td",19)(1,"button",21),w("click",function(){let n=R(i).$implicit,l=h();return k(l.openBanDialog(n))}),u(2,"i",22),r()()}}function It(e,a){e&1&&u(0,"tr",23)}function Tt(e,a){e&1&&u(0,"tr",24)}function At(e,a){if(e&1&&(s(0,"tr",25)(1,"td",26),p(2),r()()),e&2){h();let i=ne(2);o(2),I('No data matching the filter "',i.value,'"')}}var Je=(()=>{class e{dialog;http;dialogSubscription;getAllUsersSubscription;users;displayedColumns=["username","enabled","createdAt","banReason","bannedBy","actions"];dataSource;constructor(i,t){this.dialog=i,this.http=t}paginator;sort;ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnInit(){this.dataSource=new H(this.users)}applyFilter(i){let t=i.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}openBanDialog(i){let t=this.dialog.open(Ye,{data:{user:i}});this.dialogSubscription=t.afterClosed().subscribe(n=>{n&&(this.getAllUsersSubscription=this.http.getAllUsers().subscribe(l=>{this.dataSource=new H(l)}))})}ngOnDestroy(){this.dataSource.disconnect(),this.dialogSubscription?.unsubscribe(),this.getAllUsersSubscription?.unsubscribe()}static \u0275fac=function(t){return new(t||e)(b(_e),b(S))};static \u0275cmp=f({type:e,selectors:[["app-users-table"]],viewQuery:function(t,n){if(t&1&&(Z(E,5),Z(U,5)),t&2){let l;F(l=N())&&(n.paginator=l.first),F(l=N())&&(n.sort=l.first)}},inputs:{users:"users"},standalone:!1,decls:27,vars:5,consts:[["search",""],[1,"tw-flex","tw-flex-col","tw-items-center"],["placeholder","Ex. yoyo",1,"!tw-bg-grey","tw-rounded-md","placeholder:tw-text-light-grey","tw-h-[40px]","tw-my-4","!tw-border-none","tw-w-[250px]","md:tw-w-[400px]",3,"keyup"],[1,"mat-elevation-z8","tw-w-full","tw-overflow-x-scroll"],["mat-table","","matSort","",1,"!tw-bg-grey",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","enabled"],["matColumnDef","createdAt"],["matColumnDef","banReason"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","bannedBy"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",1,"!tw-bg-grey",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-button","",3,"click"],[1,"fa-solid","fa-ban"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,n){if(t&1){let l=B();s(0,"div",1)(1,"input",2,0),w("keyup",function(T){return R(l),k(n.applyFilter(T))}),r(),s(3,"div",3)(4,"table",4),x(5,5),c(6,ht,2,0,"th",6)(7,ft,2,1,"td",7),C(),x(8,8),c(9,gt,2,0,"th",6)(10,bt,2,1,"td",7),C(),x(11,9),c(12,xt,2,0,"th",6)(13,Ct,2,1,"td",7),C(),x(14,10),c(15,wt,2,0,"th",11)(16,vt,2,1,"td",7),C(),x(17,12),c(18,_t,2,0,"th",11)(19,yt,2,1,"td",7),C(),x(20,13),c(21,St,2,0,"th",11)(22,Dt,3,0,"td",7),C(),c(23,It,1,0,"tr",14)(24,Tt,1,0,"tr",15)(25,At,3,1,"tr",16),r(),u(26,"mat-paginator",17),r()()}t&2&&(o(4),d("dataSource",n.dataSource),o(19),d("matHeaderRowDef",n.displayedColumns),o(),d("matRowDefColumns",n.displayedColumns),o(2),d("pageSizeOptions",v(4,ut)))},dependencies:[ye,Ae,Ue,ke,Ee,Me,Be,Oe,Re,Ze,Fe,Ne,U,je,E],encapsulation:2})}return e})();function Ut(e,a){if(e&1&&(s(0,"div"),u(1,"app-users-table",7),r()),e&2){let i=h();o(),d("users",i.users)}}function Et(e,a){if(e&1&&(s(0,"div"),u(1,"app-users-graph",7),r()),e&2){let i=h();o(),d("users",i.enabledUsers)}}var Ke=(()=>{class e{http;usersObservable;users;enabledUsers;constructor(i){this.http=i}ngOnInit(){this.usersObservable=this.http.getAllUsers().subscribe(i=>{this.users=i,this.enabledUsers=this.users.filter(t=>t.enabled)})}ngOnDestroy(){this.usersObservable.unsubscribe()}static \u0275fac=function(t){return new(t||e)(b(S))};static \u0275cmp=f({type:e,selectors:[["app-users"]],standalone:!1,decls:17,vars:4,consts:[[1,"tw-flex","tw-flex-col","tw-items-center"],[1,"tw-text-white","!tw-font-fastup","!tw-text-3xl","tw-text-center"],[1,"tw-font-poppins","tw-font-bold","tw-italic"],[1,"tw-w-5/6"],[1,"!tw-bg-newBlack"],[4,"ngIf"],[1,"!tw-bg-newBlack",3,"expanded"],[3,"users"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"h1",1)(2,"span",2),p(3),r(),p(4," Users "),r(),s(5,"div",3)(6,"mat-accordion")(7,"mat-expansion-panel",4)(8,"mat-expansion-panel-header")(9,"mat-panel-title"),p(10,"Table"),r()(),c(11,Ut,2,1,"div",5),r(),s(12,"mat-expansion-panel",6)(13,"mat-expansion-panel-header")(14,"mat-panel-title"),p(15,"Graph"),r()(),c(16,Et,2,1,"div",5),r()()()()),t&2&&(o(3),g(n.enabledUsers==null?null:n.enabledUsers.length),o(8),d("ngIf",n.users),o(),d("expanded",!0),o(4),d("ngIf",n.users))},dependencies:[_,Te,Se,De,Ie,Xe,Je],encapsulation:2})}return e})();var Ot=[{path:"",component:Ke}],_n=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=M({type:e});static \u0275inj=A({imports:[ae,le.forChild(Ot),Ve,me,Qe,Ce,He,$e,Pe,qe]})}return e})();export{_n as UserModule};
