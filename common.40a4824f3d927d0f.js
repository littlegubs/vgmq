"use strict";(self.webpackChunkvgmq=self.webpackChunkvgmq||[]).push([[592],{8720:(m,u,o)=>{o.d(u,{Y:()=>e});var r=o(2843),n=o(2340),t=o(262),E=o(5e3),g=o(520);let e=(()=>{class _{constructor(s){this.http=s,this.apiEndpoint=n.N.apiEndpoint}list(s=""){return this.http.get(`${this.apiEndpoint}/lobbies`,{params:{query:s}})}create(s){return this.http.post(`${this.apiEndpoint}/lobbies/create`,s).pipe((0,t.K)(p=>(0,r._)(p.error)))}update(s,p){return this.http.put(`${this.apiEndpoint}/lobbies/${s}`,p).pipe((0,t.K)(a=>(0,r._)(a.error)))}join(s,p){const a=`${this.apiEndpoint}/lobbies/${s}/join`;let d=this.http.get(a);if(p){const i=new FormData;i.append("password",p),d=this.http.post(a,i)}return d}leave(){return this.http.get(`${this.apiEndpoint}/lobbies/leave`)}play(s){return this.http.get(`${this.apiEndpoint}/lobbies/${s}/play`)}answer(s,p){const a=new FormData;return a.append("answer",p),this.http.post(`${this.apiEndpoint}/lobbies/${s}/answer`,a).pipe((0,t.K)(d=>(0,r._)(d.error)))}}return _.\u0275fac=function(s){return new(s||_)(E.LFG(g.eN))},_.\u0275prov=E.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},6217:(m,u,o)=>{o.d(u,{V:()=>g});var r=o(5594),n=o(5e3),t=o(520),E=o(7282);let g=(()=>{class e{constructor(l,s){this.http=l,this.socket=s}isPLaying(l){return[r.D.AnswerReveal.toString(),r.D.Playing.toString(),r.D.PlayingMusic.toString()].includes(l.status)}join(l,s=null){this.socket.emit("join",{code:l,password:s})}}return e.\u0275fac=function(l){return new(l||e)(n.LFG(t.eN),n.LFG(E.i))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},9150:(m,u,o)=>{o.d(u,{q:()=>p});var r=o(8966),n=o(3075),t=o(5e3),E=o(6217),g=o(7282),e=o(9808),_=o(7423);function l(a,d){if(1&a&&(t.TgZ(0,"span",7),t._uU(1),t.qZA()),2&a){const i=d.ngIf;t.xp6(1),t.Oqu(i)}}const s=function(a){return{"is-invalid":a}};let p=(()=>{class a{constructor(i,c,v,h){this.data=i,this.lobbyService=c,this.socket=v,this.dialogRef=h,this.password=new n.NI("",n.kI.required.bind(this))}ngOnInit(){this.socket.fromEvent("InvalidPasswordException").subscribe(()=>{this.password.setErrors({serverError:"invalid password"})}),this.socket.fromEvent("lobbyJoined").subscribe(i=>{console.log("???dd"),this.dialogRef.close(i)})}submit(){console.log("???"),this.lobbyService.join(this.data,this.password.value),this.socket.fromEvent("InvalidPasswordException").subscribe(()=>{this.errorMessage="Invalid password"})}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(r.WI),t.Y36(E.V),t.Y36(g.i),t.Y36(r.so))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-lobby-password-dialog"]],decls:13,vars:5,consts:[[3,"ngSubmit"],["mat-dialog-title",""],["mat-dialog-content",""],["type","password",1,"form-control",3,"ngClass","formControl"],["class","invalid-feedback",4,"ngIf"],["mat-button","","mat-dialog-close",""],["type","submit"],[1,"invalid-feedback"]],template:function(i,c){1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return c.password.invalid||c.submit()}),t.TgZ(1,"h1",1),t._uU(2,"Password required"),t.qZA(),t.TgZ(3,"div",2)(4,"label"),t._uU(5,"Please enter the lobby password"),t.qZA(),t._UZ(6,"input",3),t.YNc(7,l,2,1,"span",4),t.qZA(),t.TgZ(8,"mat-dialog-actions")(9,"button",5),t._uU(10,"Cancel"),t.qZA(),t.TgZ(11,"button",6),t._uU(12,"Enter"),t.qZA()()()),2&i&&(t.xp6(6),t.Q6J("ngClass",t.VKq(3,s,c.password.invalid))("formControl",c.password),t.xp6(1),t.Q6J("ngIf",null==c.password.errors?null:c.password.errors.serverError))},directives:[n._Y,n.JL,n.F,r.uh,r.xY,n.Fj,e.mk,n.JJ,n.oH,e.O5,r.H8,_.lW,r.ZT],encapsulation:2}),a})()},5594:(m,u,o)=>{o.d(u,{D:()=>r});var r=(()=>{return(n=r||(r={})).Waiting="waiting",n.Playing="playing",n.Loading="loading",n.PlayingMusic="playing_music",n.AnswerReveal="answer_reveal",n.FinalStanding="final_standing",r;var n})()}}]);