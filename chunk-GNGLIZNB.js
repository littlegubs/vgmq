import{a as A}from"./chunk-GHDWACS7.js";import{a as B,b as U}from"./chunk-JNMNL4QL.js";import{D as P,H as N,K as T,Q as j,S as q,hb as O,v as k,w as E,x as R,y as M}from"./chunk-5KVTLUS6.js";import{a as x,c as L}from"./chunk-3VSYNEYF.js";import{B as H,C as I,E as z,d as y,f as C,m as V,y as _,z as G}from"./chunk-3N5DGQTQ.js";import{Bb as d,Dc as S,M as g,Nb as a,Xb as l,Yb as c,Zb as u,da as F,gc as w,hc as b,ib as n,nb as m,tc as p,vb as v,vc as h,wb as D}from"./chunk-5HLPFG4U.js";import"./chunk-GAL4ENT6.js";var oe=t=>({"is-invalid":t});function ne(t,f){if(t&1&&(l(0,"div",10),p(1),c()),t&2){let i=b();n(),h(" ",i.formErrorMessage," ")}}function se(t,f){if(t&1&&(l(0,"div",11),p(1),c()),t&2){let i=f.ngIf;n(),h(" ",i," ")}}function ae(t,f){t&1&&u(0,"span",12)}var K=(()=>{class t{fb;authHttpService;snackBar;recaptchaService;form;formErrorMessage;loading=!1;environment=_;subscribers=[];constructor(i,o,e,r){this.fb=i,this.authHttpService=o,this.snackBar=e,this.recaptchaService=r,this.form=this.fb.group({email:["",E.required.bind(this)]}),this.subscribers.push(this.recaptchaService.resolved.subscribe(s=>{this.submit(s)}))}ngAfterViewInit(){this.recaptchaService.render()}ngOnDestroy(){this.subscribers.forEach(i=>i.unsubscribe())}submit(i){this.loading=!0,this.authHttpService.requestResetPassword(this.form.value,i).pipe(g(()=>this.loading=!1)).subscribe({next:()=>{this.snackBar.open("Email successfully sent",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:1e4}),this.form.reset()},error:o=>{Array.isArray(o.message)?o.message.map(e=>{if(typeof e!="string"){let r=this.form.get(e.property);r?.markAsTouched(),r?.setErrors({serverError:e.errors})}}):this.formErrorMessage=o.message,this.recaptchaService.reset()}})}static \u0275fac=function(o){return new(o||t)(m(q),m(x),m(B),m(A))};static \u0275cmp=v({type:t,selectors:[["app-request-reset-password"]],standalone:!1,decls:13,vars:8,consts:[[1,"tw-flex","tw-items-center","tw-justify-center","tw-flex-col",3,"ngSubmit","formGroup"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],["type","email","formControlName","email","placeholder","Email","required","",1,"form-control","!tw-bg-grey","tw-text-center","tw-w-[300px]","md:tw-w-[400px]","tw-h-[53px]","tw-mt-8","tw-mb-2","tw-rounded-md","placeholder:tw-text-white",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["id","g-recaptcha"],[1,"col-md-12","text-center","mt-3"],["type","submit",1,"tw-h-btn","tw-w-[170px]","tw-bg-lime","tw-mt-6","tw-text-black","tw-border-none",3,"disabled"],["class","spinner-border spinner-border-sm","type","button","role","status","aria-hidden","true",4,"ngIf"],[1,"tw-text-sm","!tw-mt-5"],["routerLink","/",1,"tw-font-poppins","tw-text-[#59EE7F]","tw-no-underline"],["role","alert",1,"col-md-12","alert","alert-danger"],[1,"invalid-feedback"],["type","button","role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,e){if(o&1&&(l(0,"form",0),w("ngSubmit",function(){return e.loading||e.recaptchaService.execute()}),d(1,ne,2,1,"div",1),u(2,"input",2),d(3,se,2,1,"div",3),u(4,"div",4),l(5,"div",5)(6,"button",6),d(7,ae,1,0,"span",7),p(8," Reset password "),c()(),l(9,"p",8),p(10," Back to login "),l(11,"a",9),p(12,"login"),c()()()),o&2){let r,s;a("formGroup",e.form),n(),a("ngIf",e.formErrorMessage),n(),a("ngClass",S(6,oe,((r=e.form.get("email"))==null?null:r.invalid)&&(((r=e.form.get("email"))==null?null:r.dirty)||((r=e.form.get("email"))==null?null:r.touched)))),n(),a("ngIf",(s=e.form.get("email"))==null||s.errors==null?null:s.errors.serverError),n(3),a("disabled",e.loading),n(),a("ngIf",e.loading)}},dependencies:[y,C,P,k,R,M,j,N,T,I],encapsulation:2})}return t})();var le=t=>({"is-invalid":t});function me(t,f){if(t&1&&(l(0,"div",9),p(1),c()),t&2){let i=b();n(),h(" ",i.formErrorMessage," ")}}function pe(t,f){if(t&1&&(l(0,"div",10),p(1),c()),t&2){let i=f.ngIf;n(),h(" ",i," ")}}function ce(t,f){t&1&&u(0,"span",11)}var Q=(()=>{class t{fb;router;authHttpService;authService;snackBar;route;recaptchaService;form;formErrorMessage;loading=!1;environment=_;subscribers=[];constructor(i,o,e,r,s,W,X){this.fb=i,this.router=o,this.authHttpService=e,this.authService=r,this.snackBar=s,this.route=W,this.recaptchaService=X,this.form=this.fb.group({password:["",E.required.bind(this)]}),this.subscribers.push(this.recaptchaService.resolved.subscribe(Y=>{this.submit(Y)}))}ngAfterViewInit(){this.recaptchaService.render()}ngOnDestroy(){this.subscribers.forEach(i=>i.unsubscribe())}submit(i){this.loading=!0,this.route.paramMap.subscribe(o=>{this.authHttpService.resetPassword(this.form.value,o.get("token"),i).pipe(g(()=>this.loading=!1)).subscribe({next:e=>{this.authService.setAccessTokenCookie(e.accessToken),this.authService.setRefreshTokenCookie(e.refreshToken),this.snackBar.open("Password successfully updated!",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:5e3}),this.router.navigate(["/"])},error:e=>{Array.isArray(e.message)?e.message.map(r=>{if(typeof r!="string"){let s=this.form.get(r.property);s?.markAsTouched(),s?.setErrors({serverError:r.errors})}}):this.formErrorMessage=e.message}})})}static \u0275fac=function(o){return new(o||t)(m(q),m(H),m(x),m(L),m(B),m(G),m(A))};static \u0275cmp=v({type:t,selectors:[["app-reset-password"]],standalone:!1,decls:12,vars:8,consts:[[1,"tw-flex","tw-items-center","tw-justify-center","tw-flex-col",3,"ngSubmit","formGroup"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],["type","password","formControlName","password","placeholder","New Password","required","",1,"form-control","!tw-bg-grey","tw-text-center","tw-w-[300px]","md:tw-w-[400px]","tw-h-[53px]","tw-mt-8","tw-mb-2","tw-rounded-md","placeholder:tw-text-white",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["id","g-recaptcha"],["type","submit",1,"tw-h-btn","tw-w-[175px]","tw-bg-lime","tw-mt-6","tw-text-black","tw-border-none",3,"disabled"],["class","spinner-border spinner-border-sm","type","button","role","status","aria-hidden","true",4,"ngIf"],[1,"tw-text-sm","tw-text-white","!tw-mt-5"],["routerLink","/",1,"tw-font-poppins","tw-text-[#59EE7F]","tw-no-underline"],["role","alert",1,"col-md-12","alert","alert-danger"],[1,"invalid-feedback"],["type","button","role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,e){if(o&1&&(l(0,"form",0),w("ngSubmit",function(){return e.loading||e.recaptchaService.execute()}),d(1,me,2,1,"div",1),u(2,"input",2),d(3,pe,2,1,"div",3),u(4,"div",4),l(5,"button",5),d(6,ce,1,0,"span",6),p(7," Update password "),c(),l(8,"p",7),p(9," Back to login "),l(10,"a",8),p(11,"login"),c()()()),o&2){let r,s;a("formGroup",e.form),n(),a("ngIf",e.formErrorMessage),n(),a("ngClass",S(6,le,((r=e.form.get("password"))==null?null:r.invalid)&&(((r=e.form.get("password"))==null?null:r.dirty)||((r=e.form.get("password"))==null?null:r.touched)))),n(),a("ngIf",(s=e.form.get("password"))==null||s.errors==null?null:s.errors.serverError),n(2),a("disabled",e.loading),n(),a("ngIf",e.loading)}},dependencies:[y,C,P,k,R,M,j,N,T,I],encapsulation:2})}return t})();var de=[{path:"",component:K},{path:":token",component:Q}],Re=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=D({type:t});static \u0275inj=F({imports:[V,O,z.forChild(de),U]})}return t})();export{Re as ResetPasswordModule};
