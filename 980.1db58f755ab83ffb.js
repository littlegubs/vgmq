"use strict";(self.webpackChunkvgmq=self.webpackChunkvgmq||[]).push([[980],{8980:(Tn,pt,m)=>{m.r(pt),m.d(pt,{GameModule:()=>vn});var g=m(6814),U=m(2787),ce=m(2132),h=m(6223),k=m(4716),$=m(9862),t=m(9212),R=m(9473),T=m(2831),f=m(2495),J=m(4300),_=m(8645),y=m(7394),le=m(6321),_t=m(4825),me=m(927),W=m(5592),E=m(3019),I=m(9773),gt=m(7398),K=m(8180),L=m(7921),he=m(9397),V=m(4664),H=m(9388);function X(o,a,e){for(let i in a)if(a.hasOwnProperty(i)){const n=a[i];n?o.setProperty(i,n,e?.has(i)?"important":""):o.removeProperty(i)}return o}function A(o,a){const e=a?"":"none";X(o.style,{"touch-action":a?"":"none","-webkit-user-drag":a?"":"none","-webkit-tap-highlight-color":a?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function bt(o,a,e){X(o.style,{position:a?"":"fixed",top:a?"":"0",opacity:a?"":"0",left:a?"":"-999em"},e)}function Y(o,a){return a&&"none"!=a?o+" "+a:o}function ft(o){const a=o.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(o)*a}function tt(o,a){return o.getPropertyValue(a).split(",").map(i=>i.trim())}function et(o){const a=o.getBoundingClientRect();return{top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:a.width,height:a.height,x:a.x,y:a.y}}function it(o,a,e){const{top:i,bottom:n,left:s,right:r}=o;return e>=i&&e<=n&&a>=s&&a<=r}function O(o,a,e){o.top+=a,o.bottom=o.top+o.height,o.left+=e,o.right=o.left+o.width}function vt(o,a,e,i){const{top:n,right:s,bottom:r,left:c,width:l,height:d}=o,u=l*a,b=d*a;return i>n-b&&i<r+b&&e>c-u&&e<s+u}class xt{constructor(a){this._document=a,this.positions=new Map}clear(){this.positions.clear()}cache(a){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),a.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:et(e)})})}handleScroll(a){const e=(0,T.sA)(a),i=this.positions.get(e);if(!i)return null;const n=i.scrollPosition;let s,r;if(e===this._document){const d=this.getViewportScrollPosition();s=d.top,r=d.left}else s=e.scrollTop,r=e.scrollLeft;const c=n.top-s,l=n.left-r;return this.positions.forEach((d,u)=>{d.clientRect&&e!==u&&e.contains(u)&&O(d.clientRect,c,l)}),n.top=s,n.left=r,{top:c,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Tt(o){const a=o.cloneNode(!0),e=a.querySelectorAll("[id]"),i=o.nodeName.toLowerCase();a.removeAttribute("id");for(let n=0;n<e.length;n++)e[n].removeAttribute("id");return"canvas"===i?Dt(o,a):("input"===i||"select"===i||"textarea"===i)&&wt(o,a),Ct("canvas",o,a,Dt),Ct("input, textarea, select",o,a,wt),a}function Ct(o,a,e,i){const n=a.querySelectorAll(o);if(n.length){const s=e.querySelectorAll(o);for(let r=0;r<n.length;r++)i(n[r],s[r])}}let pe=0;function wt(o,a){"file"!==a.type&&(a.value=o.value),"radio"===a.type&&a.name&&(a.name=`mat-clone-${a.name}-${pe++}`)}function Dt(o,a){const e=a.getContext("2d");if(e)try{e.drawImage(o,0,0)}catch{}}const yt=(0,T.i$)({passive:!0}),q=(0,T.i$)({passive:!1}),nt=new Set(["position"]);class ge{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(a){a!==this._disabled&&(this._disabled=a,this._toggleNativeDragInteractions(),this._handles.forEach(e=>A(e,a)))}constructor(a,e,i,n,s,r){this._config=e,this._document=i,this._ngZone=n,this._viewportRuler=s,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new _.x,this._pointerMoveSubscription=y.w0.EMPTY,this._pointerUpSubscription=y.w0.EMPTY,this._scrollSubscription=y.w0.EMPTY,this._resizeSubscription=y.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new _.x,this.started=new _.x,this.released=new _.x,this.ended=new _.x,this.entered=new _.x,this.exited=new _.x,this.dropped=new _.x,this.moved=this._moveEvents,this._pointerDown=c=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(c);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,c)}else this.disabled||this._initializeDragSequence(this._rootElement,c)},this._pointerMove=c=>{const l=this._getPointerPositionOnPage(c);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const S=Date.now()>=this._dragStartTime+this._getDragStartDelay(c),P=this._dropContainer;if(!S)return void this._endDragSequence(c);(!P||!P.isDragging()&&!P.isReceiving())&&(c.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(c)))}return}c.preventDefault();const d=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(d),this._dropContainer)this._updateActiveDropContainer(d,l);else{const u=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,b=this._activeTransform;b.x=d.x-u.x+this._passiveTransform.x,b.y=d.y-u.y+this._passiveTransform.y,this._applyRootElementTransform(b.x,b.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:d,event:c,distance:this._getDragDistance(d),delta:this._pointerDirectionDelta})})},this._pointerUp=c=>{this._endDragSequence(c)},this._nativeDragStart=c=>{if(this._handles.length){const l=this._getTargetHandle(c);l&&!this._disabledHandles.has(l)&&!this.disabled&&c.preventDefault()}else this.disabled||c.preventDefault()},this.withRootElement(a).withParent(e.parentDragRef||null),this._parentPositions=new xt(i),r.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(a){this._handles=a.map(i=>(0,f.fI)(i)),this._handles.forEach(i=>A(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(a){return this._previewTemplate=a,this}withPlaceholderTemplate(a){return this._placeholderTemplate=a,this}withRootElement(a){const e=(0,f.fI)(a);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,q),e.addEventListener("touchstart",this._pointerDown,yt),e.addEventListener("dragstart",this._nativeDragStart,q)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(a){return this._boundaryElement=a?(0,f.fI)(a):null,this._resizeSubscription.unsubscribe(),a&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(a){return this._parentDragRef=a,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(a){!this._disabledHandles.has(a)&&this._handles.indexOf(a)>-1&&(this._disabledHandles.add(a),A(a,!0))}enableHandle(a){this._disabledHandles.has(a)&&(this._disabledHandles.delete(a),A(a,this.disabled))}withDirection(a){return this._direction=a,this}_withDropContainer(a){this._dropContainer=a}getFreeDragPosition(){const a=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:a.x,y:a.y}}setFreeDragPosition(a){return this._activeTransform={x:0,y:0},this._passiveTransform.x=a.x,this._passiveTransform.y=a.y,this._dropContainer||this._applyRootElementTransform(a.x,a.y),this}withPreviewContainer(a){return this._previewContainer=a,this}_sortFromLastPointerPosition(){const a=this._lastKnownPointerPosition;a&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(a),a)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(a){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:a}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(a),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(a);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:a})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(a){Z(a)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,n=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),r=this._anchor=this._anchor||this._document.createComment(""),c=this._getShadowRoot();n.insertBefore(r,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),bt(i,!1,nt),this._document.body.appendChild(n.replaceChild(s,i)),this._getPreviewInsertionPoint(n,c).appendChild(this._preview),this.started.next({source:this,event:a}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:a}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(a,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),n=Z(e),s=!n&&0!==e.button,r=this._rootElement,c=(0,T.sA)(e),l=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),d=n?(0,J.yG)(e):(0,J.X6)(e);if(c&&c.draggable&&"mousedown"===e.type&&e.preventDefault(),i||s||l||d)return;if(this._handles.length){const w=r.style;this._rootElementTapHighlight=w.webkitTapHighlightColor||"",w.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(w=>this._updateOnScroll(w)),this._boundaryElement&&(this._boundaryRect=et(this._boundaryElement));const u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,a,e);const b=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:b.x,y:b.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(a){bt(this._rootElement,!0,nt),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),n=this._getPointerPositionOnPage(a),s=this._getDragDistance(n),r=e._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:s,dropPoint:n,event:a}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:r,distance:s,dropPoint:n,event:a}),e.drop(this,i,this._initialIndex,this._initialContainer,r,s,n,a),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:a,y:e},{x:i,y:n}){let s=this._initialContainer._getSiblingContainerFromPosition(this,a,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(a,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,a,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,n),this._dropContainer._sortItem(this,a,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(a,e):this._applyPreviewTransform(a-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const a=this._previewTemplate,e=this.previewClass,i=a?a.template:null;let n;if(i&&a){const s=a.matchSize?this._initialDomRect:null,r=a.viewContainer.createEmbeddedView(i,a.context);r.detectChanges(),n=It(r,this._document),this._previewRef=r,a.matchSize?Mt(n,s):n.style.transform=Q(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=Tt(this._rootElement),Mt(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return X(n.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},nt),A(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>n.classList.add(s)):n.classList.add(e)),n}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const a=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(a.left,a.top);const e=function ue(o){const a=getComputedStyle(o),e=tt(a,"transition-property"),i=e.find(c=>"transform"===c||"all"===c);if(!i)return 0;const n=e.indexOf(i),s=tt(a,"transition-duration"),r=tt(a,"transition-delay");return ft(s[n])+ft(r[n])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const n=r=>{(!r||(0,T.sA)(r)===this._preview&&"transform"===r.propertyName)&&(this._preview?.removeEventListener("transitionend",n),i(),clearTimeout(s))},s=setTimeout(n,1.5*e);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){const a=this._placeholderTemplate,e=a?a.template:null;let i;return e?(this._placeholderRef=a.viewContainer.createEmbeddedView(e,a.context),this._placeholderRef.detectChanges(),i=It(this._placeholderRef,this._document)):i=Tt(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(a,e,i){const n=e===this._rootElement?null:e,s=n?n.getBoundingClientRect():a,r=Z(i)?i.targetTouches[0]:i,c=this._getViewportScrollPosition();return{x:s.left-a.left+(r.pageX-s.left-c.left),y:s.top-a.top+(r.pageY-s.top-c.top)}}_getPointerPositionOnPage(a){const e=this._getViewportScrollPosition(),i=Z(a)?a.touches[0]||a.changedTouches[0]||{pageX:0,pageY:0}:a,n=i.pageX-e.left,s=i.pageY-e.top;if(this._ownerSVGElement){const r=this._ownerSVGElement.getScreenCTM();if(r){const c=this._ownerSVGElement.createSVGPoint();return c.x=n,c.y=s,c.matrixTransform(r.inverse())}}return{x:n,y:s}}_getConstrainedPointerPosition(a){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:n}=this.constrainPosition?this.constrainPosition(a,this,this._initialDomRect,this._pickupPositionInElement):a;if("x"===this.lockAxis||"x"===e?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:s,y:r}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,c=this._boundaryRect,{width:l,height:d}=this._getPreviewRect(),u=c.top+r,b=c.bottom-(d-r);i=kt(i,c.left+s,c.right-(l-s)),n=kt(n,u,b)}return{x:i,y:n}}_updatePointerDirectionDelta(a){const{x:e,y:i}=a,n=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,r=Math.abs(e-s.x),c=Math.abs(i-s.y);return r>this._config.pointerDirectionChangeThreshold&&(n.x=e>s.x?1:-1,s.x=e),c>this._config.pointerDirectionChangeThreshold&&(n.y=i>s.y?1:-1,s.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const a=this._handles.length>0||!this.isDragging();a!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=a,A(this._rootElement,a))}_removeRootElementListeners(a){a.removeEventListener("mousedown",this._pointerDown,q),a.removeEventListener("touchstart",this._pointerDown,yt),a.removeEventListener("dragstart",this._nativeDragStart,q)}_applyRootElementTransform(a,e){const i=Q(a,e),n=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=n.transform&&"none"!=n.transform?n.transform:""),n.transform=Y(i,this._initialTransform)}_applyPreviewTransform(a,e){const i=this._previewTemplate?.template?void 0:this._initialTransform,n=Q(a,e);this._preview.style.transform=Y(n,i)}_getDragDistance(a){const e=this._pickupPositionOnPage;return e?{x:a.x-e.x,y:a.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:a,y:e}=this._passiveTransform;if(0===a&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===i.width&&0===i.height)return;const s=n.left-i.left,r=i.right-n.right,c=n.top-i.top,l=i.bottom-n.bottom;n.width>i.width?(s>0&&(a+=s),r>0&&(a-=r)):a=0,n.height>i.height?(c>0&&(e+=c),l>0&&(e-=l)):e=0,(a!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:a})}_getDragStartDelay(a){const e=this.dragStartDelay;return"number"==typeof e?e:Z(a)?e.touch:e?e.mouse:0}_updateOnScroll(a){const e=this._parentPositions.handleScroll(a);if(e){const i=(0,T.sA)(a);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&O(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,T.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(a,e){const i=this._previewContainer||"global";if("parent"===i)return a;if("global"===i){const n=this._document;return e||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return(0,f.fI)(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(a){return this._handles.find(e=>a.target&&(a.target===e||e.contains(a.target)))}}function Q(o,a){return`translate3d(${Math.round(o)}px, ${Math.round(a)}px, 0)`}function kt(o,a,e){return Math.max(a,Math.min(e,o))}function Z(o){return"t"===o.type[0]}function It(o,a){const e=o.rootNodes;if(1===e.length&&e[0].nodeType===a.ELEMENT_NODE)return e[0];const i=a.createElement("div");return e.forEach(n=>i.appendChild(n)),i}function Mt(o,a){o.style.width=`${a.width}px`,o.style.height=`${a.height}px`,o.style.transform=Q(a.left,a.top)}function St(o,a,e){const i=F(a,o.length-1),n=F(e,o.length-1);if(i===n)return;const s=o[i],r=n<i?-1:1;for(let c=i;c!==n;c+=r)o[c]=o[c+r];o[n]=s}function F(o,a){return Math.max(0,Math.min(a,o))}class fe{constructor(a,e){this._element=a,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(a){this.withItems(a)}sort(a,e,i,n){const s=this._itemPositions,r=this._getItemIndexFromPointerPosition(a,e,i,n);if(-1===r&&s.length>0)return null;const c="horizontal"===this.orientation,l=s.findIndex(D=>D.drag===a),d=s[r],b=d.clientRect,w=l>r?1:-1,S=this._getItemOffsetPx(s[l].clientRect,b,w),P=this._getSiblingOffsetPx(l,s,w),N=s.slice();return St(s,l,r),s.forEach((D,xn)=>{if(N[xn]===D)return;const se=D.drag===a,ut=se?S:P,re=se?a.getPlaceholderElement():D.drag.getRootElement();D.offset+=ut,c?(re.style.transform=Y(`translate3d(${Math.round(D.offset)}px, 0, 0)`,D.initialTransform),O(D.clientRect,0,ut)):(re.style.transform=Y(`translate3d(0, ${Math.round(D.offset)}px, 0)`,D.initialTransform),O(D.clientRect,ut,0))}),this._previousSwap.overlaps=it(b,e,i),this._previousSwap.drag=d.drag,this._previousSwap.delta=c?n.x:n.y,{previousIndex:l,currentIndex:r}}enter(a,e,i,n){const s=null==n||n<0?this._getItemIndexFromPointerPosition(a,e,i):n,r=this._activeDraggables,c=r.indexOf(a),l=a.getPlaceholderElement();let d=r[s];if(d===a&&(d=r[s+1]),!d&&(null==s||-1===s||s<r.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(d=r[0]),c>-1&&r.splice(c,1),d&&!this._dragDropRegistry.isDragging(d)){const u=d.getRootElement();u.parentElement.insertBefore(l,u),r.splice(s,0,a)}else(0,f.fI)(this._element).appendChild(l),r.push(a);l.style.transform="",this._cacheItemPositions()}withItems(a){this._activeDraggables=a.slice(),this._cacheItemPositions()}withSortPredicate(a){this._sortPredicate=a}reset(){this._activeDraggables.forEach(a=>{const e=a.getRootElement();if(e){const i=this._itemPositions.find(n=>n.drag===a)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(a){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===a)}updateOnScroll(a,e){this._itemPositions.forEach(({clientRect:i})=>{O(i,a,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){const a="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:et(i)}}).sort((e,i)=>a?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(a,e,i){const n="horizontal"===this.orientation;let s=n?e.left-a.left:e.top-a.top;return-1===i&&(s+=n?e.width-a.width:e.height-a.height),s}_getSiblingOffsetPx(a,e,i){const n="horizontal"===this.orientation,s=e[a].clientRect,r=e[a+-1*i];let c=s[n?"width":"height"]*i;if(r){const l=n?"left":"top",d=n?"right":"bottom";-1===i?c-=r.clientRect[l]-s[d]:c+=s[l]-r.clientRect[d]}return c}_shouldEnterAsFirstChild(a,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,n="horizontal"===this.orientation;if(i[0].drag!==this._activeDraggables[0]){const r=i[i.length-1].clientRect;return n?a>=r.right:e>=r.bottom}{const r=i[0].clientRect;return n?a<=r.left:e<=r.top}}_getItemIndexFromPointerPosition(a,e,i,n){const s="horizontal"===this.orientation,r=this._itemPositions.findIndex(({drag:c,clientRect:l})=>c!==a&&((!n||c!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?n.x:n.y)!==this._previousSwap.delta)&&(s?e>=Math.floor(l.left)&&e<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom))));return-1!==r&&this._sortPredicate(r,a)?r:-1}}var C=function(o){return o[o.NONE=0]="NONE",o[o.UP=1]="UP",o[o.DOWN=2]="DOWN",o}(C||{}),v=function(o){return o[o.NONE=0]="NONE",o[o.LEFT=1]="LEFT",o[o.RIGHT=2]="RIGHT",o}(v||{});class ve{constructor(a,e,i,n,s){this._dragDropRegistry=e,this._ngZone=n,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new _.x,this.entered=new _.x,this.exited=new _.x,this.dropped=new _.x,this.sorted=new _.x,this.receivingStarted=new _.x,this.receivingStopped=new _.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=y.w0.EMPTY,this._verticalScrollDirection=C.NONE,this._horizontalScrollDirection=v.NONE,this._stopScrollTimers=new _.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function de(o=0,a=le.z){return o<0&&(o=0),(0,_t.H)(o,o,a)}(0,me.Z).pipe((0,I.R)(this._stopScrollTimers)).subscribe(()=>{const r=this._scrollNode,c=this.autoScrollStep;this._verticalScrollDirection===C.UP?r.scrollBy(0,-c):this._verticalScrollDirection===C.DOWN&&r.scrollBy(0,c),this._horizontalScrollDirection===v.LEFT?r.scrollBy(-c,0):this._horizontalScrollDirection===v.RIGHT&&r.scrollBy(c,0)})},this.element=(0,f.fI)(a),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new xt(i),this._sortStrategy=new fe(this.element,e),this._sortStrategy.withSortPredicate((r,c)=>this.sortPredicate(r,c,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(a,e,i,n){this._draggingStarted(),null==n&&this.sortingDisabled&&(n=this._draggables.indexOf(a)),this._sortStrategy.enter(a,e,i,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:a,container:this,currentIndex:this.getItemIndex(a)})}exit(a){this._reset(),this.exited.next({item:a,container:this})}drop(a,e,i,n,s,r,c,l={}){this._reset(),this.dropped.next({item:a,currentIndex:e,previousIndex:i,container:this,previousContainer:n,isPointerOverContainer:s,distance:r,dropPoint:c,event:l})}withItems(a){const e=this._draggables;return this._draggables=a,a.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(n=>n.isDragging()).every(n=>-1===a.indexOf(n))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(a){return this._sortStrategy.direction=a,this}connectedTo(a){return this._siblings=a.slice(),this}withOrientation(a){return this._sortStrategy.orientation=a,this}withScrollableParents(a){const e=(0,f.fI)(this.element);return this._scrollableElements=-1===a.indexOf(e)?[e,...a]:a.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(a){return this._isDragging?this._sortStrategy.getItemIndex(a):this._draggables.indexOf(a)}isReceiving(){return this._activeSiblings.size>0}_sortItem(a,e,i,n){if(this.sortingDisabled||!this._domRect||!vt(this._domRect,.05,e,i))return;const s=this._sortStrategy.sort(a,e,i,n);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:a})}_startScrollingIfNecessary(a,e){if(this.autoScrollDisabled)return;let i,n=C.NONE,s=v.NONE;if(this._parentPositions.positions.forEach((r,c)=>{c===this._document||!r.clientRect||i||vt(r.clientRect,.05,a,e)&&([n,s]=function xe(o,a,e,i,n){const s=Et(a,n),r=Lt(a,i);let c=C.NONE,l=v.NONE;if(s){const d=o.scrollTop;s===C.UP?d>0&&(c=C.UP):o.scrollHeight-d>o.clientHeight&&(c=C.DOWN)}if(r){const d=o.scrollLeft;"rtl"===e?r===v.RIGHT?d<0&&(l=v.RIGHT):o.scrollWidth+d>o.clientWidth&&(l=v.LEFT):r===v.LEFT?d>0&&(l=v.LEFT):o.scrollWidth-d>o.clientWidth&&(l=v.RIGHT)}return[c,l]}(c,r.clientRect,this._sortStrategy.direction,a,e),(n||s)&&(i=c))}),!n&&!s){const{width:r,height:c}=this._viewportRuler.getViewportSize(),l={width:r,height:c,top:0,right:r,bottom:c,left:0};n=Et(l,e),s=Lt(l,a),i=window}i&&(n!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=s,this._scrollNode=i,(n||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const a=(0,f.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=a.msScrollSnapType||a.scrollSnapType||"",a.scrollSnapType=a.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const a=(0,f.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(a).clientRect}_reset(){this._isDragging=!1;const a=(0,f.fI)(this.element).style;a.scrollSnapType=a.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(a,e){return null!=this._domRect&&it(this._domRect,a,e)}_getSiblingContainerFromPosition(a,e,i){return this._siblings.find(n=>n._canReceive(a,e,i))}_canReceive(a,e,i){if(!this._domRect||!it(this._domRect,e,i)||!this.enterPredicate(a,this))return!1;const n=this._getShadowRoot().elementFromPoint(e,i);if(!n)return!1;const s=(0,f.fI)(this.element);return n===s||s.contains(n)}_startReceiving(a,e){const i=this._activeSiblings;!i.has(a)&&e.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(i.add(a),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:a,receiver:this,items:e}))}_stopReceiving(a){this._activeSiblings.delete(a),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:a,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(a=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(a);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const a=(0,T.kV)((0,f.fI)(this.element));this._cachedShadowRoot=a||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const a=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,a))}}function Et(o,a){const{top:e,bottom:i,height:n}=o,s=.05*n;return a>=e-s&&a<=e+s?C.UP:a>=i-s&&a<=i+s?C.DOWN:C.NONE}function Lt(o,a){const{left:e,right:i,width:n}=o,s=.05*n;return a>=e-s&&a<=e+s?v.LEFT:a>=i-s&&a<=i+s?v.RIGHT:v.NONE}const z=(0,T.i$)({passive:!1,capture:!0});let Te=(()=>{class o{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=n=>n.isDragging(),this.pointerMove=new _.x,this.pointerUp=new _.x,this.scroll=new _.x,this._preventDefaultWhileDragging=n=>{this._activeDragInstances.length>0&&n.preventDefault()},this._persistentTouchmoveListener=n=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&n.preventDefault(),this.pointerMove.next(n))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,z)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,z)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const n=i.type.startsWith("touch");this._globalListeners.set(n?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:z}),n||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:z}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,r)=>{this._document.addEventListener(r,s.handler,s.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new W.y(n=>this._ngZone.runOutsideAngular(()=>{const r=c=>{this._activeDragInstances.length&&n.next(c)};return e.addEventListener("scroll",r,!0),()=>{e.removeEventListener("scroll",r,!0)}}))),(0,E.T)(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(t.R0b),t.LFG(g.K0))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const Ce={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let At=(()=>{class o{constructor(e,i,n,s){this._document=e,this._ngZone=i,this._viewportRuler=n,this._dragDropRegistry=s}createDrag(e,i=Ce){return new ge(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new ve(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(g.K0),t.LFG(t.R0b),t.LFG(R.rL),t.LFG(Te))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const at=new t.OlP("CDK_DRAG_PARENT"),ot=new t.OlP("CdkDragHandle"),Gt=new t.OlP("CdkDragPlaceholder"),Nt=new t.OlP("CdkDragPreview"),Ht=new t.OlP("CDK_DRAG_CONFIG"),Ot=new t.OlP("CdkDropList");let Zt=(()=>{class o{static#t=this._dragInstances=[];get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}constructor(e,i,n,s,r,c,l,d,u,b,w){this.element=e,this.dropContainer=i,this._ngZone=s,this._viewContainerRef=r,this._dir=l,this._changeDetectorRef=u,this._selfHandle=b,this._parentDrag=w,this._destroyed=new _.x,this.started=new t.vpe,this.released=new t.vpe,this.ended=new t.vpe,this.entered=new t.vpe,this.exited=new t.vpe,this.dropped=new t.vpe,this.moved=new W.y(S=>{const P=this._dragRef.moved.pipe((0,gt.U)(N=>({source:this,pointerPosition:N.pointerPosition,event:N.event,delta:N.delta,distance:N.distance}))).subscribe(S);return()=>{P.unsubscribe()}}),this._dragRef=d.createDrag(e,{dragStartThreshold:c&&null!=c.dragStartThreshold?c.dragStartThreshold:5,pointerDirectionChangeThreshold:c&&null!=c.pointerDirectionChangeThreshold?c.pointerDirectionChangeThreshold:5,zIndex:c?.zIndex}),this._dragRef.data=this,o._dragInstances.push(this),c&&this._assignDefaults(c),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,K.q)(1),(0,I.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){const i=e.rootElementSelector,n=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=o._dragInstances.indexOf(this);e>-1&&o._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const e=this.element.nativeElement;let i=e;this.rootElementSelector&&(i=void 0!==e.closest?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):(0,f.fI)(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const i=this._dir,n=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,r=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof n&&n?n:(0,f.su)(n),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(r).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe((0,K.q)(1)).subscribe(()=>{if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains("cdk-drag")){e.withParent(o._dragInstances.find(n=>n.element.nativeElement===i)?._dragRef||null);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){const{lockAxis:i,dragStartDelay:n,constrainPosition:s,previewClass:r,boundaryElement:c,draggingDisabled:l,rootElementSelector:d,previewContainer:u}=e;this.disabled=l??!1,this.dragStartDelay=n||0,i&&(this.lockAxis=i),s&&(this.constrainPosition=s),r&&(this.previewClass=r),c&&(this.boundaryElement=c),d&&(this.rootElementSelector=d),u&&(this.previewContainer=u)}_setupHandlesListener(){this._handles.changes.pipe((0,L.O)(this._handles),(0,he.b)(e=>{const i=e.filter(n=>n._parentDrag===this).map(n=>n.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),(0,V.w)(e=>(0,E.T)(...e.map(i=>i._stateChanges.pipe((0,L.O)(i))))),(0,I.R)(this._destroyed)).subscribe(e=>{const i=this._dragRef,n=e.element.nativeElement;e.disabled?i.disableHandle(n):i.enableHandle(n)})}static#e=this.\u0275fac=function(i){return new(i||o)(t.Y36(t.SBq),t.Y36(Ot,12),t.Y36(g.K0),t.Y36(t.R0b),t.Y36(t.s_b),t.Y36(Ht,8),t.Y36(H.Is,8),t.Y36(At),t.Y36(t.sBO),t.Y36(ot,10),t.Y36(at,12))};static#i=this.\u0275dir=t.lG2({type:o,selectors:[["","cdkDrag",""]],contentQueries:function(i,n,s){if(1&i&&(t.Suo(s,Nt,5),t.Suo(s,Gt,5),t.Suo(s,ot,5)),2&i){let r;t.iGM(r=t.CRH())&&(n._previewTemplate=r.first),t.iGM(r=t.CRH())&&(n._placeholderTemplate=r.first),t.iGM(r=t.CRH())&&(n._handles=r)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,n){2&i&&t.ekj("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[t.lbL.None,"cdkDragData","data"],lockAxis:[t.lbL.None,"cdkDragLockAxis","lockAxis"],rootElementSelector:[t.lbL.None,"cdkDragRootElement","rootElementSelector"],boundaryElement:[t.lbL.None,"cdkDragBoundary","boundaryElement"],dragStartDelay:[t.lbL.None,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[t.lbL.None,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[t.lbL.HasDecoratorInputTransform,"cdkDragDisabled","disabled",t.VuI],constrainPosition:[t.lbL.None,"cdkDragConstrainPosition","constrainPosition"],previewClass:[t.lbL.None,"cdkDragPreviewClass","previewClass"],previewContainer:[t.lbL.None,"cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[t._Bn([{provide:at,useExisting:o}]),t.Xq5,t.TTD]})}return o})();const st=new t.OlP("CdkDropListGroup");let Me=0,Ft=(()=>{class o{static#t=this._dropLists=[];get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}constructor(e,i,n,s,r,c,l){this.element=e,this._changeDetectorRef=n,this._scrollDispatcher=s,this._dir=r,this._group=c,this._destroyed=new _.x,this.connectedTo=[],this.id="cdk-drop-list-"+Me++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new t.vpe,this.entered=new t.vpe,this.exited=new t.vpe,this.sorted=new t.vpe,this._unsortedItems=new Set,this._dropListRef=i.createDropList(e),this._dropListRef.data=this,l&&this._assignDefaults(l),this._dropListRef.enterPredicate=(d,u)=>this.enterPredicate(d.data,u.data),this._dropListRef.sortPredicate=(d,u,b)=>this.sortPredicate(d,u.data,b.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),o._dropLists.push(this),c&&c._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,i)=>e._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const e=o._dropLists.indexOf(this);e>-1&&o._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe((0,L.O)(this._dir.value),(0,I.R)(this._destroyed)).subscribe(i=>e.withDirection(i)),e.beforeStarted.subscribe(()=>{const i=(0,f.Eq)(this.connectedTo).map(n=>"string"==typeof n?o._dropLists.find(r=>r.id===n):n);if(this._group&&this._group._items.forEach(n=>{-1===i.indexOf(n)&&i.push(n)}),!this._scrollableParentsResolved){const n=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(n),this._scrollableParentsResolved=!0}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=(0,f.su)(this.autoScrollStep,2),e.connectedTo(i.filter(n=>n&&n!==this).map(n=>n._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),(0,E.T)(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){const{lockAxis:i,draggingDisabled:n,sortingDisabled:s,listAutoScrollDisabled:r,listOrientation:c}=e;this.disabled=n??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=r??!1,this.orientation=c||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}static#e=this.\u0275fac=function(i){return new(i||o)(t.Y36(t.SBq),t.Y36(At),t.Y36(t.sBO),t.Y36(R.mF),t.Y36(H.Is,8),t.Y36(st,12),t.Y36(Ht,8))};static#i=this.\u0275dir=t.lG2({type:o,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,n){2&i&&(t.uIk("id",n.id),t.ekj("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:[t.lbL.None,"cdkDropListConnectedTo","connectedTo"],data:[t.lbL.None,"cdkDropListData","data"],orientation:[t.lbL.None,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[t.lbL.None,"cdkDropListLockAxis","lockAxis"],disabled:[t.lbL.HasDecoratorInputTransform,"cdkDropListDisabled","disabled",t.VuI],sortingDisabled:[t.lbL.HasDecoratorInputTransform,"cdkDropListSortingDisabled","sortingDisabled",t.VuI],enterPredicate:[t.lbL.None,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[t.lbL.None,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[t.lbL.HasDecoratorInputTransform,"cdkDropListAutoScrollDisabled","autoScrollDisabled",t.VuI],autoScrollStep:[t.lbL.None,"cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[t._Bn([{provide:st,useValue:void 0},{provide:Ot,useExisting:o}]),t.Xq5]})}return o})();var Se=m(9315),Bt=m(553),p=m(7700),M=m(2296);let Pe=(()=>{class o{constructor(){}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-music-delete-dialog"]],standalone:!0,features:[t.jDz],decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-flat-button","","color","warn",3,"mat-dialog-close"]],template:function(i,n){1&i&&(t.TgZ(0,"h1",0),t._uU(1,"Are you sure you want to purge this game?"),t.qZA(),t.TgZ(2,"div",1),t._uU(3,"All musics and albums will be deleted."),t.qZA(),t.TgZ(4,"mat-dialog-actions",2)(5,"button",3),t._uU(6,"Cancel"),t.qZA(),t.TgZ(7,"button",4),t._uU(8,"Confirm"),t.qZA()()),2&i&&(t.xp6(7),t.Q6J("mat-dialog-close",!0))},dependencies:[p.H8,p.ZT,p.uh,p.xY,M.lW],encapsulation:2})}return o})();var G=m(6498);let Re=(()=>{class o{http;apiEndpoint=Bt.N.apiEndpoint;constructor(e){this.http=e}edit(e,i){return this.http.patch(`${this.apiEndpoint}/admin/game-album/${e}`,{name:i.name,date:i.date})}editCover(e,i){const n=new FormData;return n.append("file",i),this.http.patch(`${this.apiEndpoint}/admin/game-album/${e}/cover`,n)}delete(e){return this.http.delete(`${this.apiEndpoint}/admin/game-album/${e}`)}static \u0275fac=function(i){return new(i||o)(t.LFG($.eN))};static \u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Ut=m(2599),Jt=m(6007),rt=m(3680),B=m(8484),ct=m(2438),Yt=m(2096),Ee=m(6232),lt=m(6028),Le=m(836),Ae=m(2181),qt=m(3997),Ge=m(7131),x=m(6825);function Ne(o,a){1&o&&t.Hsn(0)}const dt=["*"],He=["tabListContainer"],Oe=["tabList"],Ze=["tabListInner"],Fe=["nextPaginator"],Be=["previousPaginator"];function Ue(o,a){}const Je=o=>({animationDuration:o}),Ye=(o,a)=>({value:o,params:a}),qe=["tabBodyWrapper"],Qe=["tabHeader"];function ze(o,a){}function je(o,a){if(1&o&&t.YNc(0,ze,0,0,"ng-template",10),2&o){const e=t.oxw().$implicit;t.Q6J("cdkPortalOutlet",e.templateLabel)}}function $e(o,a){if(1&o&&t._uU(0),2&o){const e=t.oxw().$implicit;t.Oqu(e.textLabel)}}function We(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",4,5),t.NdJ("click",function(){const n=t.CHM(e),s=n.$implicit,r=n.$index,c=t.oxw(),l=t.MAs(1);return t.KtG(c._handleClick(s,l,r))})("cdkFocusChange",function(n){const r=t.CHM(e).$index,c=t.oxw();return t.KtG(c._tabFocusChanged(n,r))}),t._UZ(2,"span",6)(3,"div",7),t.TgZ(4,"span",8)(5,"span",9),t.YNc(6,je,1,1,null,10)(7,$e,1,1),t.qZA()()()}if(2&o){const e=a.$implicit,i=a.$index,n=t.MAs(1),s=t.oxw();t.ekj("mdc-tab--active",s.selectedIndex===i),t.Q6J("id",s._getTabLabelId(i))("ngClass",e.labelClass)("disabled",e.disabled)("fitInkBarToContent",s.fitInkBarToContent),t.uIk("tabIndex",s._getTabIndex(i))("aria-posinset",i+1)("aria-setsize",s._tabs.length)("aria-controls",s._getTabContentId(i))("aria-selected",s.selectedIndex===i)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),t.xp6(3),t.Q6J("matRippleTrigger",n)("matRippleDisabled",e.disabled||s.disableRipple),t.xp6(3),t.um2(6,e.templateLabel?6:7)}}function Ke(o,a){1&o&&t.Hsn(0)}function Ve(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-tab-body",11),t.NdJ("_onCentered",function(){t.CHM(e);const n=t.oxw();return t.KtG(n._removeTabBodyWrapperHeight())})("_onCentering",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s._setTabBodyWrapperHeight(n))}),t.qZA()}if(2&o){const e=a.$implicit,i=a.$index,n=t.oxw();t.ekj("mat-mdc-tab-body-active",n.selectedIndex===i),t.Q6J("id",n._getTabContentId(i))("ngClass",e.bodyClass)("content",e.content)("position",e.position)("origin",e.origin)("animationDuration",n.animationDuration)("preserveContent",n.preserveContent),t.uIk("tabindex",null!=n.contentTabIndex&&n.selectedIndex===i?n.contentTabIndex:null)("aria-labelledby",n._getTabLabelId(i))("aria-hidden",n.selectedIndex!==i)}}const Xe=new t.OlP("MatTabContent");let ti=(()=>{class o{constructor(e){this.template=e}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(t.Rgc))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","matTabContent",""]],standalone:!0,features:[t._Bn([{provide:Xe,useExisting:o}])]})}return o})();const ei=new t.OlP("MatTabLabel"),Qt=new t.OlP("MAT_TAB");let ii=(()=>{class o extends B.ig{constructor(e,i,n){super(e,i),this._closestTab=n}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(t.Rgc),t.Y36(t.s_b),t.Y36(Qt,8))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[t._Bn([{provide:ei,useExisting:o}]),t.qOj]})}return o})();const zt=new t.OlP("MAT_TAB_GROUP");let mt=(()=>{class o{get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}get content(){return this._contentPortal}constructor(e,i){this._viewContainerRef=e,this._closestTabGroup=i,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new _.x,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new B.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(t.s_b),t.Y36(zt,8))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["mat-tab"]],contentQueries:function(i,n,s){if(1&i&&(t.Suo(s,ii,5),t.Suo(s,ti,7,t.Rgc)),2&i){let r;t.iGM(r=t.CRH())&&(n.templateLabel=r.first),t.iGM(r=t.CRH())&&(n._explicitContent=r.first)}},viewQuery:function(i,n){if(1&i&&t.Gf(t.Rgc,7),2&i){let s;t.iGM(s=t.CRH())&&(n._implicitContent=s.first)}},hostAttrs:["hidden",""],inputs:{disabled:[t.lbL.HasDecoratorInputTransform,"disabled","disabled",t.VuI],textLabel:[t.lbL.None,"label","textLabel"],ariaLabel:[t.lbL.None,"aria-label","ariaLabel"],ariaLabelledby:[t.lbL.None,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[t._Bn([{provide:Qt,useExisting:o}]),t.Xq5,t.TTD,t.jDz],ngContentSelectors:dt,decls:1,vars:0,template:function(i,n){1&i&&(t.F$t(),t.YNc(0,Ne,1,0,"ng-template"))},encapsulation:2})}return o})();const ht="mdc-tab-indicator--active",jt="mdc-tab-indicator--no-transition";class ni{constructor(a){this._items=a}hide(){this._items.forEach(a=>a.deactivateInkBar())}alignToElement(a){const e=this._items.find(n=>n.elementRef.nativeElement===a),i=this._currentItem;if(e!==i&&(i?.deactivateInkBar(),e)){const n=i?.elementRef.nativeElement.getBoundingClientRect?.();e.activateInkBar(n),this._currentItem=e}}}function ai(o){return class extends o{constructor(...a){super(...a),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(a){const e=(0,f.Ig)(a);this._fitToContent!==e&&(this._fitToContent=e,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(a){const e=this.elementRef.nativeElement;if(!a||!e.getBoundingClientRect||!this._inkBarContentElement)return void e.classList.add(ht);const i=e.getBoundingClientRect(),n=a.width/i.width,s=a.left-i.left;e.classList.add(jt),this._inkBarContentElement.style.setProperty("transform",`translateX(${s}px) scaleX(${n})`),e.getBoundingClientRect(),e.classList.remove(jt),e.classList.add(ht),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this.elementRef.nativeElement.classList.remove(ht)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){const a=this.elementRef.nativeElement.ownerDocument||document;this._inkBarElement=a.createElement("span"),this._inkBarContentElement=a.createElement("span"),this._inkBarElement.className="mdc-tab-indicator",this._inkBarContentElement.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",this._inkBarElement.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){(this._fitToContent?this.elementRef.nativeElement.querySelector(".mdc-tab__content"):this.elementRef.nativeElement).appendChild(this._inkBarElement)}}}const si=ai(class{});let $t=(()=>{class o extends si{constructor(e){super(),this.elementRef=e,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(i,n){2&i&&(t.uIk("aria-disabled",!!n.disabled),t.ekj("mat-mdc-tab-disabled",n.disabled))},inputs:{fitInkBarToContent:"fitInkBarToContent",disabled:[t.lbL.HasDecoratorInputTransform,"disabled","disabled",t.VuI]},standalone:!0,features:[t.Xq5,t.qOj]})}return o})();const Wt=(0,T.i$)({passive:!0});let li=(()=>{class o{get selectedIndex(){return this._selectedIndex}set selectedIndex(e){const i=isNaN(e)?0:e;this._selectedIndex!=i&&(this._selectedIndexChanged=!0,this._selectedIndex=i,this._keyManager&&this._keyManager.updateActiveItem(i))}constructor(e,i,n,s,r,c,l){this._elementRef=e,this._changeDetectorRef=i,this._viewportRuler=n,this._dir=s,this._ngZone=r,this._platform=c,this._animationMode=l,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new _.x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new _.x,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new t.vpe,this.indexFocused=new t.vpe,r.runOutsideAngular(()=>{(0,ct.R)(e.nativeElement,"mouseleave").pipe((0,I.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){(0,ct.R)(this._previousPaginator.nativeElement,"touchstart",Wt).pipe((0,I.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,ct.R)(this._nextPaginator.nativeElement,"touchstart",Wt).pipe((0,I.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const e=this._dir?this._dir.change:(0,Yt.of)("ltr"),i=this._viewportRuler.change(150),n=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new J.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe((0,K.q)(1)).subscribe(n),(0,E.T)(e,i,this._items.changes,this._itemsResized()).pipe((0,I.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),n()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(s=>{this.indexFocused.emit(s),this._setTabFocus(s)})}_itemsResized(){return"function"!=typeof ResizeObserver?Ee.E:this._items.changes.pipe((0,L.O)(this._items),(0,V.w)(e=>new W.y(i=>this._ngZone.runOutsideAngular(()=>{const n=new ResizeObserver(s=>i.next(s));return e.forEach(s=>n.observe(s.elementRef.nativeElement)),()=>{n.disconnect()}}))),(0,Le.T)(1),(0,Ae.h)(e=>e.some(i=>i.contentRect.width>0&&i.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!(0,lt.Vb)(e))switch(e.keyCode){case lt.K5:case lt.L_:if(this.focusIndex!==this.selectedIndex){const i=this._items.get(this.focusIndex);i&&!i.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){const e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return!this._items||!!this._items.toArray()[e]}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();const i=this._tabListContainer.nativeElement;i.scrollLeft="ltr"==this._getLayoutDirection()?0:i.scrollWidth-i.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const e=this.scrollDistance,i="ltr"===this._getLayoutDirection()?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(i)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){return this._scrollTo(this._scrollDistance+("before"==e?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;const i=this._items?this._items.toArray()[e]:null;if(!i)return;const n=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:s,offsetWidth:r}=i.elementRef.nativeElement;let c,l;"ltr"==this._getLayoutDirection()?(c=s,l=c+r):(l=this._tabListInner.nativeElement.offsetWidth-s,c=l-r);const d=this.scrollDistance,u=this.scrollDistance+n;c<d?this.scrollDistance-=d-c:l>u&&(this.scrollDistance+=Math.min(l-u,c-d))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const e=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;e||(this.scrollDistance=0),e!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=e}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,i=e?e.elementRef.nativeElement:null;i?this._inkBar.alignToElement(i):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,i){i&&null!=i.button&&0!==i.button||(this._stopInterval(),(0,_t.H)(650,100).pipe((0,I.R)((0,E.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:n,distance:s}=this._scrollHeader(e);(0===s||s>=n)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const i=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(i,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:i,distance:this._scrollDistance}}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(R.rL),t.Y36(H.Is,8),t.Y36(t.R0b),t.Y36(T.t4),t.Y36(t.QbO,8))};static#e=this.\u0275dir=t.lG2({type:o,inputs:{disablePagination:[t.lbL.HasDecoratorInputTransform,"disablePagination","disablePagination",t.VuI],selectedIndex:[t.lbL.HasDecoratorInputTransform,"selectedIndex","selectedIndex",t.Cb_]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[t.Xq5]})}return o})(),di=(()=>{class o extends li{constructor(e,i,n,s,r,c,l){super(e,i,n,s,r,c,l),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new ni(this._items),super.ngAfterContentInit()}_itemSelected(e){e.preventDefault()}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(R.rL),t.Y36(H.Is,8),t.Y36(t.R0b),t.Y36(T.t4),t.Y36(t.QbO,8))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["mat-tab-header"]],contentQueries:function(i,n,s){if(1&i&&t.Suo(s,$t,4),2&i){let r;t.iGM(r=t.CRH())&&(n._items=r)}},viewQuery:function(i,n){if(1&i&&(t.Gf(He,7),t.Gf(Oe,7),t.Gf(Ze,7),t.Gf(Fe,5),t.Gf(Be,5)),2&i){let s;t.iGM(s=t.CRH())&&(n._tabListContainer=s.first),t.iGM(s=t.CRH())&&(n._tabList=s.first),t.iGM(s=t.CRH())&&(n._tabListInner=s.first),t.iGM(s=t.CRH())&&(n._nextPaginator=s.first),t.iGM(s=t.CRH())&&(n._previousPaginator=s.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(i,n){2&i&&t.ekj("mat-mdc-tab-header-pagination-controls-enabled",n._showPaginationControls)("mat-mdc-tab-header-rtl","rtl"==n._getLayoutDirection())},inputs:{disableRipple:[t.lbL.HasDecoratorInputTransform,"disableRipple","disableRipple",t.VuI]},standalone:!0,features:[t.Xq5,t.qOj,t.jDz],ngContentSelectors:dt,decls:13,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-mdc-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(i,n){1&i&&(t.F$t(),t.TgZ(0,"button",0,1),t.NdJ("click",function(){return n._handlePaginatorClick("before")})("mousedown",function(r){return n._handlePaginatorPress("before",r)})("touchend",function(){return n._stopInterval()}),t._UZ(2,"div",2),t.qZA(),t.TgZ(3,"div",3,4),t.NdJ("keydown",function(r){return n._handleKeydown(r)}),t.TgZ(5,"div",5,6),t.NdJ("cdkObserveContent",function(){return n._onContentChanges()}),t.TgZ(7,"div",7,8),t.Hsn(9),t.qZA()()(),t.TgZ(10,"button",9,10),t.NdJ("mousedown",function(r){return n._handlePaginatorPress("after",r)})("click",function(){return n._handlePaginatorClick("after")})("touchend",function(){return n._stopInterval()}),t._UZ(12,"div",2),t.qZA()),2&i&&(t.ekj("mat-mdc-tab-header-pagination-disabled",n._disableScrollBefore),t.Q6J("matRippleDisabled",n._disableScrollBefore||n.disableRipple)("disabled",n._disableScrollBefore||null),t.xp6(3),t.ekj("_mat-animation-noopable","NoopAnimations"===n._animationMode),t.xp6(7),t.ekj("mat-mdc-tab-header-pagination-disabled",n._disableScrollAfter),t.Q6J("matRippleDisabled",n._disableScrollAfter||n.disableRipple)("disabled",n._disableScrollAfter||null))},dependencies:[rt.wG,Ge.wD],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2})}return o})();const mi=new t.OlP("MAT_TABS_CONFIG"),hi={translateTab:(0,x.X$)("translateTab",[(0,x.SB)("center, void, left-origin-center, right-origin-center",(0,x.oB)({transform:"none"})),(0,x.SB)("left",(0,x.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,x.SB)("right",(0,x.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,x.eR)("* => left, * => right, left => center, right => center",(0,x.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,x.eR)("void => left-origin-center",[(0,x.oB)({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),(0,x.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,x.eR)("void => right-origin-center",[(0,x.oB)({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),(0,x.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let ui=(()=>{class o extends B.Pl{constructor(e,i,n,s){super(e,i,s),this._host=n,this._centeringSub=y.w0.EMPTY,this._leavingSub=y.w0.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,L.O)(this._host._isCenterPosition(this._host._position))).subscribe(e=>{e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(t._Vd),t.Y36(t.s_b),t.Y36((0,t.Gpc)(()=>Kt)),t.Y36(g.K0))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[t.qOj]})}return o})(),Kt=(()=>{class o{set position(e){this._positionIndex=e,this._computePositionAnimationState()}constructor(e,i,n){this._elementRef=e,this._dir=i,this._dirChangeSubscription=y.w0.EMPTY,this._translateTabComplete=new _.x,this._onCentering=new t.vpe,this._beforeCentering=new t.vpe,this._afterLeavingCenter=new t.vpe,this._onCentered=new t.vpe(!0),this.animationDuration="500ms",this.preserveContent=!1,i&&(this._dirChangeSubscription=i.change.subscribe(s=>{this._computePositionAnimationState(s),n.markForCheck()})),this._translateTabComplete.pipe((0,qt.x)((s,r)=>s.fromState===r.fromState&&s.toState===r.toState)).subscribe(s=>{this._isCenterPosition(s.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(s.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(e){const i=this._isCenterPosition(e.toState);this._beforeCentering.emit(i),i&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(e){return"center"==e||"left-origin-center"==e||"right-origin-center"==e}_computePositionAnimationState(e=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==e?"left":"right":this._positionIndex>0?"ltr"==e?"right":"left":"center"}_computePositionFromOrigin(e){const i=this._getLayoutDirection();return"ltr"==i&&e<=0||"rtl"==i&&e>0?"left-origin-center":"right-origin-center"}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(t.SBq),t.Y36(H.Is,8),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["mat-tab-body"]],viewQuery:function(i,n){if(1&i&&t.Gf(B.Pl,5),2&i){let s;t.iGM(s=t.CRH())&&(n._portalHost=s.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[t.lbL.None,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[t.jDz],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-mdc-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(i,n){1&i&&(t.TgZ(0,"div",0,1),t.NdJ("@translateTab.start",function(r){return n._onTranslateTabStarted(r)})("@translateTab.done",function(r){return n._translateTabComplete.next(r)}),t.YNc(2,Ue,0,0,"ng-template",2),t.qZA()),2&i&&t.Q6J("@translateTab",t.WLB(3,Ye,n._position,t.VKq(1,Je,n.animationDuration)))},dependencies:[ui,R.PQ],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[hi.translateTab]}})}return o})(),pi=0,Vt=(()=>{class o{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(e){this._fitInkBarToContent=e,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=isNaN(e)?null:e}get animationDuration(){return this._animationDuration}set animationDuration(e){const i=e+"";this._animationDuration=/^\d+$/.test(i)?e+"ms":i}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=isNaN(e)?null:e}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){const i=this._elementRef.nativeElement.classList;i.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),e&&i.add("mat-tabs-with-background",`mat-background-${e}`),this._backgroundColor=e}constructor(e,i,n,s){this._elementRef=e,this._changeDetectorRef=i,this._animationMode=s,this._tabs=new t.n_E,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=y.w0.EMPTY,this._tabLabelSubscription=y.w0.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new t.vpe,this.focusChange=new t.vpe,this.animationDone=new t.vpe,this.selectedTabChange=new t.vpe(!0),this._isServer=!(0,t.f3M)(T.t4).isBrowser,this._groupId=pi++,this.animationDuration=n&&n.animationDuration?n.animationDuration:"500ms",this.disablePagination=!(!n||null==n.disablePagination)&&n.disablePagination,this.dynamicHeight=!(!n||null==n.dynamicHeight)&&n.dynamicHeight,null!=n?.contentTabIndex&&(this.contentTabIndex=n.contentTabIndex),this.preserveContent=!!n?.preserveContent,this.fitInkBarToContent=!(!n||null==n.fitInkBarToContent)&&n.fitInkBarToContent,this.stretchTabs=!n||null==n.stretchTabs||n.stretchTabs}ngAfterContentChecked(){const e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){const i=null==this._selectedIndex;if(!i){this.selectedTabChange.emit(this._createChangeEvent(e));const n=this._tabBodyWrapper.nativeElement;n.style.minHeight=n.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((n,s)=>n.isActive=s===e),i||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((i,n)=>{i.position=n-e,null!=this._selectedIndex&&0==i.position&&!i.origin&&(i.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){const i=this._tabs.toArray();let n;for(let s=0;s<i.length;s++)if(i[s].isActive){this._indexToSelect=this._selectedIndex=s,this._lastFocusedTabIndex=null,n=i[s];break}!n&&i[e]&&Promise.resolve().then(()=>{i[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,L.O)(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(i=>i._closestTabGroup===this||!i._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){const i=this._tabHeader;i&&(i.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){const i=new gi;return i.index=e,this._tabs&&this._tabs.length&&(i.tab=this._tabs.toArray()[e]),i}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,E.T)(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e){return`mat-tab-label-${this._groupId}-${e}`}_getTabContentId(e){return`mat-tab-content-${this._groupId}-${e}`}_setTabBodyWrapperHeight(e){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;const i=this._tabBodyWrapper.nativeElement;i.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(i.style.height=e+"px")}_removeTabBodyWrapperHeight(){const e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this.animationDone.emit()}_handleClick(e,i,n){i.focusIndex=n,e.disabled||(this.selectedIndex=n)}_getTabIndex(e){return e===(this._lastFocusedTabIndex??this.selectedIndex)?0:-1}_tabFocusChanged(e,i){e&&"mouse"!==e&&"touch"!==e&&(this._tabHeader.focusIndex=i)}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(mi,8),t.Y36(t.QbO,8))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["mat-tab-group"]],contentQueries:function(i,n,s){if(1&i&&t.Suo(s,mt,5),2&i){let r;t.iGM(r=t.CRH())&&(n._allTabs=r)}},viewQuery:function(i,n){if(1&i&&(t.Gf(qe,5),t.Gf(Qe,5)),2&i){let s;t.iGM(s=t.CRH())&&(n._tabBodyWrapper=s.first),t.iGM(s=t.CRH())&&(n._tabHeader=s.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(i,n){2&i&&(t.Tol("mat-"+(n.color||"primary")),t.Udp("--mat-tab-animation-duration",n.animationDuration),t.ekj("mat-mdc-tab-group-dynamic-height",n.dynamicHeight)("mat-mdc-tab-group-inverted-header","below"===n.headerPosition)("mat-mdc-tab-group-stretch-tabs",n.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[t.lbL.HasDecoratorInputTransform,"fitInkBarToContent","fitInkBarToContent",t.VuI],stretchTabs:[t.lbL.HasDecoratorInputTransform,"mat-stretch-tabs","stretchTabs",t.VuI],dynamicHeight:[t.lbL.HasDecoratorInputTransform,"dynamicHeight","dynamicHeight",t.VuI],selectedIndex:[t.lbL.HasDecoratorInputTransform,"selectedIndex","selectedIndex",t.Cb_],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[t.lbL.HasDecoratorInputTransform,"contentTabIndex","contentTabIndex",t.Cb_],disablePagination:[t.lbL.HasDecoratorInputTransform,"disablePagination","disablePagination",t.VuI],disableRipple:[t.lbL.HasDecoratorInputTransform,"disableRipple","disableRipple",t.VuI],preserveContent:[t.lbL.HasDecoratorInputTransform,"preserveContent","preserveContent",t.VuI],backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[t._Bn([{provide:zt,useExisting:o}]),t.Xq5,t.jDz],ngContentSelectors:dt,decls:9,vars:6,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],[1,"mat-mdc-tab-body-wrapper"],["tabBodyWrapper",""],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","ngClass","disabled","fitInkBarToContent","click","cdkFocusChange"],["tabNode",""],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering"],["class","mdc-tab mat-mdc-tab mat-mdc-focus-indicator","role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",3,"id","mdc-tab--active","ngClass","disabled","fitInkBarToContent"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","ngClass","content","position","origin","animationDuration","preserveContent"]],template:function(i,n){1&i&&(t.F$t(),t.TgZ(0,"mat-tab-header",0,1),t.NdJ("indexFocused",function(r){return n._focusChanged(r)})("selectFocusedIndex",function(r){return n.selectedIndex=r}),t.SjG(2,We,8,16,"div",12,t.x6l),t.qZA(),t.YNc(4,Ke,1,0),t.TgZ(5,"div",2,3),t.SjG(7,Ve,1,12,"mat-tab-body",13,t.x6l),t.qZA()),2&i&&(t.Q6J("selectedIndex",n.selectedIndex||0)("disableRipple",n.disableRipple)("disablePagination",n.disablePagination),t.xp6(2),t.wJu(n._tabs),t.xp6(2),t.um2(4,n._isServer?4:-1),t.xp6(),t.ekj("_mat-animation-noopable","NoopAnimations"===n._animationMode),t.xp6(2),t.wJu(n._tabs))},dependencies:[di,$t,J.kH,g.mk,rt.wG,B.Pl,Kt],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2})}return o})();class gi{}var Xt=m(7494),bi=m(5037);function fi(o,a){if(1&o&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(),t.Oqu(e.game.name)}}function vi(o,a){if(1&o&&(t.TgZ(0,"div",5),t._uU(1," This music also appear in these games "),t.TgZ(2,"ul"),t.YNc(3,fi,2,1,"li",6),t.qZA(),t._uU(4," You'll need to remove them manually if necessary\n"),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.gameToMusic.derivedGameToMusics)}}let xi=(()=>{class o{data;gameToMusic;gameToMusicType=Xt.U;constructor(e){this.data=e}ngOnInit(){this.gameToMusic=this.data}static \u0275fac=function(i){return new(i||o)(t.Y36(p.WI))};static \u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-music-delete-dialog"]],decls:8,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content","",4,"ngIf"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-flat-button","","color","warn",3,"mat-dialog-close"],["mat-dialog-content",""],[4,"ngFor","ngForOf"]],template:function(i,n){1&i&&(t.TgZ(0,"h1",0),t._uU(1,"Are you sure you want to delete this music?"),t.qZA(),t.YNc(2,vi,5,1,"div",1),t.TgZ(3,"mat-dialog-actions",2)(4,"button",3),t._uU(5,"Cancel"),t.qZA(),t.TgZ(6,"button",4),t._uU(7,"Confirm"),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("ngIf",n.gameToMusic.derivedGameToMusics&&n.gameToMusic.derivedGameToMusics.length>0),t.xp6(4),t.Q6J("mat-dialog-close",!0))},dependencies:[g.sg,g.O5,p.ZT,p.uh,p.H8,p.xY,M.lW],encapsulation:2})}return o})();var Ti=m(5438),te=m(9157),ee=m(4630),ie=m(2032);function Ci(o,a){if(1&o&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e),t.xp6(),t.hij(" ",e.name," ")}}let wi=(()=>{class o{data;gameHttpService;adminGameHttpService;dialogRef;myControl=new h.NI;games;gameMusic;constructor(e,i,n,s){this.data=e,this.gameHttpService=i,this.adminGameHttpService=n,this.dialogRef=s}ngOnInit(){this.gameMusic=this.data,this.games=this.myControl.valueChanges.pipe((0,qt.x)(),(0,V.w)(e=>e?this.gameHttpService.search({query:e,nsfw:!0}).pipe((0,gt.U)(i=>i.data)):(0,Yt.of)(null)))}submit(){this.adminGameHttpService.addDerivedGameToMusic(this.gameMusic.id,this.myControl.value).subscribe(e=>{this.dialogRef.close(e)})}displayGame(e){return e?e.name:""}static \u0275fac=function(i){return new(i||o)(t.Y36(p.WI),t.Y36(Ti.q),t.Y36(G.I),t.Y36(p.so))};static \u0275cmp=t.Xpm({type:o,selectors:[["app-derived-music-dialog-dialog"]],decls:16,vars:10,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"ngSubmit"],["id","lobby-autocomplete",2,"width","100%"],["type","text","placeholder","Choose a game","aria-label","Number","matInput","",3,"formControl","matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-flat-button","","color","primary",3,"click"],[3,"value"]],template:function(i,n){if(1&i&&(t.TgZ(0,"h1",0),t._uU(1,"Add this music to another game"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2),t.NdJ("ngSubmit",function(){return!n.myControl.value||n.submit()}),t.TgZ(4,"mat-form-field",3),t._UZ(5,"input",4),t.TgZ(6,"mat-autocomplete",5,6),t.YNc(8,Ci,2,2,"mat-option",7),t.ALo(9,"slice"),t.ALo(10,"async"),t.qZA()()()(),t.TgZ(11,"mat-dialog-actions")(12,"button",8),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return n.submit()}),t._uU(15,"Confirm"),t.qZA()()),2&i){const s=t.MAs(7);t.xp6(5),t.Q6J("formControl",n.myControl)("matAutocomplete",s),t.xp6(),t.Q6J("displayWith",n.displayGame),t.xp6(2),t.Q6J("ngForOf",t.Dn7(9,4,t.lcZ(10,8,n.games),0,30))}},dependencies:[g.sg,p.ZT,p.uh,p.H8,p.xY,M.lW,te.KE,ee.XC,rt.ey,ee.ZL,ie.Nt,h._Y,h.Fj,h.JJ,h.JL,h.F,h.oH,g.Ov,g.OU],encapsulation:2})}return o})(),Di=(()=>{class o{data;gameToMusic;constructor(e){this.data=e}ngOnInit(){this.gameToMusic=this.data}static \u0275fac=function(i){return new(i||o)(t.Y36(p.WI))};static \u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-unlink-dialog"]],decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-flat-button","","color","warn",3,"mat-dialog-close"]],template:function(i,n){1&i&&(t.TgZ(0,"h1",0),t._uU(1,"Are you sure you want to unlink these musics?"),t.qZA(),t.TgZ(2,"div",1),t._uU(3,"The derived music won't be deleted. You'll have to delete it manually"),t.qZA(),t.TgZ(4,"mat-dialog-actions",2)(5,"button",3),t._uU(6,"Cancel"),t.qZA(),t.TgZ(7,"button",4),t._uU(8,"Confirm"),t.qZA()()),2&i&&(t.xp6(7),t.Q6J("mat-dialog-close",!0))},dependencies:[p.ZT,p.uh,p.H8,p.xY,M.lW],encapsulation:2})}return o})();function yi(o,a){1&o&&(t.ynx(0),t.TgZ(1,"div",5)(2,"span",6),t._uU(3,"Loading..."),t.qZA()(),t.BQk())}function ki(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"i",7),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.delete())}),t.qZA()}}function Ii(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1," as "),t.TgZ(2,"span",8),t._uU(3),t.qZA()()),2&o){const e=t.oxw();t.xp6(3),t.AsE("",e.derivedGameToMusic.title," - ",e.derivedGameToMusic.artist,"")}}const Mi=o=>["/admin/games/",o];let Si=(()=>{class o{gameHttpService;dialog;gameMusic;derivedGameToMusic;remove=new t.vpe;loading=!1;constructor(e,i){this.gameHttpService=e,this.dialog=i}delete(){this.dialog.open(Di,{data:this.derivedGameToMusic}).afterClosed().subscribe(i=>{i&&(this.loading=!0,this.gameHttpService.unlink(this.gameMusic.id,this.derivedGameToMusic.id).pipe((0,k.x)(()=>this.loading=!1)).subscribe(()=>{this.remove.emit()}))})}static \u0275fac=function(i){return new(i||o)(t.Y36(G.I),t.Y36(p.uw))};static \u0275cmp=t.Xpm({type:o,selectors:[["app-derived-music"]],inputs:{gameMusic:"gameMusic",derivedGameToMusic:"derivedGameToMusic"},outputs:{remove:"remove"},standalone:!0,features:[t.jDz],decls:7,vars:7,consts:[[1,"d-inline"],[4,"ngIf","ngIfElse"],["deleteIcon",""],["target","_blank",3,"routerLink"],[4,"ngIf"],["role","status",1,"spinner-border","text-primary","spinner-border-sm"],[1,"sr-only"],[1,"me-2","fa-solid","fa-times","text-danger",3,"click"],[1,"text-primary"]],template:function(i,n){if(1&i&&(t.TgZ(0,"small",0),t.YNc(1,yi,4,0,"ng-container",1)(2,ki,1,0,"ng-template",null,2,t.W1O),t.TgZ(4,"a",3),t._uU(5),t.qZA(),t.YNc(6,Ii,4,2,"span",4),t.qZA()),2&i){const s=t.MAs(3);t.xp6(),t.Q6J("ngIf",n.loading)("ngIfElse",s),t.xp6(3),t.Q6J("routerLink",t.VKq(5,Mi,n.derivedGameToMusic.game.slug)),t.xp6(),t.hij(" ",n.derivedGameToMusic.game.name," "),t.xp6(),t.Q6J("ngIf",n.gameMusic.title!==n.derivedGameToMusic.title||n.gameMusic.artist!==n.derivedGameToMusic.artist)}},dependencies:[U.rH,g.O5],encapsulation:2})}return o})();var ne=m(617),j=m(7988);let Pi=(()=>{class o{data;adminGameHttpService;dialogRef;myControl=new h.NI;gameMusic;constructor(e,i,n){this.data=e,this.adminGameHttpService=i,this.dialogRef=n}ngOnInit(){this.gameMusic=this.data}submit(){this.adminGameHttpService.link(this.gameMusic.id,String(this.myControl.value)).subscribe(e=>{this.dialogRef.close(e)})}static \u0275fac=function(i){return new(i||o)(t.Y36(p.WI),t.Y36(G.I),t.Y36(p.so))};static \u0275cmp=t.Xpm({type:o,selectors:[["app-link-dialog"]],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"ngSubmit"],["id","lobby-autocomplete",2,"width","100%"],["type","text","placeholder","enter the derived music ID","aria-label","Number","matInput","",3,"formControl"],["mat-button","","mat-dialog-close",""],["mat-button","","mat-flat-button","","color","primary",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"h1",0),t._uU(1,"Link this music with another music"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2),t.NdJ("ngSubmit",function(){return!n.myControl.value||n.submit()}),t.TgZ(4,"mat-form-field",3),t._UZ(5,"input",4),t.qZA()()(),t.TgZ(6,"mat-dialog-actions")(7,"button",5),t._uU(8,"Cancel"),t.qZA(),t.TgZ(9,"button",6),t.NdJ("click",function(){return n.submit()}),t._uU(10,"Confirm"),t.qZA()()),2&i&&(t.xp6(5),t.Q6J("formControl",n.myControl))},dependencies:[p.ZT,p.uh,p.H8,p.xY,M.lW,te.KE,ie.Nt,h._Y,h.Fj,h.JJ,h.JL,h.F,h.oH],encapsulation:2})}return o})();var Ri=m(6593);function Ei(o,a){1&o&&(t.ynx(0),t.TgZ(1,"div",13)(2,"span",14),t._uU(3,"Loading..."),t.qZA()(),t.BQk())}function Li(o,a){if(1&o&&t._UZ(0,"audio",17),2&o){const e=t.oxw(2);t.Q6J("src",e.src,t.LSH)}}function Ai(o,a){1&o&&t._UZ(0,"span",28)}function Gi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.listen())}),t._UZ(1,"i",26),t.YNc(2,Ai,1,0,"span",27),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(2),t.Q6J("ngIf",e.listenLoading)}}function Ni(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.addDerivedGame())}),t.TgZ(1,"mat-icon"),t._uU(2,"add"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Add to a game"),t.qZA()()}}function Hi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.link())}),t.TgZ(1,"mat-icon"),t._uU(2,"link"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Link"),t.qZA()()}}function Oi(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.YNc(1,Gi,3,1,"button",18),t.TgZ(2,"button",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.delete())}),t._UZ(3,"i",20),t.qZA(),t.TgZ(4,"button",21)(5,"mat-icon"),t._uU(6,"more_vert"),t.qZA()(),t.TgZ(7,"mat-menu",null,22),t.YNc(9,Ni,5,0,"button",23)(10,Hi,5,0,"button",23),t.TgZ(11,"button",24),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.copyId())}),t.TgZ(12,"mat-icon"),t._uU(13,"content_copy"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"copy ID"),t.qZA()()(),t.BQk()}if(2&o){const e=t.MAs(8),i=t.oxw(2);t.xp6(),t.Q6J("ngIf",!i.src),t.xp6(3),t.Q6J("matMenuTriggerFor",e),t.xp6(5),t.Q6J("ngIf",i.gameMusic.type===i.gameToMusicType.Original),t.xp6(),t.Q6J("ngIf",i.gameMusic.type===i.gameToMusicType.Original)}}function Zi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.save())}),t._uU(1,"save"),t.qZA(),t.TgZ(2,"button",30),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.cancel())}),t._uU(3,"cancel"),t.qZA()}}function Fi(o,a){if(1&o&&t.YNc(0,Li,1,1,"audio",15)(1,Oi,16,4,"ng-container",10)(2,Zi,4,0,"ng-template",null,16,t.W1O),2&o){const e=t.MAs(3),i=t.oxw();t.Q6J("ngIf",i.src),t.xp6(),t.Q6J("ngIf",!i.edit)("ngIfElse",e)}}function Bi(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"app-derived-music",33),t.NdJ("remove",function(){const s=t.CHM(e).index,r=t.oxw(2);return t.KtG(r.handleGameMusicDeleted(s))}),t.qZA()}if(2&o){const e=a.$implicit,i=t.oxw(2);t.Q6J("gameMusic",i.gameMusic)("derivedGameToMusic",e)}}function Ui(o,a){if(1&o&&(t.TgZ(0,"div",31)(1,"small"),t._uU(2,"Also appears in"),t.qZA(),t.YNc(3,Bi,1,2,"app-derived-music",32),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.gameMusic.derivedGameToMusics)}}function Ji(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1," as "),t.TgZ(2,"span",36),t._uU(3),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(3),t.AsE("",e.gameMusic.originalGameToMusic.title," - ",e.gameMusic.originalGameToMusic.artist,"")}}const Yi=o=>["/admin/games/",o];function qi(o,a){if(1&o&&(t.TgZ(0,"div",31)(1,"small"),t._uU(2,"from "),t.qZA(),t.TgZ(3,"a",34),t._uU(4),t.qZA(),t.YNc(5,Ji,4,2,"span",35),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("routerLink",t.VKq(3,Yi,e.gameMusic.originalGameToMusic.game.slug)),t.xp6(),t.hij("",e.gameMusic.originalGameToMusic.game.name," "),t.xp6(),t.Q6J("ngIf",e.gameMusic.title!==e.gameMusic.originalGameToMusic.title||e.gameMusic.artist!==e.gameMusic.originalGameToMusic.artist)}}const Qi=o=>({"is-invalid":o});let ae=(()=>{class o{gameHttpService;dom;dialog;gameMusic;remove=new t.vpe;edit=!1;formGroup;loading=!1;duration;formErrorMessage;src;listenLoading=!1;gameToMusicType=Xt.U;constructor(e,i,n){this.gameHttpService=e,this.dom=i,this.dialog=n}ngOnInit(){this.duration=bi.ou.fromSeconds(this.gameMusic.music.duration).toJSDate(),this.formGroup=new h.cw({title:new h.NI(this.gameMusic.title??this.gameMusic.music.title,h.kI.required.bind(this)),artist:new h.NI(this.gameMusic.artist??this.gameMusic.music.artist)})}get title(){return this.formGroup.get("title")}get artist(){return this.formGroup.get("artist")}cancel(){this.edit=!1,this.formGroup.reset()}save(){this.loading=!0,this.gameHttpService.saveMusic(this.gameMusic.id,this.formGroup.value).pipe((0,k.x)(()=>this.loading=!1)).subscribe({next:e=>{this.gameMusic.title=e.title,this.gameMusic.artist=e.artist,this.edit=!1},error:e=>{Array.isArray(e.message)?e.message.map(i=>{const n=this.formGroup.get(i.property);n?.markAsTouched(),n?.setErrors({serverError:i.errors})}):this.formErrorMessage=e.message}})}delete(){this.dialog.open(xi,{data:this.gameMusic}).afterClosed().subscribe(i=>{i&&(this.loading=!0,this.gameHttpService.deleteGameMusic(this.gameMusic).pipe((0,k.x)(()=>this.loading=!1)).subscribe(()=>{this.remove.emit()}))})}listen(){this.listenLoading=!0,this.gameHttpService.listen(this.gameMusic.id).subscribe(e=>{const i=new FileReader;i.onload=n=>{this.listenLoading=!1;const s=n.target.result;"string"==typeof s&&(this.src=this.dom.bypassSecurityTrustUrl(s))},i.readAsDataURL(e)})}addDerivedGame(){this.dialog.open(wi,{data:this.gameMusic}).afterClosed().subscribe(i=>{i&&(this.gameMusic=i)})}handleGameMusicDeleted(e){this.gameMusic={...this.gameMusic,derivedGameToMusics:this.gameMusic.derivedGameToMusics.filter((i,n)=>n!==e)}}link(){this.dialog.open(Pi,{data:this.gameMusic}).afterClosed().subscribe(i=>{i&&(this.gameMusic=i)})}copyId(){navigator.clipboard.writeText(String(this.gameMusic.id))}static \u0275fac=function(i){return new(i||o)(t.Y36(G.I),t.Y36(Ri.H7),t.Y36(p.uw))};static \u0275cmp=t.Xpm({type:o,selectors:[["app-music-row"]],inputs:{gameMusic:"gameMusic"},outputs:{remove:"remove"},standalone:!0,features:[t.jDz],decls:23,vars:17,consts:[[1,"row","tw-w-[100%]"],[1,"col-1"],[3,"formGroup"],[1,"col-3"],["formControlName","title",3,"ngClass","focus","blur","keydown.enter"],["titleInput",""],["formControlName","artist",3,"focus","blur","keydown.enter"],["artistInput",""],[1,"col"],[1,"row","justify-content-end"],[4,"ngIf","ngIfElse"],["musicRowButtons",""],["class","col-12",4,"ngIf"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"],["controls","",3,"src",4,"ngIf"],["editMusicButtons",""],["controls","",3,"src"],["class","btn btn-sm btn-primary col",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-danger","col",3,"click"],[1,"fa-solid","fa-trash"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"btn","btn-sm","btn-primary","col",3,"click"],[1,"fa","fa-play"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"col-12"],["class","row",3,"gameMusic","derivedGameToMusic","remove",4,"ngFor","ngForOf"],[1,"row",3,"gameMusic","derivedGameToMusic","remove"],["target","_blank",3,"routerLink"],[4,"ngIf"],[1,"text-primary"]],template:function(i,n){if(1&i){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.ynx(3,2),t.TgZ(4,"div",3)(5,"input",4,5),t.NdJ("focus",function(){t.CHM(s);const c=t.MAs(6);return t.KtG(c.select())})("blur",function(){return n.save()})("keydown.enter",function(){t.CHM(s);const c=t.MAs(6);return t.KtG(c.blur())}),t.qZA()(),t.TgZ(7,"div",3)(8,"input",6,7),t.NdJ("focus",function(){t.CHM(s);const c=t.MAs(9);return t.KtG(c.select())})("blur",function(){return n.save()})("keydown.enter",function(){t.CHM(s);const c=t.MAs(9);return t.KtG(c.blur())}),t.qZA()(),t.BQk(),t.TgZ(10,"div",1),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"div",1),t._uU(14),t.ALo(15,"number"),t.qZA(),t.TgZ(16,"div",8)(17,"div",9),t.YNc(18,Ei,4,0,"ng-container",10)(19,Fi,4,3,"ng-template",null,11,t.W1O),t.qZA()(),t.YNc(21,Ui,4,1,"div",12)(22,qi,6,5,"div",12),t.qZA()}if(2&i){const s=t.MAs(20);t.xp6(2),t.Oqu(n.gameMusic.track),t.xp6(),t.Q6J("formGroup",n.formGroup),t.xp6(2),t.Q6J("ngClass",t.VKq(15,Qi,n.title.invalid&&(n.title.dirty||n.title.touched))),t.xp6(6),t.Oqu(t.xi3(12,9,n.duration,"mm:ss")),t.xp6(3),t.hij(" ",null!==n.gameMusic.guessAccuracy?t.xi3(15,12,100*n.gameMusic.guessAccuracy,"1.0-2")+"%":"-"," "),t.xp6(4),t.Q6J("ngIf",n.loading)("ngIfElse",s),t.xp6(3),t.Q6J("ngIf",n.gameMusic.derivedGameToMusics&&n.gameMusic.derivedGameToMusics.length>0),t.xp6(),t.Q6J("ngIf",n.gameMusic.originalGameToMusic)}},dependencies:[Si,g.sg,ne.Hw,j.VK,M.RK,j.OP,j.p6,g.O5,g.uU,g.JJ,h.UX,h.Fj,h.JJ,h.JL,h.sg,h.u,g.mk,U.rH],encapsulation:2})}return o})();const zi=["alternativeNameRow",""];function ji(o,a){1&o&&t._UZ(0,"span",3)}let $i=(()=>{class o{adminGameHttpService;alternativeName;disabled;loading=!1;constructor(e){this.adminGameHttpService=e}toggle(){this.loading=!0,this.adminGameHttpService.toggleAlternativeName(this.alternativeName).pipe((0,k.x)(()=>this.loading=!1)).subscribe(()=>{this.alternativeName.enabled=!this.alternativeName.enabled})}static \u0275fac=function(i){return new(i||o)(t.Y36(G.I))};static \u0275cmp=t.Xpm({type:o,selectors:[["","alternativeNameRow",""]],inputs:{alternativeName:"alternativeName",disabled:"disabled"},attrs:zi,decls:5,vars:4,consts:[["scope","row"],["color","primary",3,"ngModel","disabled","ngModelChange","click"],["class","spinner-border text-primary spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","text-primary","spinner-border-sm"]],template:function(i,n){1&i&&(t.TgZ(0,"th",0),t._uU(1),t.qZA(),t.TgZ(2,"td")(3,"mat-slide-toggle",1),t.NdJ("ngModelChange",function(r){return n.alternativeName.enabled=r})("click",function(){return n.loading||n.disabled||n.toggle()}),t.qZA(),t.YNc(4,ji,1,0,"span",2),t.qZA()),2&i&&(t.xp6(),t.Oqu(n.alternativeName.name),t.xp6(2),t.Q6J("ngModel",n.alternativeName.enabled)("disabled",n.loading||n.disabled),t.xp6(),t.Q6J("ngIf",n.loading))},dependencies:[g.O5,Ut.Rr,h.JJ,h.On],encapsulation:2})}return o})();const Wi=["gameAlbumDropList"];function Ki(o,a){1&o&&(t.ynx(0),t.TgZ(1,"div",2)(2,"div",3)(3,"span",4),t._uU(4,"Loading..."),t.qZA()()(),t.BQk())}function Vi(o,a){1&o&&t._UZ(0,"span",29)}function Xi(o,a){if(1&o&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(),t.Oqu(e.toggleErrorMessage)}}function tn(o,a){if(1&o&&(t.TgZ(0,"div",31),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(),t.hij(" ",e.musics.errors.apiError," ")}}function en(o,a){1&o&&t._UZ(0,"span",32)}function nn(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.generateAlbums())}),t._uU(1," Generate albums from files metadata "),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("disabled",e.generateAlbumLoading)}}function an(o,a){1&o&&t._UZ(0,"span",32)}function on(o,a){if(1&o&&t._UZ(0,"img",53),2&o){const e=t.oxw().$implicit,i=t.oxw(3);t.Q6J("src",i.cdnUrl+e.cover.path,t.LSH)}}function sn(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"app-music-row",54),t.NdJ("remove",function(){const s=t.CHM(e).$index,r=t.oxw().$implicit,c=t.oxw().$implicit,l=t.oxw(3);return t.KtG(l.handleGameMusicDeleted(s,l.filterByDisk(c,r.number)))}),t.qZA()}2&o&&t.Q6J("gameMusic",a.$implicit)}function rn(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"h5"),t._uU(1),t.qZA(),t.TgZ(2,"div",51,35),t.NdJ("cdkDropListDropped",function(n){const r=t.CHM(e).$implicit,c=t.oxw().$implicit,l=t.oxw(3);return t.KtG(l.drop(n,c,r.number))}),t.SjG(4,sn,1,1,"app-music-row",55,t.x6l),t.qZA()}if(2&o){const e=a.$implicit,i=t.oxw().$implicit,n=t.oxw(3);t.xp6(),t.hij("Disk ",e.number,""),t.xp6(),t.Q6J("cdkDropListData",n.filterByDisk(i,e.number))("cdkDropListDisabled",n.reorderLoading),t.xp6(2),t.wJu(n.filterByDisk(i,e.number))}}function cn(o,a){1&o&&(t.TgZ(0,"div",56),t._uU(1,"Drop files with no disks here"),t.qZA())}function ln(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"app-music-row",54),t.NdJ("remove",function(){const s=t.CHM(e).$index,r=t.oxw().$implicit,c=t.oxw(3);return t.KtG(c.handleGameMusicDeleted(s,r.musicsWithNoDisk))}),t.qZA()}2&o&&t.Q6J("gameMusic",a.$implicit)}const oe=o=>({"is-invalid":o});function dn(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",33)(1,"input",37,38),t.NdJ("ngModelChange",function(n){const r=t.CHM(e).$implicit;return t.KtG(r.name=n)})("keydown.enter",function(){t.CHM(e);const n=t.MAs(2);return t.KtG(n.blur())})("blur",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.updateAlbumName(s))})("focus",function(){t.CHM(e);const n=t.MAs(2);return t.KtG(n.select())}),t.qZA(),t.TgZ(3,"input",39,40),t.NdJ("ngModelChange",function(n){const r=t.CHM(e).$implicit;return t.KtG(r.date=n)})("keydown.enter",function(){t.CHM(e);const n=t.MAs(4);return t.KtG(n.blur())})("blur",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.updateAlbumName(s))})("focus",function(){t.CHM(e);const n=t.MAs(4);return t.KtG(n.select())}),t.qZA(),t.TgZ(5,"div",41)(6,"div",42)(7,"div",43)(8,"button",44),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(11);return t.KtG(n.click())}),t._uU(9," Edit image "),t.qZA(),t.TgZ(10,"input",45,46),t.NdJ("change",function(n){const r=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.preUploadImage(n,r))}),t.qZA(),t.YNc(12,on,1,1,"img",47),t.qZA(),t.TgZ(13,"button",48),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.delete(s))}),t._uU(14,"Delete album"),t.qZA()(),t.TgZ(15,"div",49),t.SjG(16,rn,6,3,null,null,t.x6l),t.TgZ(18,"button",50),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.addDiskToAlbum(s))}),t._uU(19,"add Disk"),t.qZA(),t.TgZ(20,"div",51,35),t.NdJ("cdkDropListDropped",function(n){const r=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.drop(n,r))}),t.YNc(22,cn,2,0,"div",52),t.SjG(23,ln,1,1,"app-music-row",55,t.x6l),t.qZA()()()()}if(2&o){const e=a.$implicit,i=t.oxw(3);t.xp6(),t.Q6J("ngModel",e.name),t.xp6(2),t.Q6J("ngModel",e.date),t.xp6(7),t.Q6J("ngClass",t.VKq(7,oe,i.musics.invalid&&(i.musics.dirty||i.musics.touched))),t.xp6(2),t.Q6J("ngIf",null==e||null==e.cover?null:e.cover.path),t.xp6(4),t.wJu(e.disks),t.xp6(4),t.Q6J("cdkDropListData",e.musicsWithNoDisk)("cdkDropListDisabled",i.reorderLoading),t.xp6(2),t.um2(22,0===e.musicsWithNoDisk.length?22:-1),t.xp6(),t.wJu(e.musicsWithNoDisk)}}function mn(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"app-music-row",54),t.NdJ("remove",function(){const s=t.CHM(e).index,r=t.oxw(3);return t.KtG(r.handleGameMusicDeleted(s,r.game.musics))}),t.qZA()}2&o&&t.Q6J("gameMusic",a.$implicit)}function hn(o,a){if(1&o){const e=t.EpF();t.SjG(0,dn,25,9,"div",57,t.x6l),t.TgZ(2,"div",33)(3,"h1"),t._uU(4,"Other musics"),t.qZA(),t.TgZ(5,"div",34,35),t.NdJ("cdkDropListDropped",function(n){t.CHM(e);const s=t.oxw(2);return t.KtG(s.drop(n))}),t.YNc(7,mn,1,1,"app-music-row",36),t.qZA()()}if(2&o){const e=t.oxw(2);t.wJu(e.game.albums),t.xp6(5),t.Q6J("cdkDropListData",e.game.musics)("cdkDropListDisabled",e.reorderLoading),t.xp6(2),t.Q6J("ngForOf",e.game.musics)}}function un(o,a){if(1&o&&(t.ynx(0),t._UZ(1,"tr",58),t.BQk()),2&o){const e=a.$implicit,i=t.oxw(2);t.xp6(),t.Q6J("alternativeName",e)("disabled",!i.game.enabled)}}function pn(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"h1"),t._uU(1),t.TgZ(2,"a",5),t._uU(3,"IDGB"),t.qZA()(),t.TgZ(4,"div",6)(5,"div",7),t._uU(6," enabled "),t.TgZ(7,"mat-slide-toggle",8),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.game.enabled=n)})("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.loading||n.toggle())}),t.qZA(),t.YNc(8,Vi,1,0,"span",9)(9,Xi,2,1,"span",10),t.qZA(),t.TgZ(10,"mat-tab-group",11)(11,"mat-tab",12)(12,"h2"),t._uU(13,"Musics"),t.qZA(),t.TgZ(14,"div",13)(15,"label",14),t._uU(16,"add musics"),t.qZA(),t.TgZ(17,"input",15),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.preUploadMusic(n))}),t.qZA(),t._UZ(18,"mat-progress-bar",16),t.YNc(19,tn,2,1,"div",17),t.TgZ(20,"button",18),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.uploadLoading||0===n.musicFiles.length||n.uploadMusic())}),t._uU(21," Upload "),t.YNc(22,en,1,0,"span",19),t.qZA()(),t.TgZ(23,"div")(24,"button",20),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.createAlbum())}),t._uU(25," Add new album "),t.qZA(),t.YNc(26,nn,2,1,"button",21),t.TgZ(27,"button",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.purgeMusics())}),t._uU(28," Purge musics "),t.qZA()(),t.YNc(29,an,1,0,"span",23)(30,hn,8,3),t.qZA(),t.TgZ(31,"mat-tab",24)(32,"table",25)(33,"thead",26)(34,"tr")(35,"th",27),t._uU(36,"Alternative names"),t.qZA(),t.TgZ(37,"th",27),t._uU(38,"Enabled"),t.qZA()()(),t.TgZ(39,"tbody"),t.YNc(40,un,2,2,"ng-container",28),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(),t.hij("",e.game.name," "),t.xp6(),t.s9C("href",e.game.url,t.LSH),t.xp6(5),t.Q6J("ngModel",e.game.enabled)("disabled",e.toggleLoading),t.xp6(),t.Q6J("ngIf",e.toggleLoading),t.xp6(),t.Q6J("ngIf",e.toggleErrorMessage),t.xp6(5),t.Q6J("formGroup",e.musicUploadForm),t.xp6(3),t.Q6J("ngClass",t.VKq(17,oe,e.musics.invalid&&(e.musics.dirty||e.musics.touched))),t.xp6(),t.Q6J("value",e.fileUploadProgress),t.xp6(),t.Q6J("ngIf",e.musics.errors),t.xp6(),t.Q6J("disabled",e.uploadLoading||0===e.musicFiles.length||e.generateAlbumLoading),t.xp6(2),t.Q6J("ngIf",e.uploadLoading),t.xp6(2),t.Q6J("disabled",e.generateAlbumLoading),t.xp6(2),t.Q6J("ngIf",e.game.musics.length>0),t.xp6(),t.Q6J("disabled",e.purgeLoading),t.xp6(2),t.um2(29,e.generateAlbumLoading?29:30),t.xp6(11),t.Q6J("ngForOf",e.game.alternativeNames)}}let _n=(()=>{class o{adminGameHttpService;adminAlbumHttpService;route;formBuilder;changeDetectorRef;dialog;slug;game;loading=!1;uploadLoading=!1;generateAlbumLoading=!1;purgeLoading=!1;reorderLoading=!1;musicUploadForm;musicFiles=[];toggleLoading=!1;toggleErrorMessage;fileUploadProgress=0;cdnUrl=Bt.N.cdnUrl;gameAlbumsDropLists;get musics(){return this.musicUploadForm.get("musics")}constructor(e,i,n,s,r,c){this.adminGameHttpService=e,this.adminAlbumHttpService=i,this.route=n,this.formBuilder=s,this.changeDetectorRef=r,this.dialog=c}ngOnInit(){this.init(),this.musicUploadForm=this.formBuilder.group({musics:[null,[h.kI.required.bind(this)]]})}init(){this.loading=!0,this.adminGameHttpService.get(this.route.snapshot.paramMap.get("slug")).subscribe(e=>{this.game=e,this.loading=!1,this.initGameAlbums()})}initGameAlbums(){for(const e of this.game.albums)e.disks=e.musics.reduce((i,n)=>{const s=n.disk??n.music.disk;return null!==s&&!i.some(r=>r.number===s)&&i.push({number:s,data:e.musics.filter(r=>r.disk===s)}),i},[]),e.musicsWithNoDisk=e.musics.filter(i=>null===i.disk);this.connectCdkDropLists()}connectCdkDropLists(){this.changeDetectorRef.detectChanges();for(const e of this.gameAlbumsDropLists)e.connectedTo=this.gameAlbumsDropLists.toArray()}uploadMusic(){this.uploadLoading=!0,this.fileUploadProgress=0,this.adminGameHttpService.uploadMusics(this.route.snapshot.paramMap.get("slug"),this.musicFiles).pipe((0,k.x)(()=>this.uploadLoading=!1)).subscribe({next:e=>{e.type===$.dt.Response&&(this.game=e.body,this.initGameAlbums()),e.type===$.dt.UploadProgress&&(this.fileUploadProgress=e.loaded/e.total*100)},error:e=>{this.musics.setErrors({apiError:e.error.message})}})}preUploadMusic(e){this.musicFiles=e?.target?.files?e.target.files:void 0}preUploadImage(e,i){this.adminAlbumHttpService.editCover(i.id,e.target.files[0]).subscribe(r=>{i.cover=r})}handleGameMusicDeleted(e,i){i.splice(e,1)}toggle(){this.toggleErrorMessage=void 0,this.toggleLoading=!0,this.adminGameHttpService.toggleGame(this.game).pipe((0,k.x)(()=>this.toggleLoading=!1)).subscribe({next:()=>{this.init()},error:e=>{this.toggleErrorMessage=e}})}drop(e,i,n){this.reorderLoading=!0;const s=[];if(e.previousContainer===e.container)St(e.container.data,e.previousIndex,e.currentIndex);else{!function be(o,a,e,i){const n=F(e,o.length-1),s=F(i,a.length);o.length&&a.splice(s,0,o.splice(n,1)[0])}(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex);for(const r of e.previousContainer.data)r.track=e.previousContainer.data.indexOf(r)+1,s.push(this.adminGameHttpService.saveMusic(r.id,r))}for(const r of e.container.data)r.album=i?{id:i.id}:null,r.disk=n??null,r.track=e.container.data.indexOf(r)+1,s.push(this.adminGameHttpService.saveMusic(r.id,r));(0,Se.D)(s).pipe((0,k.x)(()=>this.reorderLoading=!1)).subscribe({})}updateAlbumName(e){this.adminAlbumHttpService.edit(e.id,e).subscribe({})}createAlbum(){this.adminGameHttpService.createAlbum(this.game.slug).subscribe({next:e=>{this.game=e,this.initGameAlbums()}})}purgeMusics(){this.dialog.open(Pe).afterClosed().subscribe(i=>{i&&(this.purgeLoading=!0,this.adminGameHttpService.purgeGame(this.game.slug).pipe((0,k.x)(()=>this.purgeLoading=!1)).subscribe({next:()=>{this.init()}}))})}delete(e){this.adminAlbumHttpService.delete(e.id).subscribe({next:i=>{this.game=i,this.initGameAlbums()}})}generateAlbums(){this.generateAlbumLoading=!0,this.adminGameHttpService.generateAlbums(this.game.slug).pipe((0,k.x)(()=>this.generateAlbumLoading=!1)).subscribe({next:e=>{this.game=e,this.initGameAlbums()}})}filterByDisk(e,i){return e.disks.find(n=>n.number===i).data}addDiskToAlbum(e){0===e.disks.length?e.disks=[{number:1,data:[]}]:e.disks.push({number:e.disks[e.disks.length-1].number+1,data:[]}),this.connectCdkDropLists()}static \u0275fac=function(i){return new(i||o)(t.Y36(G.I),t.Y36(Re),t.Y36(U.gz),t.Y36(h.qu),t.Y36(t.sBO),t.Y36(p.uw))};static \u0275cmp=t.Xpm({type:o,selectors:[["app-game-show"]],viewQuery:function(i,n){if(1&i&&t.Gf(Wi,5),2&i){let s;t.iGM(s=t.CRH())&&(n.gameAlbumsDropLists=s)}},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["gameShow",""],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","orange"],[1,"sr-only"],["mat-stroked-button","","target","_blank",3,"href"],[1,"row"],[1,"col-md-12"],["color","primary",3,"ngModel","disabled","ngModelChange","click"],["class","spinner-border text-primary spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["class","text-danger",4,"ngIf"],["mat-stretch-tabs","false","mat-align-tabs","start"],["label","Musics"],[1,"form-group",3,"formGroup"],["for","exampleFormControlFile1"],["type","file","id","exampleFormControlFile1","formControlName","musics","multiple","","accept","audio/mpeg",1,"form-control-file",3,"ngClass","change"],["mode","determinate",3,"value"],["class","invalid-feedback",4,"ngIf"],[1,"btn","btn-outline-primary",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"btn","btn-small","btn-primary",3,"disabled","click"],["class","btn btn-small btn-primary",3,"disabled","click",4,"ngIf"],[1,"btn","btn-small","btn-danger",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true"],["label","Alternative names"],[1,"table","table-dark","table-striped"],[1,"thead-dark"],["scope","col"],[4,"ngFor","ngForOf"],["role","status","aria-hidden","true",1,"spinner-border","text-primary","spinner-border-sm"],[1,"text-danger"],[1,"invalid-feedback"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"example-container"],["cdkDropList","",1,"example-list","tw-w-4/5",3,"cdkDropListData","cdkDropListDisabled","cdkDropListDropped"],["gameAlbumDropList","cdkDropList"],["cdkDrag","","class","example-box",3,"gameMusic","remove",4,"ngFor","ngForOf"],[1,"name-input",3,"ngModel","ngModelChange","keydown.enter","blur","focus"],["gameAlbumNameInput",""],[3,"ngModel","ngModelChange","keydown.enter","blur","focus"],["gameAlbumDateInput",""],[1,"tw-flex","tw-w-[100%]"],[1,"tw-w-1/5","pe-4"],[1,"tw-w-full","tw-aspect-square","tw-bg-[#141F2B]","tw-relative"],[1,"btn","btn-small","btn-primary","tw-absolute","tw-bottom-0","tw-right-0",3,"click"],["type","file","accept","image/png, image/jpeg",1,"form-control-file","tw-hidden",3,"ngClass","change"],["imageUpload",""],["width","100%","height","100%","alt","album cover",3,"src",4,"ngIf"],[1,"btn","btn-danger",3,"click"],[1,"tw-w-4/5"],[1,"btn","btn-sm","btn-primary",3,"click"],["cdkDropList","",1,"example-list",3,"cdkDropListData","cdkDropListDisabled","cdkDropListDropped"],["class","tw-text-center"],["width","100%","height","100%","alt","album cover",3,"src"],["cdkDrag","",1,"example-box",3,"gameMusic","remove"],["cdkDrag","","class","example-box",3,"gameMusic"],[1,"tw-text-center"],["class","example-container"],["alternativeNameRow","",3,"alternativeName","disabled"]],template:function(i,n){if(1&i&&t.YNc(0,Ki,5,0,"ng-container",0)(1,pn,41,19,"ng-template",null,1,t.W1O),2&i){const s=t.MAs(2);t.Q6J("ngIf",n.loading)("ngIfElse",s)}},dependencies:[g.mk,g.sg,g.O5,Ut.Rr,M.zs,h.Fj,h.JJ,h.JL,h.On,h.sg,h.u,Jt.pW,Ft,Zt,Vt,mt,ae,$i],encapsulation:2})}return o})();var gn=m(6283),bn=m(2596);const fn=[{path:":slug",component:_n}];let vn=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=t.oAB({type:o});static \u0275inj=t.cJS({imports:[g.ez,U.Bz.forChild(fn),ce.m,Jt.Cv,gn.Rq,R.Cl,bn.AV,j.Tx,ne.Ps,Vt,mt,ae]})}return o})()}}]);