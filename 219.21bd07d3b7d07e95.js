"use strict";(self.webpackChunkvgmq=self.webpackChunkvgmq||[]).push([[219],{9219:(j,f,i)=>{i.r(f),i.d(f,{RegisterModule:()=>M});var d=i(6814),m=i(8184),C=i(2132),s=i(6223),v=i(4716),y=i(553),e=i(9212),x=i(4621),T=i(459),_=i(7700),w=i(304),u=i(2939),g=i(7679);const b=["recaptcha"];function k(t,a){if(1&t&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&t){const r=e.oxw();e.xp6(),e.hij(" ",r.formErrorMessage," ")}}function Q(t,a){1&t&&(e.ynx(0),e._uU(1," Username should be at least 4 characters long. "),e.BQk())}function I(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw(2);e.xp6(),e.hij(" ",r.username.errors.serverError," ")}}function J(t,a){if(1&t&&(e.TgZ(0,"div",13),e.YNc(1,Q,2,0,"ng-container",14)(2,I,2,1,"ng-container",14),e.qZA()),2&t){const r=e.oxw();e.xp6(),e.Q6J("ngIf",r.username.errors.minlength),e.xp6(),e.Q6J("ngIf",r.username.errors.serverError)}}function Z(t,a){1&t&&(e.ynx(0),e._uU(1," Please enter a correct email. "),e.BQk())}function Y(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw(2);e.xp6(),e.hij(" ",r.email.errors.serverError," ")}}function R(t,a){if(1&t&&(e.TgZ(0,"div",13),e.YNc(1,Z,2,0,"ng-container",14)(2,Y,2,1,"ng-container",14),e.qZA()),2&t){const r=e.oxw();e.xp6(),e.Q6J("ngIf",r.email.errors.email),e.xp6(),e.Q6J("ngIf",r.email.errors.serverError)}}function U(t,a){1&t&&(e.ynx(0),e._uU(1," Password should at least have 3 characters. "),e.BQk())}function S(t,a){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const r=e.oxw(2);e.xp6(),e.hij(" ",r.password.errors.serverError," ")}}function A(t,a){if(1&t&&(e.TgZ(0,"div",13),e.YNc(1,U,2,0,"ng-container",14)(2,S,2,1,"ng-container",14),e.qZA()),2&t){const r=e.oxw();e.xp6(),e.Q6J("ngIf",r.password.errors.minlength),e.xp6(),e.Q6J("ngIf",r.password.errors.serverError)}}function F(t,a){1&t&&e._UZ(0,"span",15)}const h=t=>({"is-invalid":t});function N(t,a){1&t&&(e.TgZ(0,"div",1)(1,"div",2)(2,"span",3),e._uU(3,"Loading..."),e.qZA()()())}const B=[{path:"",component:(()=>{class t{fb;authHttpService;router;cookieService;dialog;authService;snackBar;signupForm;formErrorMessage;loading=!1;environment=y.N;recaptchaComponent;constructor(r,o,n,c,p,l,P){this.fb=r,this.authHttpService=o,this.router=n,this.cookieService=c,this.dialog=p,this.authService=l,this.snackBar=P}ngOnInit(){this.signupForm=this.fb.group({username:["",[s.kI.required.bind(this),s.kI.minLength(4)]],email:["",[s.kI.required.bind(this),s.kI.email.bind(this)]],password:["",[s.kI.required.bind(this),s.kI.minLength(3)]]})}ngOnDestroy(){this.dialog.closeAll()}registerUser(r){this.loading=!0,this.authHttpService.register(this.signupForm.value,r).pipe((0,v.x)(()=>this.loading=!1)).subscribe({next:()=>{this.signupForm.reset(),this.snackBar.open("Account created! Please check your emails to activate your account",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:1e4}),this.router.navigate(["/"])},error:o=>{o=o.error,Array.isArray(o.message)?o.message.map(n=>{if("string"!=typeof n){const c=this.signupForm.get(n.property);c?.markAsTouched(),c?.setErrors({serverError:n.errors})}}):this.formErrorMessage=o.message,this.recaptchaComponent.reset()}})}get username(){return this.signupForm.get("username")}get email(){return this.signupForm.get("email")}get password(){return this.signupForm.get("password")}static \u0275fac=function(o){return new(o||t)(e.Y36(s.qu),e.Y36(x.C),e.Y36(m.F0),e.Y36(T.N),e.Y36(_.uw),e.Y36(w.e),e.Y36(u.ux))};static \u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],viewQuery:function(o,n){if(1&o&&e.Gf(b,5),2&o){let c;e.iGM(c=e.CRH())&&(n.recaptchaComponent=c.first)}},decls:17,vars:17,consts:[[1,"tw-flex","tw-items-center","tw-justify-center","tw-flex-col",3,"formGroup","ngSubmit"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],["type","text","formControlName","username","placeholder","Username","required","",1,"form-control","!tw-bg-grey","tw-text-center","tw-w-[300px]","md:tw-w-[400px]","tw-h-[53px]","tw-mt-8","tw-mb-2","tw-rounded-md","placeholder:tw-text-white",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","email","formControlName","email","placeholder","Email","required","",1,"form-control","!tw-bg-grey","tw-text-center","tw-w-[300px]","md:tw-w-[400px]","tw-h-[53px]","tw-mb-2","tw-rounded-md","placeholder:tw-text-white",3,"ngClass"],["type","password","formControlName","password","placeholder","Password","required","",1,"form-control","!tw-bg-grey","tw-text-center","tw-w-[300px]","md:tw-w-[400px]","tw-h-[53px]","tw-rounded-md","placeholder:tw-text-white",3,"ngClass"],["theme","dark","size","invisible",1,"tw-text-center",3,"siteKey","resolved"],["recaptcha",""],["type","submit",1,"tw-h-btn","tw-w-btn","tw-bg-lime","tw-mt-6","tw-text-black",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"tw-text-white","tw-text-sm","!tw-mt-5"],["routerLink","/",1,"tw-text-[#59EE7F]","tw-no-underline"],["role","alert",1,"col-md-12","alert","alert-danger"],[1,"invalid-feedback"],[4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,n){if(1&o){const c=e.EpF();e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){e.CHM(c);const l=e.MAs(9);return e.KtG(n.loading||l.execute())}),e.YNc(1,k,2,1,"div",1),e._UZ(2,"input",2),e.YNc(3,J,3,2,"div",3),e._UZ(4,"input",4),e.YNc(5,R,3,2,"div",3),e._UZ(6,"input",5),e.YNc(7,A,3,2,"div",3),e.TgZ(8,"re-captcha",6,7),e.NdJ("resolved",function(l){return l&&n.registerUser(l)}),e.qZA(),e.TgZ(10,"button",8),e._uU(11," Sign Up "),e.YNc(12,F,1,0,"span",9),e.qZA(),e.TgZ(13,"p",10),e._uU(14," Already have an account ? "),e.TgZ(15,"a",11),e._uU(16,"Login"),e.qZA()()()}2&o&&(e.Q6J("formGroup",n.signupForm),e.xp6(),e.Q6J("ngIf",n.formErrorMessage),e.xp6(),e.Q6J("ngClass",e.VKq(11,h,n.username.invalid&&(n.username.dirty||n.username.touched))),e.xp6(),e.Q6J("ngIf",n.username.errors),e.xp6(),e.Q6J("ngClass",e.VKq(13,h,n.email.invalid&&(n.email.dirty||n.email.touched))),e.xp6(),e.Q6J("ngIf",n.email.errors),e.xp6(),e.Q6J("ngClass",e.VKq(15,h,n.password.invalid&&(n.password.dirty||n.password.touched))),e.xp6(),e.Q6J("ngIf",n.password.errors),e.xp6(),e.Q6J("siteKey",n.environment.recaptchaKey),e.xp6(2),e.Q6J("disabled",n.signupForm.invalid||n.loading),e.xp6(2),e.Q6J("ngIf",n.loading))},dependencies:[d.mk,d.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,m.rH,g.wT],encapsulation:2})}return t})()},{path:":token",component:(()=>{class t{authHttpService;authService;route;router;snackBar;loading=!1;constructor(r,o,n,c,p){this.authHttpService=r,this.authService=o,this.route=n,this.router=c,this.snackBar=p}ngOnInit(){this.loading=!0,this.route.paramMap.subscribe(r=>{this.authHttpService.confirm(r.get("token")).pipe((0,v.x)(()=>this.loading=!1)).subscribe({next:o=>{this.authService.setAccessTokenCookie(o.accessToken),this.authService.setRefreshTokenCookie(o.refreshToken),this.snackBar.open("Account activated!",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"success",duration:5e3})},error:o=>{400===o.status&&this.snackBar.open("account already activated",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"danger",duration:5e3}),this.router.navigate(["/"])}})})}static \u0275fac=function(o){return new(o||t)(e.Y36(x.C),e.Y36(w.e),e.Y36(m.gz),e.Y36(m.F0),e.Y36(u.ux))};static \u0275cmp=e.Xpm({type:t,selectors:[["app-confirmation"]],decls:1,vars:1,consts:[["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","text-primary"],[1,"sr-only"]],template:function(o,n){1&o&&e.YNc(0,N,4,0,"div",0),2&o&&e.Q6J("ngIf",n.loading)},dependencies:[d.O5],encapsulation:2})}return t})()}];let M=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=e.oAB({type:t});static \u0275inj=e.cJS({imports:[d.ez,C.m,m.Bz.forChild(B),g.lQ,g.a,u.ZX]})}return t})()}}]);