import{c as k,d as de,e as ai,f as me,g as X,h as dn,i as mn,j as xn}from"./chunk-LE7ZZ3YN.js";import{a as ce}from"./chunk-OXIB3DG5.js";import{c as ue,d as ne,f as H,g as Z,h as ci,i as oe}from"./chunk-EX5OZ4ZJ.js";import{a as Ht,b as Sn}from"./chunk-X4ZTLG52.js";import"./chunk-NJIOGT5G.js";import{a as In,b as Tn,c as kn,d as Mn}from"./chunk-FZQUIEEO.js";import{a as Ui,b as zi}from"./chunk-4UC5HMIL.js";import{A as Rt,B as S,Ca as fn,D as Xe,Da as Vt,E as Gi,Ea as Dt,F as Qi,G as xe,Ga as Lt,H as qi,Ha as Nt,I as Wi,Ia as Bt,J as Yi,Ja as gn,K as Xi,L as $i,M as Zi,N as Ki,O as Ji,P as en,Q as tn,R as Pe,S as nn,U as on,ab as yn,bb as vn,da as rn,db as $e,ea as sn,eb as Ot,f as Mt,fa as an,fb as Cn,ga as ln,hb as wn,i as Hi,ja as cn,k as Et,oa as un,p as si,pa as At,qa as li,ra as pn,s as ji,sa as mt,t as ct,ta as hn,u as dt,ua as Ft,v as we,va as bn,w as F,wa as Pt,x as Se,y as Ye,z as le,za as _n}from"./chunk-5VCEJCLM.js";import{c as We}from"./chunk-FHFROVIL.js";import{B as Ce,E as Oi,d as W,e as Y,f as P,g as It,i as Tt,l as kt,m as qe,n as Ni,z as Bi}from"./chunk-DJK5JOL4.js";import{$b as U,Ab as Vi,Ca as Q,Cb as h,Cc as Fe,D as vi,Da as ye,Ec as L,F as Ci,Fc as he,Gc as be,H as wi,Ha as ee,Hc as Qe,Ja as Ei,Jc as xt,Kc as ri,L as Si,M as ni,N as xi,Nb as ve,Oa as Ri,Ob as l,Pa as wt,Pb as Ae,Pc as $,Qa as Ai,Qb as ae,Rb as oi,Tb as I,Ua as Fi,Ub as je,Uc as N,Vc as q,W as yt,Wb as Ue,X as ge,Xb as ze,Y as Oe,Yb as o,Zb as r,_b as m,ac as z,c as gi,ca as rt,cc as x,da as vt,ea as J,eb as He,ec as Di,f as Ee,fb as St,g as O,ga as se,hb as Pi,hc as f,ia as Ct,ic as u,ja as y,jb as s,jc as at,kc as lt,m as ot,mc as Ge,nb as st,nc as V,ob as b,oc as R,pc as A,q as _t,qa as Ii,r as ft,ra as v,sa as C,ta as Ti,tc as ie,uc as d,vc as T,wb as _,wc as D,xa as ki,xb as te,xc as Li,y as gt,ya as Mi,yb as Re,z as yi}from"./chunk-OYZ5XOMV.js";import{a as fe,b as Be,g as re}from"./chunk-GAL4ENT6.js";var B=function(i){return i.Host="host",i.Player="player",i.Spectator="spectator",i}(B||{}),ut=function(i){return i.Buffering="buffering",i.ReadyToPlayMusic="ready_to_play_music",i}(ut||{});var w=(()=>{class i{authService;router;snack;usersBehaviorSubject=new O([]);meBehaviorSubject=new O(null);lobbyBehaviorSubject=new O(null);currentLobbyAudioBufferBehaviorSubject=new O(null);currentLobbyMusicAnswerBehaviorSubject=new O(null);currentLobbyMusicBehaviorSubject=new O(null);canPlayMusicBehaviorSubject=new O(!1);resumeMusicBehaviorSubject=new O(void 0);messagesBehaviorSubject=new O([]);hintModeGamesBehaviorSubject=new O([]);lobbyLoadProgressBehaviorSubject=new O(0);lobbyErrorBehaviorSubject=new O(void 0);lobbyServerBufferBehaviorSubject=new O(!1);audioContextSubject=new O(null);sourceSubject=new O(null);gainNodeSubject=new O(null);lobby=this.lobbyBehaviorSubject.asObservable();users=this.usersBehaviorSubject.asObservable();me=this.meBehaviorSubject.asObservable();currentLobbyAudioBuffer=this.currentLobbyAudioBufferBehaviorSubject.asObservable();currentLobbyMusicAnswer=this.currentLobbyMusicAnswerBehaviorSubject.asObservable();currentLobbyMusic=this.currentLobbyMusicBehaviorSubject.asObservable();canPlayMusic=this.canPlayMusicBehaviorSubject.asObservable();resumeMusic=this.resumeMusicBehaviorSubject.asObservable();messages=this.messagesBehaviorSubject.asObservable();hintModeGames=this.hintModeGamesBehaviorSubject.asObservable();lobbyLoadProgress=this.lobbyLoadProgressBehaviorSubject.asObservable();error=this.lobbyErrorBehaviorSubject.asObservable();lobbyServerBuffer=this.lobbyServerBufferBehaviorSubject.asObservable();audioContext=this.audioContextSubject.asObservable();source=this.sourceSubject.asObservable();gainNode=this.gainNodeSubject.asObservable();constructor(e,t,n){this.authService=e,this.router=t,this.snack=n}disconnect(){this.lobbyBehaviorSubject.next(null),this.usersBehaviorSubject.next(null),this.meBehaviorSubject.next(null),this.currentLobbyAudioBufferBehaviorSubject.next(null),this.currentLobbyMusicAnswerBehaviorSubject.next(null)}getLobby(){return this.lobbyBehaviorSubject.getValue()}setLobby(e){this.lobbyBehaviorSubject.next(e)}getUsers(){return this.usersBehaviorSubject.getValue()}getMe(){return this.meBehaviorSubject.getValue()}setUsers(e){let t=e.find(n=>n.user.username===this.authService.decodeJwt().username);t===void 0?(this.snack.open("You have been kicked out from the lobby",void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"danger",duration:5e3}),this.router.navigate(["/"])):(t.me=!0,this.usersBehaviorSubject.next(e),this.meBehaviorSubject.next(t))}getCurrentLobbyAudioBuffer(){return this.currentLobbyAudioBufferBehaviorSubject.getValue()}setCurrentLobbyAudioBuffer(e){this.currentLobbyAudioBufferBehaviorSubject.next(e)}getCurrentLobbyMusicAnswer(){return this.currentLobbyMusicAnswerBehaviorSubject.getValue()}setCurrentLobbyMusicAnswer(e){this.currentLobbyMusicAnswerBehaviorSubject.next(e)}getCurrentLobbyMusic(){return this.currentLobbyMusicBehaviorSubject.getValue()}setCurrentLobbyMusic(e){this.currentLobbyMusicBehaviorSubject.next(e),this.currentLobbyMusicAnswerBehaviorSubject.next(null)}getCurrentLobbyAudioContext(){return this.audioContextSubject.getValue()}setCurrentLobbyAudioContext(e){this.audioContextSubject.next(e)}setCurrentLobbyGainNode(e){this.gainNodeSubject.next(e)}getCurrentLobbyGainNode(){return this.gainNodeSubject.getValue()}getCurrentLobbySource(){return this.sourceSubject.getValue()}setCurrentLobbySource(e){this.sourceSubject.next(e)}updateLobbyUser(e){let t=this.getUsers(),n=t.findIndex(a=>a.user.username===e.user.username);n!==-1?t[n]=e:t=[...t,e],this.setUsers(t)}getCanPlayMusic(){return this.canPlayMusicBehaviorSubject.getValue()}setCanPlayMusic(e){this.canPlayMusicBehaviorSubject.next(e)}setResumeMusic(){this.resumeMusicBehaviorSubject.next()}getMessages(){return this.messagesBehaviorSubject.getValue()}addMessage(e){this.messagesBehaviorSubject.next([...this.getMessages(),e])}setMessages(e){this.messagesBehaviorSubject.next(e)}setHintModeGames(e){this.hintModeGamesBehaviorSubject.next(e);let t=this.getMe();t&&(t.hintMode=!0)}setLobbyLoadProgress(e){this.lobbyLoadProgressBehaviorSubject.next(e)}setLobbyError(e){this.lobbyErrorBehaviorSubject.next(e)}resetLobbyError(){this.lobbyErrorBehaviorSubject.next(void 0)}setLobbyServerBuffer(e){this.lobbyServerBufferBehaviorSubject.next(e)}sortUsersByPoints(e){return e.filter(t=>[B.Host,B.Player].includes(t.role)).sort((t,n)=>t.points>n.points?-1:1).reduce((t,n,a)=>{let p=a===0?1:t[a-1].rank+1;return a!==0&&n.points===t[a-1].points&&(p=t[a-1].rank),[...t,Be(fe({},n),{rank:p})]},[])}static \u0275fac=function(t){return new(t||i)(Ct(We),Ct(Ce),Ct(Ht))};static \u0275prov=vt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Ro=["knob"],Ao=["valueIndicatorContainer"];function Fo(i,c){if(i&1&&(o(0,"div",2,1)(2,"div",5)(3,"span",6),d(4),r()()()),i&2){let e=u();s(4),T(e.valueIndicatorText)}}var Po=["trackActive"],Vo=["*"];function Do(i,c){if(i&1&&m(0,"div"),i&2){let e=c.$implicit,t=c.$index,n=u(3);oi(e===0?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Ae("transform",n._calcTickMarkTransform(t))}}function Lo(i,c){if(i&1&&Ue(0,Do,1,4,"div",8,je),i&2){let e=u(2);ze(e._tickMarks)}}function No(i,c){if(i&1&&(o(0,"div",6,1),h(2,Lo,2,0),r()),i&2){let e=u();s(2),I(e._cachedWidth?2:-1)}}function Bo(i,c){if(i&1&&m(0,"mat-slider-visual-thumb",7),i&2){let e=u();l("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}var g=function(i){return i[i.START=1]="START",i[i.END=2]="END",i}(g||{}),Ze=function(i){return i[i.ACTIVE=0]="ACTIVE",i[i.INACTIVE=1]="INACTIVE",i}(Ze||{}),mi=new se("_MatSlider"),Rn=new se("_MatSliderThumb"),An=new se("_MatSliderRangeThumb"),Fn=new se("_MatSliderVisualThumb");var Oo=(()=>{class i{_cdr=y($);_ngZone=y(ye);_slider=y(mi);_renderer=y(st);_listenerCleanups;discrete;thumbPosition;valueIndicatorText;_ripple;_knob;_valueIndicatorContainer;_sliderInput;_sliderInputEl;_hoverRippleRef;_focusRippleRef;_activeRippleRef;_isHovered=!1;_isActive=!1;_isValueIndicatorVisible=!1;_hostElement=y(ee).nativeElement;_platform=y(Mt);constructor(){}ngAfterViewInit(){let e=this._slider._getInput(this.thumbPosition);e&&(this._ripple.radius=24,this._sliderInput=e,this._sliderInputEl=this._sliderInput._hostElement,this._ngZone.runOutsideAngular(()=>{let t=this._sliderInputEl,n=this._renderer;this._listenerCleanups=[n.listen(t,"pointermove",this._onPointerMove),n.listen(t,"pointerdown",this._onDragStart),n.listen(t,"pointerup",this._onDragEnd),n.listen(t,"pointerleave",this._onMouseLeave),n.listen(t,"focus",this._onFocus),n.listen(t,"blur",this._onBlur)]}))}ngOnDestroy(){this._listenerCleanups?.forEach(e=>e())}_onPointerMove=e=>{if(this._sliderInput._isFocused)return;let t=this._hostElement.getBoundingClientRect(),n=this._slider._isCursorOnSliderThumb(e,t);this._isHovered=n,n?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)};_onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)};_onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")};_onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")};_onDragStart=e=>{e.button===0&&(this._isActive=!0,this._showActiveRipple())};_onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()};_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return e?.state===li.FADING_IN||e?.state===li.VISIBLE}_showRipple(e,t){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===g.START?g.END:g.START)._showValueIndicator(),!(this._slider._globalRippleOptions?.disabled&&!t)))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();let t=this._getSibling();t._isShowingAnyRipple()||(this._hideValueIndicator(),t._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===g.START?g.END:g.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(t,n){if(t&1&&(V(mt,5),V(Ro,5),V(Ao,5)),t&2){let a;R(a=A())&&(n._ripple=a.first),R(a=A())&&(n._knob=a.first),R(a=A())&&(n._valueIndicatorContainer=a.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[Fe([{provide:Fn,useExisting:i}])],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(t,n){t&1&&(h(0,Fo,5,1,"div",2),m(1,"div",3,0)(3,"div",4)),t&2&&(I(n.discrete?0:-1),s(3),l("matRippleDisabled",!0))},dependencies:[mt],styles:[`.mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}
`],encapsulation:2,changeDetection:0})}return i})(),jt=(()=>{class i{_ngZone=y(ye);_cdr=y($);_elementRef=y(ee);_dir=y(ji,{optional:!0});_globalRippleOptions=y(pn,{optional:!0});_trackActive;_thumbs;_input;_inputs;get disabled(){return this._disabled}set disabled(e){this._disabled=e;let t=this._getInput(g.END),n=this._getInput(g.START);t&&(t.disabled=this._disabled),n&&(n.disabled=this._disabled)}_disabled=!1;get discrete(){return this._discrete}set discrete(e){this._discrete=e,this._updateValueIndicatorUIs()}_discrete=!1;showTickMarks=!1;get min(){return this._min}set min(e){let t=isNaN(e)?this._min:e;this._min!==t&&this._updateMin(t)}_min=0;color;disableRipple=!1;_updateMin(e){let t=this._min;this._min=e,this._isRange?this._updateMinRange({old:t,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){let t=this._getInput(g.END),n=this._getInput(g.START),a=t.value,p=n.value;n.min=e.new,t.min=Math.max(e.new,n.value),n.max=Math.min(t.max,t.value),n._updateWidthInactive(),t._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(t,n):this._onTranslateXChangeBySideEffect(n,t),a!==t.value&&this._onValueChange(t),p!==n.value&&this._onValueChange(n)}_updateMinNonRange(e){let t=this._getInput(g.END);if(t){let n=t.value;t.min=e,t._updateThumbUIByValue(),this._updateTrackUI(t),n!==t.value&&this._onValueChange(t)}}get max(){return this._max}set max(e){let t=isNaN(e)?this._max:e;this._max!==t&&this._updateMax(t)}_max=100;_updateMax(e){let t=this._max;this._max=e,this._isRange?this._updateMaxRange({old:t,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){let t=this._getInput(g.END),n=this._getInput(g.START),a=t.value,p=n.value;t.max=e.new,n.max=Math.min(e.new,t.value),t.min=n.value,t._updateWidthInactive(),n._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(n,t):this._onTranslateXChangeBySideEffect(t,n),a!==t.value&&this._onValueChange(t),p!==n.value&&this._onValueChange(n)}_updateMaxNonRange(e){let t=this._getInput(g.END);if(t){let n=t.value;t.max=e,t._updateThumbUIByValue(),this._updateTrackUI(t),n!==t.value&&this._onValueChange(t)}}get step(){return this._step}set step(e){let t=isNaN(e)?this._step:e;this._step!==t&&this._updateStep(t)}_step=1;_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){let e=this._getInput(g.END),t=this._getInput(g.START),n=e.value,a=t.value,p=t.value;e.min=this._min,t.max=this._max,e.step=this._step,t.step=this._step,this._platform.SAFARI&&(e.value=e.value,t.value=t.value),e.min=Math.max(this._min,t.value),t.max=Math.min(this._max,e.value),t._updateWidthInactive(),e._updateWidthInactive(),e.value<p?this._onTranslateXChangeBySideEffect(t,e):this._onTranslateXChangeBySideEffect(e,t),n!==e.value&&this._onValueChange(e),a!==t.value&&this._onValueChange(t)}_updateStepNonRange(){let e=this._getInput(g.END);if(e){let t=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),t!==e.value&&this._onValueChange(e)}}displayWith=e=>`${e}`;_tickMarks;_noopAnimations;_dirChangeSubscription;_resizeObserver;_cachedWidth;_cachedLeft;_rippleRadius=24;startValueIndicatorText="";endValueIndicatorText="";_endThumbTransform;_startThumbTransform;_isRange=!1;_isRtl=!1;_hasViewInitialized=!1;_tickMarkTrackWidth=0;_hasAnimation=!1;_resizeTimer=null;_platform=y(Mt);constructor(){y(Et).load(At);let e=y(wt,{optional:!0});this._noopAnimations=e==="NoopAnimations",this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl=this._dir.value==="rtl")}_knobRadius=8;_inputPadding;ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();let e=this._getInput(g.END),t=this._getInput(g.START);this._isRange=!!e&&!!t,this._cdr.detectChanges();let n=this._getThumb(g.END);this._rippleRadius=n._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(e,t):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,t){e.initProps(),e.initUI(),t.initProps(),t.initUI(),e._updateMinMax(),t._updateMinMax(),e._updateStaticStyles(),t._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),t._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl=this._dir?.value==="rtl",this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){let e=this._getInput(g.END),t=this._getInput(g.START);e._setIsLeftThumb(),t._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),t.translateX=t._calcTranslateXByValue(),e._updateStaticStyles(),t._updateStaticStyles(),e._updateWidthInactive(),t._updateWidthInactive(),e._updateThumbUIByValue(),t._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(g.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(g.START)._isActive||this._getThumb(g.END)._isActive}_getValue(e=g.END){let t=this._getInput(e);return t?t.value:this.min}_skipUpdate(){return!!(this._getInput(g.START)?._skipUIUpdate||this._getInput(g.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){let t=this._trackActive.nativeElement.style;t.left=e.left,t.right=e.right,t.transformOrigin=e.transformOrigin,t.transform=e.transform}_calcTickMarkTransform(e){let t=e*(this._tickMarkTrackWidth/(this._tickMarks.length-1));return`translateX(${this._isRtl?this._cachedWidth-6-t:t}px`}_onTranslateXChange(e){this._hasViewInitialized&&(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,t){this._hasViewInitialized&&(e._updateThumbUIByValue(),t._updateThumbUIByValue())}_onValueChange(e){this._hasViewInitialized&&(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){let e=this._getInput(g.END),t=this._getInput(g.START);e._updateThumbUIByValue(),t._updateThumbUIByValue(),e._updateStaticStyles(),t._updateStaticStyles(),e._updateMinMax(),t._updateMinMax(),e._updateWidthInactive(),t._updateWidthInactive()}else{let e=this._getInput(g.END);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_thumbsOverlap=!1;_areThumbsOverlapping(){let e=this._getInput(g.START),t=this._getInput(g.END);return!e||!t?!1:t.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){let t=e.getSibling(),n=this._getThumb(e.thumbPosition);this._getThumb(t.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),n._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){if(this._skipUpdate())return;let t=this._getThumb(e.thumbPosition===g.END?g.END:g.START);t._hostElement.style.transform=`translateX(${e.translateX}px)`}_updateValueIndicatorUI(e){if(this._skipUpdate())return;let t=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext.set(t):e._hostElement.setAttribute("aria-valuetext",t),this.discrete){e.thumbPosition===g.START?this.startValueIndicatorText=t:this.endValueIndicatorText=t;let n=this._getThumb(e.thumbPosition);t.length<3?n._hostElement.classList.add("mdc-slider__thumb--short-value"):n._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){let e=this._getInput(g.END),t=this._getInput(g.START);e&&this._updateValueIndicatorUI(e),t&&this._updateValueIndicatorUI(t)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;let e=this._step&&this._step>0?this._step:1,n=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=(this._cachedWidth-6)*n}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){let t=e.getSibling();if(!t||!this._cachedWidth)return;let n=Math.abs(t.translateX-e.translateX)/this._cachedWidth;e._isLeftThumb&&this._cachedWidth?this._setTrackActiveStyles({left:"auto",right:`${this._cachedWidth-t.translateX}px`,transformOrigin:"right",transform:`scaleX(${n})`}):this._setTrackActiveStyles({left:`${t.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${n})`})}_updateTrackUINonRange(e){this._isRtl?this._setTrackActiveStyles({left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}):this._setTrackActiveStyles({left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||this.step===void 0||this.min===void 0||this.max===void 0)return;let e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e)}_updateTickMarkUINonRange(e){let t=this._getValue(),n=Math.max(Math.round((t-this.min)/e),0)+1,a=Math.max(Math.round((this.max-t)/e),0)-1;this._isRtl?n++:a++,this._tickMarks=Array(n).fill(Ze.ACTIVE).concat(Array(a).fill(Ze.INACTIVE))}_updateTickMarkUIRange(e){let t=this._getValue(),n=this._getValue(g.START),a=Math.max(Math.round((n-this.min)/e),0),p=Math.max(Math.round((t-n)/e)+1,0),E=Math.max(Math.round((this.max-t)/e),0);this._tickMarks=Array(a).fill(Ze.INACTIVE).concat(Array(p).fill(Ze.ACTIVE),Array(E).fill(Ze.INACTIVE))}_getInput(e){if(e===g.END&&this._input)return this._input;if(this._inputs?.length)return e===g.START?this._inputs.first:this._inputs.last}_getThumb(e){return e===g.END?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=!this._platform.IOS&&e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(e,t){let n=t.width/2,a=t.x+n,p=t.y+n,E=e.clientX-a,K=e.clientY-p;return Math.pow(E,2)+Math.pow(K,2)<Math.pow(n,2)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["mat-slider"]],contentQueries:function(t,n,a){if(t&1&&(Ge(a,Rn,5),Ge(a,An,4)),t&2){let p;R(p=A())&&(n._input=p.first),R(p=A())&&(n._inputs=p)}},viewQuery:function(t,n){if(t&1&&(V(Po,5),V(Fn,5)),t&2){let a;R(a=A())&&(n._trackActive=a.first),R(a=A())&&(n._thumbs=a)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(t,n){t&2&&(oi("mat-"+(n.color||"primary")),ae("mdc-slider--range",n._isRange)("mdc-slider--disabled",n.disabled)("mdc-slider--discrete",n.discrete)("mdc-slider--tick-marks",n.showTickMarks)("_mat-animation-noopable",n._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",N],discrete:[2,"discrete","discrete",N],showTickMarks:[2,"showTickMarks","showTickMarks",N],min:[2,"min","min",q],color:"color",disableRipple:[2,"disableRipple","disableRipple",N],max:[2,"max","max",q],step:[2,"step","step",q],displayWith:"displayWith"},exportAs:["matSlider"],features:[Fe([{provide:mi,useExisting:i}])],ngContentSelectors:Vo,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(t,n){t&1&&(at(),lt(0),o(1,"div",2),m(2,"div",3),o(3,"div",4),m(4,"div",5,0),r(),h(6,No,3,1,"div",6),r(),h(7,Bo,1,3,"mat-slider-visual-thumb",7),m(8,"mat-slider-visual-thumb",7)),t&2&&(s(6),I(n.showTickMarks?6:-1),s(),I(n._isRange?7:-1),s(),l("discrete",n.discrete)("thumbPosition",2)("valueIndicatorText",n.endValueIndicatorText))},dependencies:[Oo],styles:[`.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mdc-slider-inactive-track-height, 4px)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mdc-slider-active-track-shape, var(--mat-sys-corner-full));height:var(--mdc-slider-active-track-height, 4px);top:calc((var(--mdc-slider-inactive-track-height, 4px) - var(--mdc-slider-active-track-height, 4px))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mdc-slider-active-track-color, var(--mat-sys-primary));border-top-width:var(--mdc-slider-active-track-height, 4px)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mat-sys-on-surface))}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mdc-slider-inactive-track-color, var(--mat-sys-surface-variant));height:var(--mdc-slider-inactive-track-height, 4px);border-radius:var(--mdc-slider-inactive-track-shape, var(--mat-sys-corner-full))}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mat-sys-on-surface));opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:translateX(-50%);transform:var(--mat-slider-value-indicator-container-transform, translateX(-50%) rotate(-45deg))}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;border-radius:4px;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom;opacity:1;transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary));color:var(--mdc-slider-label-label-text-color, var(--mat-sys-on-primary));width:var(--mat-slider-value-indicator-width, 28px);height:var(--mat-slider-value-indicator-height, 28px);padding:var(--mat-slider-value-indicator-padding, 0);opacity:var(--mat-slider-value-indicator-opacity, 1);border-radius:var(--mat-slider-value-indicator-border-radius, 50% 50% 50% 0)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display, none);border-top-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary))}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width, 28px);transform:var(--mat-slider-value-indicator-text-transform, rotate(45deg));font-family:var(--mdc-slider-label-label-text-font, var(--mat-sys-label-medium-font));font-size:var(--mdc-slider-label-label-text-size, var(--mat-sys-label-medium-size));font-weight:var(--mdc-slider-label-label-text-weight, var(--mat-sys-label-medium-weight));line-height:var(--mdc-slider-label-label-text-line-height, var(--mat-sys-label-medium-line-height));letter-spacing:var(--mdc-slider-label-label-text-tracking, var(--mat-sys-label-medium-tracking))}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mdc-slider-handle-width, 20px);height:var(--mdc-slider-handle-height, 20px);border-width:calc(var(--mdc-slider-handle-height, 20px)/2) calc(var(--mdc-slider-handle-width, 20px)/2);box-shadow:var(--mdc-slider-handle-elevation, var(--mat-sys-level1));background-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-radius:var(--mdc-slider-handle-shape, var(--mat-sys-corner-full))}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary))}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary))}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface));border-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface))}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mdc-slider-with-overlap-handle-outline-color, var(--mat-sys-on-primary));border-width:var(--mdc-slider-with-overlap-handle-outline-width, 1px)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mdc-slider-with-tick-marks-container-size, 2px);height:var(--mdc-slider-with-tick-marks-container-size, 2px);border-radius:var(--mdc-slider-with-tick-marks-container-shape, var(--mat-sys-corner-full))}.mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mat-sys-on-surface-variant))}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mat-sys-on-surface))}.mdc-slider__tick-mark--active{opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mat-sys-on-primary))}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color, var(--mat-sys-primary))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 5%, transparent))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 20%, transparent))}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return i})();var Ho={provide:dt,useExisting:rt(()=>Ke),multi:!0},jo={provide:dt,useExisting:rt(()=>ui),multi:!0},Ke=(()=>{class i{_ngZone=y(ye);_elementRef=y(ee);_cdr=y($);_slider=y(mi);_platform=y(Mt);_listenerCleanups;get value(){return q(this._hostElement.value,0)}set value(e){e=isNaN(e)?0:e;let t=e+"";if(!this._hasSetInitialValue){this._initialValue=t;return}this._isActive||this._setValue(t)}_setValue(e){this._hostElement.value=e,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}valueChange=new Q;dragStart=new Q;dragEnd=new Q;get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(this._translateX===void 0&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}_translateX;thumbPosition=g.END;get min(){return q(this._hostElement.min,0)}set min(e){this._hostElement.min=e+"",this._cdr.detectChanges()}get max(){return q(this._hostElement.max,0)}set max(e){this._hostElement.max=e+"",this._cdr.detectChanges()}get step(){return q(this._hostElement.step,0)}set step(e){this._hostElement.step=e+"",this._cdr.detectChanges()}get disabled(){return N(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=e,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?this._translateX===0?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_hostElement=this._elementRef.nativeElement;_valuetext=Ei("");_knobRadius=8;_tickMarkOffset=3;_isActive=!1;_isFocused=!1;_setIsFocused(e){this._isFocused=e}_hasSetInitialValue=!1;_initialValue;_formControl;_destroyed=new Ee;_skipUIUpdate=!1;_onChangeFn;_onTouchedFn=()=>{};_isControlInitialized=!1;constructor(){let e=y(st);this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[e.listen(this._hostElement,"pointerdown",this._onPointerDown.bind(this)),e.listen(this._hostElement,"pointermove",this._onPointerMove.bind(this)),e.listen(this._hostElement,"pointerup",this._onPointerUp.bind(this))]})}ngOnDestroy(){this._listenerCleanups.forEach(e=>e()),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,this._initialValue===void 0?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){if(!(this.disabled||e.button!==0)){if(this._platform.IOS){let t=this._slider._isCursorOnSliderThumb(e,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());this._isActive=t,this._updateWidthActive(),this._slider._updateDimensions();return}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(e),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){let t=e.clientX-this._slider._cachedLeft,n=this._slider._cachedWidth,a=this._slider.step===0?1:this._slider.step,p=Math.floor((this._slider.max-this._slider.min)/a),E=this._slider._isRtl?1-t/n:t/n,De=Math.round(E*p)/p*(this._slider.max-this._slider.min)+this._slider.min,ke=Math.round(De/a)*a,Me=this.value;if(ke===Me){this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation});return}this.value=ke,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(e){let t=this._tickMarkOffset,n=this._slider._cachedWidth-this._tickMarkOffset;return Math.max(Math.min(e,n),t)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-this._tickMarkOffset*2}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,t){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(t)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){(this._isControlInitialized||e!==null)&&(this.value=e)}registerOnChange(e){this._onChangeFn=e,this._isControlInitialized=!0}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}static \u0275fac=function(t){return new(t||i)};static \u0275dir=Re({type:i,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(t,n){t&1&&f("change",function(){return n._onChange()})("input",function(){return n._onInput()})("blur",function(){return n._onBlur()})("focus",function(){return n._onFocus()}),t&2&&ve("aria-valuetext",n._valuetext())},inputs:{value:[2,"value","value",q]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[Fe([Ho,{provide:Rn,useExisting:i}])]})}return i})(),ui=(()=>{class i extends Ke{_cdr=y($);getSibling(){return this._sibling||(this._sibling=this._slider._getInput(this._isEndThumb?g.START:g.END)),this._sibling}_sibling;getMinPos(){let e=this.getSibling();return!this._isLeftThumb&&e?e.translateX:this._tickMarkOffset}getMaxPos(){let e=this.getSibling();return this._isLeftThumb&&e?e.translateX:this._slider._cachedWidth-this._tickMarkOffset}_setIsLeftThumb(){this._isLeftThumb=this._isEndThumb&&this._slider._isRtl||!this._isEndThumb&&!this._slider._isRtl}_isLeftThumb;_isEndThumb;constructor(){super(),this._isEndThumb=this._hostElement.hasAttribute("matSliderEndThumb"),this._setIsLeftThumb(),this.thumbPosition=this._isEndThumb?g.END:g.START}_getDefaultValue(){return this._isEndThumb&&this._slider._isRange?this.max:this.min}_onInput(){super._onInput(),this._updateSibling(),this._isActive||this._updateWidthInactive()}_onNgControlValueChange(){super._onNgControlValueChange(),this.getSibling()?._updateMinMax()}_onPointerDown(e){this.disabled||e.button!==0||(this._sibling&&(this._sibling._updateWidthActive(),this._sibling._hostElement.classList.add("mat-mdc-slider-input-no-pointer-events")),super._onPointerDown(e))}_onPointerUp(){super._onPointerUp(),this._sibling&&setTimeout(()=>{this._sibling._updateWidthInactive(),this._sibling._hostElement.classList.remove("mat-mdc-slider-input-no-pointer-events")})}_onPointerMove(e){super._onPointerMove(e),!this._slider.step&&this._isActive&&this._updateSibling()}_fixValue(e){super._fixValue(e),this._sibling?._updateMinMax()}_clamp(e){return Math.max(Math.min(e,this.getMaxPos()),this.getMinPos())}_updateMinMax(){let e=this.getSibling();e&&(this._isEndThumb?(this.min=Math.max(this._slider.min,e.value),this.max=this._slider.max):(this.min=this._slider.min,this.max=Math.min(this._slider.max,e.value)))}_updateWidthActive(){let e=this._slider._rippleRadius*2-this._slider._inputPadding*2,t=this._slider._cachedWidth+this._slider._inputPadding-e-this._tickMarkOffset*2,n=this._slider.min<this._slider.max?(this.max-this.min)/(this._slider.max-this._slider.min):1,a=t*n+e;this._hostElement.style.width=`${a}px`,this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`}_updateWidthInactive(){let e=this.getSibling();if(!e)return;let t=this._slider._cachedWidth-this._tickMarkOffset*2,n=this._isEndThumb?this.value-(this.value-e.value)/2:this.value+(e.value-this.value)/2,a=this._isEndThumb?(this.max-n)/(this._slider.max-this._slider.min):(n-this.min)/(this._slider.max-this._slider.min),p=this._slider.min<this._slider.max?a:1,E=this._slider._rippleRadius;p===1?E=48:p===0&&(E=0);let K=t*p+E;this._hostElement.style.width=`${K}px`,this._hostElement.style.padding="0px",this._isLeftThumb?(this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`,this._hostElement.style.right="auto"):(this._hostElement.style.left="auto",this._hostElement.style.right=`-${this._slider._rippleRadius-this._tickMarkOffset}px`)}_updateStaticStyles(){this._hostElement.classList.toggle("mat-slider__right-input",!this._isLeftThumb)}_updateSibling(){let e=this.getSibling();e&&(e._updateMinMax(),this._isActive?e._updateWidthActive():e._updateWidthInactive())}writeValue(e){(this._isControlInitialized||e!==null)&&(this.value=e,this._updateWidthInactive(),this._updateSibling())}_setValue(e){super._setValue(e),this._updateWidthInactive(),this._updateSibling()}static \u0275fac=function(t){return new(t||i)};static \u0275dir=Re({type:i,selectors:[["input","matSliderStartThumb",""],["input","matSliderEndThumb",""]],exportAs:["matSliderRangeThumb"],features:[Fe([jo,{provide:An,useExisting:i}]),Vi]})}return i})(),Pn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=te({type:i});static \u0275inj=J({imports:[ct,Pt]})}return i})();var Uo=["input"],zo=["formField"],Go=["*"],Ut=class{source;value;constructor(c,e){this.source=c,this.value=e}},Qo={provide:dt,useExisting:rt(()=>pi),multi:!0},Dn=new se("MatRadioGroup"),qo=new se("mat-radio-default-options",{providedIn:"root",factory:Wo});function Wo(){return{color:"accent",disabledInteractive:!1}}var pi=(()=>{class i{_changeDetector=y($);_value=null;_name=y(si).getId("mat-radio-group-");_selected=null;_isInitialized=!1;_labelPosition="after";_disabled=!1;_required=!1;_buttonChanges;_controlValueAccessorChangeFn=()=>{};onTouched=()=>{};change=new Q;_radios;color;get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition=e==="before"?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=e,this._markRadiosForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markRadiosForCheck()}_disabledInteractive=!1;constructor(){}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(e=>e===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){let e=this._selected!==null&&this._selected.value===this._value;this._radios&&!e&&(this._selected=null,this._radios.forEach(t=>{t.checked=this.value===t.value,t.checked&&(this._selected=t)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Ut(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}static \u0275fac=function(t){return new(t||i)};static \u0275dir=Re({type:i,selectors:[["mat-radio-group"]],contentQueries:function(t,n,a){if(t&1&&Ge(a,zt,5),t&2){let p;R(p=A())&&(n._radios=p)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",N],required:[2,"required","required",N],disabledInteractive:[2,"disabledInteractive","disabledInteractive",N]},outputs:{change:"change"},exportAs:["matRadioGroup"],features:[Fe([Qo,{provide:Dn,useExisting:i}])]})}return i})(),zt=(()=>{class i{_elementRef=y(ee);_changeDetector=y($);_focusMonitor=y(Hi);_radioDispatcher=y(gn);_defaultOptions=y(qo,{optional:!0});_ngZone=y(ye);_renderer=y(st);_uniqueId=y(si).getId("mat-radio-");_cleanupClick;id=this._uniqueId;name;ariaLabel;ariaLabelledby;ariaDescribedby;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked!==e&&(this._checked=e,e&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!e&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),e&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.radioGroup!==null&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}_labelPosition;get disabled(){return this._disabled||this.radioGroup!==null&&this.radioGroup.disabled}set disabled(e){this._setDisabled(e)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=e}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._defaultOptions&&this._defaultOptions.color||"accent"}set color(e){this._color=e}_color;get disabledInteractive(){return this._disabledInteractive||this.radioGroup!==null&&this.radioGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new Q;radioGroup;get inputId(){return`${this.id||this._uniqueId}-input`}_checked=!1;_disabled;_required;_value=null;_removeUniqueSelectionListener=()=>{};_previousTabIndex;_inputElement;_rippleTrigger;_noopAnimations;_injector=y(ki);constructor(){y(Et).load(At);let e=y(Dn,{optional:!0}),t=y(wt,{optional:!0}),n=y(new Mi("tabindex"),{optional:!0});this.radioGroup=e,this._noopAnimations=t==="NoopAnimations",this._disabledInteractive=this._defaultOptions?.disabledInteractive??!1,n&&(this.tabIndex=q(n,0))}focus(e,t){t?this._focusMonitor.focusVia(this._inputElement,t,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((e,t)=>{e!==this.id&&t===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()}),this._ngZone.runOutsideAngular(()=>{this._cleanupClick=this._renderer.listen(this._inputElement.nativeElement,"click",this._onInputClick)})}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Ut(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){let t=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),t&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(e){this._onInputInteraction(e),(!this.disabled||this.disabledInteractive)&&this._inputElement?.nativeElement.focus()}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}_onInputClick=e=>{this.disabled&&this.disabledInteractive&&e.preventDefault()};_updateTabIndex(){let e=this.radioGroup,t;if(!e||!e.selected||this.disabled?t=this.tabIndex:t=e.selected===this?this.tabIndex:-1,t!==this._previousTabIndex){let n=this._inputElement?.nativeElement;n&&(n.setAttribute("tabindex",t+""),this._previousTabIndex=t,Fi(()=>{queueMicrotask(()=>{e&&e.selected&&e.selected!==this&&document.activeElement===n&&(e.selected?._inputElement.nativeElement.focus(),document.activeElement===n&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["mat-radio-button"]],viewQuery:function(t,n){if(t&1&&(V(Uo,5),V(zo,7,ee)),t&2){let a;R(a=A())&&(n._inputElement=a.first),R(a=A())&&(n._rippleTrigger=a.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:19,hostBindings:function(t,n){t&1&&f("focus",function(){return n._inputElement.nativeElement.focus()}),t&2&&(ve("id",n.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),ae("mat-primary",n.color==="primary")("mat-accent",n.color==="accent")("mat-warn",n.color==="warn")("mat-mdc-radio-checked",n.checked)("mat-mdc-radio-disabled",n.disabled)("mat-mdc-radio-disabled-interactive",n.disabledInteractive)("_mat-animation-noopable",n._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",N],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:q(e)],checked:[2,"checked","checked",N],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",N],required:[2,"required","required",N],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",N]},outputs:{change:"change"},exportAs:["matRadioButton"],ngContentSelectors:Go,decls:13,vars:17,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(t,n){if(t&1){let a=x();at(),o(0,"div",2,0)(2,"div",3)(3,"div",4),f("click",function(E){return v(a),C(n._onTouchTargetClick(E))}),r(),o(4,"input",5,1),f("change",function(E){return v(a),C(n._onInputInteraction(E))}),r(),o(6,"div",6),m(7,"div",7)(8,"div",8),r(),o(9,"div",9),m(10,"div",10),r()(),o(11,"label",11),lt(12),r()()}t&2&&(l("labelPosition",n.labelPosition),s(2),ae("mdc-radio--disabled",n.disabled),s(2),l("id",n.inputId)("checked",n.checked)("disabled",n.disabled&&!n.disabledInteractive)("required",n.required),ve("name",n.name)("value",n.value)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedby)("aria-disabled",n.disabled&&n.disabledInteractive?"true":null),s(5),l("matRippleTrigger",n._rippleTrigger.nativeElement)("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",!0),s(2),l("for",n.inputId))},dependencies:[mt,un],styles:[`.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled])~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px);top:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled{pointer-events:auto}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color, var(--mat-sys-primary))}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-radio-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-radio-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-radio-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-radio-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-radio-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple>.mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio>.mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.cdk-focused .mat-focus-indicator::before{content:""}.mat-mdc-radio-disabled{cursor:default;pointer-events:none}.mat-mdc-radio-disabled.mat-mdc-radio-disabled-interactive{pointer-events:auto}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display, block)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}
`],encapsulation:2,changeDetection:0})}return i})(),Ln=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=te({type:i});static \u0275inj=J({imports:[ct,Pt,zt,ct]})}return i})();function Xo(i,c){if(i&1){let e=x();o(0,"div",2),f("@fade.done",function(n){v(e);let a=u();return C(a.onAnimationEnd(n))}),r()}if(i&2){let e=u();l("@fade",e.animationState)("@.disabled",!e.animation)("innerHTML",e.title,He)}}function $o(i,c){if(i&1){let e=x();o(0,"div",3),f("@fade.done",function(n){v(e);let a=u();return C(a.onAnimationEnd(n))}),d(1),r()}if(i&2){let e=u();l("@fade",e.animationState)("@.disabled",!e.animation),s(),D(" ",e.title,`
`)}}var Zo=(()=>{class i{_cdRef;title;html;animation;tooltip=!0;_hidden=new Ee;animationState="hidden";constructor(e){this._cdRef=e}markForCheck(){this._cdRef.markForCheck()}onAnimationEnd(e){e.toState==="hidden"&&this._hidden.next()}static \u0275fac=function(t){return new(t||i)(b($))};static \u0275cmp=_({type:i,selectors:[["mdb-tooltip"]],hostVars:2,hostBindings:function(t,n){t&2&&ae("tooltip",n.tooltip)},inputs:{title:"title",html:"html",animation:"animation"},standalone:!1,decls:2,vars:2,consts:[["class","tooltip-inner",3,"innerHTML",4,"ngIf"],["class","tooltip-inner",4,"ngIf"],[1,"tooltip-inner",3,"innerHTML"],[1,"tooltip-inner"]],template:function(t,n){t&1&&h(0,Xo,1,3,"div",0)(1,$o,2,3,"div",1),t&2&&(l("ngIf",n.html),s(),l("ngIf",!n.html))},dependencies:[P],encapsulation:2,data:{animation:[ue("fade",[Z("visible",H({opacity:1})),Z("hidden",H({opacity:0})),oe("visible => hidden",ne("150ms linear")),oe(":enter",ne("150ms linear"))])]},changeDetection:0})}return i})(),Ie=(()=>{class i{_overlay;_overlayPositionBuilder;_elementRef;mdbTooltip="";tooltipDisabled=!1;placement="top";html=!1;animation=!0;trigger="hover focus";delayShow=0;delayHide=0;offset=6;tooltipShow=new Q;tooltipShown=new Q;tooltipHide=new Q;tooltipHidden=new Q;_overlayRef;_tooltipRef;_open=!1;_showTimeout=0;_hideTimeout=0;_destroy$=new Ee;constructor(e,t,n){this._overlay=e,this._overlayPositionBuilder=t,this._elementRef=n}ngOnInit(){this.tooltipDisabled||this.mdbTooltip===""||this._bindTriggerEvents()}ngOnDestroy(){(this._open||this._showTimeout)&&this.hide(),this._destroy$.next(),this._destroy$.complete()}_bindTriggerEvents(){this.trigger.split(" ").forEach(t=>{if(t==="click")gt(this._elementRef.nativeElement,t).pipe(Oe(this._destroy$)).subscribe(()=>this.toggle());else if(t!=="manual"){let n=t==="hover"?"mouseenter":"focusin",a=t==="hover"?"mouseleave":"focusout";gt(this._elementRef.nativeElement,n).pipe(Oe(this._destroy$)).subscribe(()=>this.show()),gt(this._elementRef.nativeElement,a).pipe(Oe(this._destroy$)).subscribe(()=>this.hide())}})}_createOverlayConfig(){let e=this._overlayPositionBuilder.flexibleConnectedTo(this._elementRef).withPositions(this._getPosition());return new rn({hasBackdrop:!1,scrollStrategy:this._overlay.scrollStrategies.reposition(),positionStrategy:e})}_createOverlay(){this._overlayRef=this._overlay.create(this._createOverlayConfig())}_getPosition(){let e,t={originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:-this.offset},n={originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:this.offset},a={originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:this.offset},p={originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:-this.offset};switch(this.placement){case"top":e=[t,n];break;case"bottom":e=[n,t];break;case"left":e=[p,a];break;case"right":e=[a,p];break;default:break}return e}show(){(this._hideTimeout||this._open)&&(this._overlayRef.detach(),clearTimeout(this._hideTimeout),this._hideTimeout=null),this._createOverlay(),this._showTimeout=setTimeout(()=>{if(!this._overlayRef.hasAttached()){let e=new on(Zo);this.tooltipShow.emit(this),this._open=!0,this._tooltipRef=this._overlayRef.attach(e),this._tooltipRef.instance.title=this.mdbTooltip,this._tooltipRef.instance.html=this.html,this._tooltipRef.instance.animation=this.animation,this._tooltipRef.instance.animationState="visible",this._tooltipRef.instance.markForCheck(),this.tooltipShown.emit(this)}},this.delayShow)}hide(){if(this._showTimeout)clearTimeout(this._showTimeout),this._showTimeout=null;else return;this._hideTimeout=setTimeout(()=>{this.tooltipHide.emit(this),this._tooltipRef?(this._tooltipRef.instance._hidden.pipe(xi()).subscribe(()=>{this._overlayRef.detach(),this._open=!1,this.tooltipHidden.emit(this)}),this._tooltipRef.instance.animationState="hidden",this._tooltipRef.instance.markForCheck()):(this._overlayRef.detach(),this._open=!1,this.tooltipHidden.emit(this))},this.delayHide)}toggle(){this._open?this.hide():this.show()}static \u0275fac=function(t){return new(t||i)(b(an),b(sn),b(ee))};static \u0275dir=Re({type:i,selectors:[["","mdbTooltip",""]],inputs:{mdbTooltip:"mdbTooltip",tooltipDisabled:"tooltipDisabled",placement:"placement",html:"html",animation:"animation",trigger:"trigger",delayShow:"delayShow",delayHide:"delayHide",offset:"offset"},outputs:{tooltipShow:"tooltipShow",tooltipShown:"tooltipShown",tooltipHide:"tooltipHide",tooltipHidden:"tooltipHidden"},exportAs:["mdbTooltip"],standalone:!1})}return i})(),Nn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=te({type:i});static \u0275inj=J({imports:[qe,ln]})}return i})();var tr=["musicPlayedInput"];function ir(i,c){i&1&&m(0,"span",7)}function nr(i,c){if(i&1&&(o(0,"mat-checkbox",71),d(1," Contribute to improving the database "),m(2,"i",72),r()),i&2){let e=u(2);s(2),l("mdbTooltip",e.accuracyText())("html",!0)}}function or(i,c){i&1&&(o(0,"div",52)(1,"h4",73),d(2,"Unlock filters by pledging on Patreon!"),r(),o(3,"a",74),d(4,"Pledge"),r()())}function rr(i,c){if(i&1&&(o(0,"div"),d(1),o(2,"mat-slider",75),m(3,"input",76)(4,"input",77),r(),d(5),r()),i&2){let e=u(2);s(),D(" ",e.lobbyForm.get("filterMinYear").value," "),s(),l("min",e.lobbyInfo.filterMinYear)("max",e.lobbyInfo.filterMaxYear),s(),l("value",e.lobbyInfo.filterMinYear),s(),l("value",e.lobbyInfo.filterMaxYear),s(),D(" ",e.lobbyForm.get("filterMaxYear").value," ")}}function sr(i,c){if(i&1&&m(0,"mat-option",78),i&2){let e=c.$implicit;l("value",e)("innerHTML",e.name,He)}}function ar(i,c){i&1&&(o(0,"span",86),d(1,"to"),r(),m(2,"input",87))}function lr(i,c){if(i&1){let e=x();o(0,"div",65)(1,"span",79),d(2),r(),o(3,"div",80)(4,"select",81)(5,"option",82),d(6,"Included"),r(),o(7,"option",83),d(8,"Excluded"),r(),o(9,"option",84),d(10,"Limited"),r()(),h(11,ar,3,0),o(12,"i",85),f("click",function(){let n=v(e).$index,a=u(2);return C(a.deleteCollectionFilter(n))}),r()()()}if(i&2){let e=c.$implicit,t=c.$index,n=u(2);l("formGroupName",t),s(2),T(e.collection.name),s(9),I(n.lobbyForm.controls.collectionFilters.at(t).controls.type.value==="limitation"?11:-1)}}function cr(i,c){if(i&1&&m(0,"mat-option",78),i&2){let e=c.$implicit;l("value",e)("innerHTML",e.name,He)}}function dr(i,c){i&1&&(o(0,"span",86),d(1,"to"),r(),m(2,"input",87))}function mr(i,c){if(i&1){let e=x();o(0,"div",65)(1,"span",79),d(2),r(),o(3,"div",80)(4,"select",81)(5,"option",82),d(6,"Included"),r(),o(7,"option",83),d(8,"Excluded"),r(),o(9,"option",84),d(10,"Limited"),r()(),h(11,dr,3,0),o(12,"i",85),f("click",function(){let n=v(e).$index,a=u(2);return C(a.deleteGenreFilter(n))}),r()()()}if(i&2){let e=c.$implicit,t=c.$index,n=u(2);l("formGroupName",t),s(2),T(e.genre.name),s(9),I(n.lobbyForm.controls.genreFilters.at(t).controls.type.value==="limitation"?11:-1)}}function ur(i,c){if(i&1&&m(0,"mat-option",78),i&2){let e=c.$implicit;l("value",e)("innerHTML",e.name,He)}}function pr(i,c){i&1&&(o(0,"span",86),d(1,"to"),r(),m(2,"input",87))}function hr(i,c){if(i&1){let e=x();o(0,"div",65)(1,"span",79),d(2),r(),o(3,"div",80)(4,"select",81)(5,"option",82),d(6,"Included"),r(),o(7,"option",83),d(8,"Excluded"),r(),o(9,"option",84),d(10,"Limited"),r()(),h(11,pr,3,0),o(12,"i",85),f("click",function(){let n=v(e).$index,a=u(2);return C(a.deleteThemeFilter(n))}),r()()()}if(i&2){let e=c.$implicit,t=c.$index,n=u(2);l("formGroupName",t),s(2),T(e.theme.name),s(9),I(n.lobbyForm.controls.themeFilters.at(t).controls.type.value==="limitation"?11:-1)}}function br(i,c){i&1&&m(0,"span",92)}function _r(i,c){if(i&1&&(o(0,"div",88)(1,"div",89)(2,"button",90),d(3," Create "),h(4,br,1,0,"span",91),r()()()),i&2){let e=u(2);s(4),l("ngIf",e.submitLoading)}}function fr(i,c){i&1&&m(0,"span",92)}function gr(i,c){if(i&1&&(o(0,"button",90),d(1," Save "),h(2,fr,1,0,"span",91),r()),i&2){let e=u(3);s(2),l("ngIf",e.submitLoading)}}function yr(i,c){if(i&1&&(o(0,"div",88)(1,"div",89),h(2,gr,3,1,"button",93),r()()),i&2){let e=u(2);s(2),l("ngIf",e.userCanEdit)}}function vr(i,c){if(i&1){let e=x();o(0,"form",9),f("ngSubmit",function(){v(e);let n=u();return C(!n.userCanEdit||n.submit())}),o(1,"div",10)(2,"div",11),m(3,"input",12),o(4,"div",13),m(5,"input",14),o(6,"span",15),d(7,"keep it empty if this is public lobby"),r()()(),o(8,"h1",16),d(9,"Settings"),r(),o(10,"div",17)(11,"div",18)(12,"h3"),d(13,"Lobby"),r(),o(14,"div",17)(15,"div",19)(16,"div")(17,"label"),d(18,"Number of musics "),r()(),o(19,"mat-slider",20),m(20,"input",21),r(),o(21,"div",22),m(22,"input",23),r()(),o(23,"div",19)(24,"div")(25,"label"),d(26,"Guessing time "),r()(),o(27,"div")(28,"mat-slider",20),m(29,"input",24),r(),o(30,"div",22),m(31,"input",25),d(32,"s "),r()()(),o(33,"div",19)(34,"div")(35,"label"),d(36," Played games "),m(37,"i",26),r()(),o(38,"div")(39,"mat-slider",27),m(40,"input",28),r(),o(41,"div",22),m(42,"input",29,0),r()()()()(),o(44,"div",30)(45,"h3"),d(46,"Difficulty"),r(),o(47,"section",31)(48,"mat-checkbox",32),d(49," Easy "),r(),o(50,"mat-checkbox",33),d(51,"Medium"),r(),o(52,"mat-checkbox",34),d(53,"Hard"),r()(),h(54,nr,3,2,"mat-checkbox",35),o(55,"div")(56,"h3"),d(57," Hint Button "),m(58,"i",36),r(),o(59,"mat-radio-group",37)(60,"mat-radio-button",38),d(61,"Disabled"),r(),o(62,"mat-radio-button",38),d(63,"Allowed"),r(),o(64,"mat-radio-button",38),d(65,"Always"),r()()()(),o(66,"div",39)(67,"h3"),d(68,"Game mode"),r(),o(69,"mat-radio-group",40)(70,"mat-radio-button",38),d(71,"Standard"),r(),o(72,"mat-radio-button",41),d(73,"Quick-draw"),r(),o(74,"mat-radio-button",42),d(75,"Battle royale"),r(),o(76,"mat-radio-button",43),d(77," Local Couch "),r()()()(),o(78,"div",44)(79,"div",45)(80,"h3"),d(81,"Modifiers"),r(),o(82,"mat-checkbox",46),d(83," Duplicate games "),r(),o(84,"mat-checkbox",47),d(85," Keep Playing Music On Answer Reveal "),r(),o(86,"mat-checkbox",48),d(87," Show correct answers during guess time "),r(),o(88,"mat-checkbox",49),d(89," Allow answer by game series "),r()()(),o(90,"div",44)(91,"div",50)(92,"h3"),d(93,"Filters"),r(),o(94,"div",51),h(95,or,5,0,"div",52),o(96,"div",53)(97,"div",54)(98,"mat-checkbox",55,1),d(100," Filter by year "),r(),h(101,rr,6,6,"div"),r(),o(102,"div",56)(103,"mat-checkbox",57,1),d(105," Limit all game series to "),m(106,"input",58),r()(),o(107,"div",59)(108,"mat-form-field",60),m(109,"input",61,2),o(111,"mat-autocomplete",62,3),f("optionSelected",function(n){v(e);let a=u();return C(a.addCollectionFilter(n))}),h(113,sr,1,2,"mat-option",63),be(114,"async"),r()(),o(115,"div",64),Ue(116,lr,13,3,"div",65,je),r()(),o(118,"div",59)(119,"mat-form-field",60),m(120,"input",66,2),o(122,"mat-autocomplete",62,4),f("optionSelected",function(n){v(e);let a=u();return C(a.addGenreFilter(n))}),h(124,cr,1,2,"mat-option",63),be(125,"async"),r()(),o(126,"div",67),Ue(127,mr,13,3,"div",65,je),r()(),o(129,"div",59)(130,"mat-form-field",60),m(131,"input",68,2),o(133,"mat-autocomplete",62,5),f("optionSelected",function(n){v(e);let a=u();return C(a.addThemeFilter(n))}),h(135,ur,1,2,"mat-option",63),be(136,"async"),r()(),o(137,"div",69),Ue(138,hr,13,3,"div",65,je),r()()()()()(),h(140,_r,5,1,"div",70),r(),h(141,yr,3,1,"div",70),r()}if(i&2){let e=ie(99),t=ie(112),n=ie(123),a=ie(134),p=u();l("formGroup",p.lobbyForm),s(19),l("min",5)("max",100)("step",1),s(9),l("min",5)("max",30)("step",1),s(11),l("min",0)("step",1)("max",p.lobbyForm.get("musicNumber").value),s(3),l("max",p.lobby?p.lobby.playedMusics:20),s(12),l("ngIf",!p.hideContribution()),s(4),l("html",!0),s(2),l("value",p.lobbyHintModes.Disabled),s(2),l("value",p.lobbyHintModes.Allowed),s(2),l("value",p.lobbyHintModes.Always),s(6),l("value",p.lobbyGameModes.Standard),s(6),l("value",p.lobbyGameModes.LocalCouch)("html",!0),s(19),I((p.lobby?!p.lobby.premium:!p.lobbyInfo.userIsPremium)?95:-1),s(6),I(e.checked?101:-1),s(8),l("formControl",p.collectionFormControl)("matAutocomplete",t),s(2),l("displayWith",p.formatFilter),s(2),l("ngForOf",Qe(114,35,p.collections)),s(3),ze(p.collectionFilters),s(4),l("formControl",p.genreFormControl)("matAutocomplete",n),s(2),l("displayWith",p.formatFilter),s(2),l("ngForOf",Qe(125,37,p.genres)),s(3),ze(p.genreFilters),s(4),l("formControl",p.themeFormControl)("matAutocomplete",a),s(2),l("displayWith",p.formatFilter),s(2),l("ngForOf",Qe(136,39,p.themes)),s(3),ze(p.themeFilters),s(2),l("ngIf",!p.lobby),s(),l("ngIf",p.lobby)}}var Qt=(()=>{class i{fb;lobbyHttpService;gameHttpService;router;lobbyStore;authService;lobbyForm;lobby;submitLoading=!1;loading=!1;userCanEdit=!0;subscriptions=[];lobbyInfo;lobbyGameModes=ai;lobbyHintModes=me;songSelectionPercentage=100;collections;collectionFormControl=new S;collectionFilters=[];genres;genreFormControl=new S;genreFilters=[];themes;themeFormControl=new S;themeFilters=[];musicPlayedInput;constructor(e,t,n,a,p,E){this.fb=e,this.lobbyHttpService=t,this.gameHttpService=n,this.router=a,this.lobbyStore=p,this.authService=E}ngOnInit(){return re(this,null,function*(){this.lobby=this.lobbyStore.getLobby(),this.loading=!0,this.songSelectionPercentage=this.lobby?this.lobby.playedMusics/this.lobby.musicNumber*100:100,this.lobbyInfo=yield _t(this.lobbyHttpService.info()),this.lobbyForm=this.fb.group({name:[this.lobby?this.lobby.name:`${this.authService.decodeJwt().username}'s lobby`,F.required.bind(this)],password:[this.lobby?.password],musicNumber:[this.lobby?this.lobby.musicNumber:20,[F.max(100),F.min(5)]],playedMusics:[this.lobby?this.lobby.playedMusics:20,[F.max(this.lobby?.musicNumber??20),F.min(0)]],guessTime:[this.lobby?this.lobby.guessTime:20,[F.max(30),F.min(5)]],allowDuplicates:[this.lobby?this.lobby.allowDuplicates:!1],easyDifficulty:[this.lobby?this.lobby.difficulty.includes(de.Easy):!0],mediumDifficulty:[this.lobby?this.lobby.difficulty.includes(de.Medium):!0],hardDifficulty:[this.lobby?this.lobby.difficulty.includes(de.Hard):!0],allowContributeToMissingData:[this.lobby?this.lobby.allowContributeToMissingData:!0],allowCollectionAnswer:[this.lobby?this.lobby.allowCollectionAnswer:!1],gameMode:[this.lobby?this.lobby.gameMode:ai.Standard],playMusicOnAnswerReveal:[this.lobby?this.lobby.playMusicOnAnswerReveal:!0],showCorrectAnswersDuringGuessTime:[this.lobby?this.lobby.showCorrectAnswersDuringGuessTime:!1],hintMode:[this.lobby?this.lobby.hintMode:me.Allowed,[F.required.bind(this)]],filterByYear:[this.lobby?this.lobby.filterByYear:!1],filterMinYear:[this.lobby?this.lobby.filterMinYear:this.lobbyInfo.filterMinYear,[F.max(this.lobbyInfo.filterMaxYear),F.min(this.lobbyInfo.filterMinYear)]],filterMaxYear:[this.lobby?this.lobby.filterMaxYear:this.lobbyInfo.filterMaxYear,[F.max(this.lobbyInfo.filterMaxYear),F.min(this.lobbyInfo.filterMinYear)]],limitAllCollections:[this.lobby?this.lobby.limitAllCollectionsTo>0:!1],limitAllCollectionsTo:[this.lobby&&this.lobby.limitAllCollectionsTo||1],collectionFilters:new Pe(this.lobby?.collectionFilters?this.lobby.collectionFilters.map(e=>new le({id:new S(e.id),type:new S(e.type),limitation:new S(e.limitation)})):[]),genreFilters:new Pe(this.lobby?.genreFilters?this.lobby.genreFilters.map(e=>new le({id:new S(e.id),type:new S(e.type),limitation:new S(e.limitation)})):[]),themeFilters:new Pe(this.lobby?.themeFilters?this.lobby.themeFilters.map(e=>new le({id:new S(e.id),type:new S(e.type),limitation:new S(e.limitation)})):[])}),this.loading=!1,this.lobby&&(this.subscriptions=[this.lobbyStore.lobby.subscribe(e=>{this.lobby=e,this.lobbyForm.patchValue(Be(fe({name:this.lobby.name},this.lobby?.password&&{password:this.lobby?.password}),{musicNumber:this.lobby.musicNumber,guessTime:this.lobby.guessTime,allowDuplicates:this.lobby.allowDuplicates,easyDifficulty:this.lobby.difficulty.includes(de.Easy),mediumDifficulty:this.lobby.difficulty.includes(de.Medium),hardDifficulty:this.lobby.difficulty.includes(de.Hard)})),this.lobbyForm.controls.collectionFilters=new Pe(e.collectionFilters.map(t=>new le({id:new S(t.collection.id,[F.required.bind(this)]),type:new S(t.type,[F.required.bind(this)]),limitation:new S(t.limitation)}))),this.lobbyForm.controls.genreFilters=new Pe(e.genreFilters.map(t=>new le({id:new S(t.genre.id,[F.required.bind(this)]),type:new S(t.type,[F.required.bind(this)]),limitation:new S(t.limitation)}))),this.lobbyForm.controls.themeFilters=new Pe(e.themeFilters.map(t=>new le({id:new S(t.theme.id,[F.required.bind(this)]),type:new S(t.type,[F.required.bind(this)]),limitation:new S(t.limitation)}))),this.collectionFilters=e.collectionFilters,this.genreFilters=e.genreFilters,this.themeFilters=e.themeFilters,this.toggleForms()}),this.lobbyStore.me.subscribe(e=>{e!==null&&(this.userCanEdit=e.role===B.Host,this.toggleForms())})]),this.lobbyForm.get("musicNumber").valueChanges.subscribe({next:e=>{this.lobbyForm.get("musicNumber").setValue(e,{onlySelf:!0,emitEvent:!1,emitModelToViewChange:!0}),this.musicPlayedInput.nativeElement.max=e;let t=this.lobbyForm.get("playedMusics");t.setValue(Math.round(e*this.songSelectionPercentage/100),{emitEvent:!1}),t.setValidators([F.max(this.lobby?.musicNumber||20),F.min(0)])}}),this.lobbyForm.get("guessTime").valueChanges.subscribe({next:e=>{this.lobbyForm.get("guessTime").setValue(e,{onlySelf:!0,emitEvent:!1,emitModelToViewChange:!0})}}),this.lobbyForm.get("playedMusics").valueChanges.subscribe({next:e=>{this.lobbyForm.get("playedMusics").setValue(e,{onlySelf:!0,emitEvent:!1,emitModelToViewChange:!0}),this.songSelectionPercentage=e/this.lobbyForm.get("musicNumber").value*100}}),this.collections=this.gameHttpService.getCollections(""),this.collections=this.collectionFormControl.valueChanges.pipe(yt(""),ge(e=>e===null?this.collections:this.gameHttpService.getCollections(e)),ft(e=>e.filter(t=>!this.collectionFilters.map(n=>n.collection.id).includes(t.id)))),this.genres=this.gameHttpService.getGenres(""),this.genres=this.genreFormControl.valueChanges.pipe(yt(""),ge(e=>e===null?this.genres:this.gameHttpService.getGenres(e)),ft(e=>e.filter(t=>!this.genreFilters.map(n=>n.genre.id).includes(t.id)))),this.themes=this.gameHttpService.getThemes(""),this.themes=this.themeFormControl.valueChanges.pipe(yt(""),ge(e=>e===null?this.themes:this.gameHttpService.getThemes(e)),ft(e=>e.filter(t=>!this.themeFilters.map(n=>n.theme.id).includes(t.id))))})}toggleForms(){this.userCanEdit?(this.lobbyForm.enable(),this.collectionFormControl.enable(),this.genreFormControl.enable(),this.themeFormControl.enable()):(this.lobbyForm.disable(),this.collectionFormControl.disable(),this.genreFormControl.disable(),this.themeFormControl.disable())}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}submit(){this.submitLoading=!0;let e=[];this.lobbyForm.get("easyDifficulty").value&&(e=[...e,de.Easy]),this.lobbyForm.get("mediumDifficulty").value&&(e=[...e,de.Medium]),this.lobbyForm.get("hardDifficulty").value&&(e=[...e,de.Hard]);let t={name:this.lobbyForm.get("name").value,password:this.lobbyForm.get("password").value,musicNumber:this.lobbyForm.get("musicNumber").value,playedMusics:this.lobbyForm.get("playedMusics").value,guessTime:this.lobbyForm.get("guessTime").value,allowDuplicates:this.lobbyForm.get("allowDuplicates").value,difficulty:e,allowContributeToMissingData:this.lobbyForm.get("allowContributeToMissingData").value,gameMode:this.lobbyForm.get("gameMode").value,playMusicOnAnswerReveal:this.lobbyForm.get("playMusicOnAnswerReveal").value,showCorrectAnswersDuringGuessTime:this.lobbyForm.get("showCorrectAnswersDuringGuessTime").value,hintMode:this.lobbyForm.get("hintMode").value,filterByYear:this.lobbyForm.get("filterByYear").value,filterMinYear:this.lobbyForm.get("filterMinYear").value,filterMaxYear:this.lobbyForm.get("filterMaxYear").value,allowCollectionAnswer:this.lobbyForm.get("allowCollectionAnswer").value,limitAllCollectionsTo:this.lobbyForm.controls.limitAllCollections.value?this.lobbyForm.get("limitAllCollectionsTo").value:0,collectionFilters:this.lobbyForm.controls.collectionFilters.getRawValue().map(n=>({id:n.id,type:n.type,limitation:n.limitation})),genreFilters:this.lobbyForm.controls.genreFilters.getRawValue().map(n=>({id:n.id,type:n.type,limitation:n.limitation})),themeFilters:this.lobbyForm.controls.themeFilters.getRawValue().map(n=>({id:n.id,type:n.type,limitation:n.limitation}))};this.lobby===null?this.lobbyHttpService.create(t).pipe(ni(()=>this.submitLoading=!1)).subscribe(n=>{this.router.navigate([`/lobby/${n.code}`])}):this.lobbyHttpService.update(this.lobby.code,t).pipe(ni(()=>this.submitLoading=!1)).subscribe(()=>{})}hideContribution(){return this.lobbyForm.get("easyDifficulty").value&&this.lobbyForm.get("mediumDifficulty").value&&this.lobbyForm.get("hardDifficulty").value}accuracyText(){return`By checking this, each music has <strong class="text-primary">${Math.round((this.lobbyInfo.musicAccuracyRatio+Number.EPSILON)*1e4)/100}% chance</strong> to not reflect the difficulty chosen in order to improve our database.<br>The more you play, the lower the chance!`}formatFilter=e=>e?.name;addCollectionFilter(e){let t=e.option.value;this.collectionFilters.push({type:"exclusion",collection:t}),this.lobbyForm.controls.collectionFilters.push(new le({id:new S(t.id,[F.required.bind(this)]),type:new S("exclusion",[F.required.bind(this)]),limitation:new S(1)})),this.collectionFormControl.setValue("")}deleteCollectionFilter(e){this.collectionFilters.splice(e,1),this.lobbyForm.controls.collectionFilters.removeAt(e),this.collectionFormControl.setValue("")}addGenreFilter(e){let t=e.option.value;this.genreFilters.push({type:"exclusion",genre:t}),this.lobbyForm.controls.genreFilters.push(new le({id:new S(t.id,[F.required.bind(this)]),type:new S("exclusion",[F.required.bind(this)]),limitation:new S(1)})),this.genreFormControl.setValue("")}deleteGenreFilter(e){this.genreFilters.splice(e,1),this.lobbyForm.controls.genreFilters.removeAt(e),this.genreFormControl.setValue("")}addThemeFilter(e){let t=e.option.value;this.themeFilters.push({type:"exclusion",theme:t}),this.lobbyForm.controls.themeFilters.push(new le({id:new S(t.id,[F.required.bind(this)]),type:new S("exclusion",[F.required.bind(this)]),limitation:new S(1)})),this.themeFormControl.setValue("")}deleteThemeFilter(e){this.themeFilters.splice(e,1),this.lobbyForm.controls.themeFilters.removeAt(e),this.themeFormControl.setValue("")}static \u0275fac=function(t){return new(t||i)(b(nn),b(ce),b($e),b(Ce),b(w),b(We))};static \u0275cmp=_({type:i,selectors:[["app-lobby-config"]],viewQuery:function(t,n){if(t&1&&V(tr,5),t&2){let a;R(a=A())&&(n.musicPlayedInput=a.first)}},standalone:!1,decls:3,vars:1,consts:[["musicPlayedInput",""],["filterDate",""],["trigger","matAutocompleteTrigger"],["collectionAutocomplete","matAutocomplete"],["genreAutocomplete","matAutocomplete"],["themeAutocomplete","matAutocomplete"],[1,"bg-dark","tw-p-3","tw-rounded-md","tw-h-full"],["role","status","aria-hidden","true",1,"spinner-border","text-primary","spinner-border-sm"],[1,"h-100",3,"formGroup"],[1,"h-100",3,"ngSubmit","formGroup"],[1,"form-container"],[1,"tw-flex","tw-flex-col","md:tw-flex-row","tw-gap-4","md:tw-gap-8"],["type","text","formControlName","name","required","required","placeholder","Lobby name",1,"form-control","!tw-bg-grey","tw-rounded-md","placeholder:tw-text-light-grey","tw-h-[50px]","tw-w-[200px]"],[1,"tw-flex","tw-flex-col","tw-items-start","md:tw-items-center"],["type","text","formControlName","password","required","required","placeholder","Password",1,"form-control","!tw-bg-grey","tw-rounded-md","placeholder:tw-text-light-grey","tw-h-[50px]","tw-w-[200px]","tw-mb-2"],[1,"tw-text-xs"],[1,"!tw-mt-2"],[1,"row"],[1,"col-xxl-4","col-xl-5"],[1,"mt-3"],["color","primary",2,"width","70%",3,"min","max","step"],["matSliderThumb","","formControlName","musicNumber"],[1,"d-inline",2,"width","15%"],["type","number","max","100","min","5","formControlName","musicNumber"],["matSliderThumb","","formControlName","guessTime"],["type","number","max","100","min","5","formControlName","guessTime"],["mdbTooltip","The number of songs from players' list. The rest will be filled with random games.","placement","top",1,"fa-solid","fa-question-circle"],["color","primary",2,"width","70%",3,"min","step","max"],["matSliderThumb","","formControlName","playedMusics"],["type","number","min","0","formControlName","playedMusics",3,"max"],[1,"col-md-6","mb-2"],[1,"mb-3"],["formControlName","easyDifficulty","color","primary",1,"mx-3","checkbox-center"],["formControlName","mediumDifficulty","color","primary",1,"mx-3","checkbox-center"],["formControlName","hardDifficulty","color","primary",1,"mx-3","checkbox-center"],["class","mx-3","color","primary","formControlName","allowContributeToMissingData",4,"ngIf"],["mdbTooltip","Allow players to choose between 4 answers, but they win half the usual points","placement","bottom",1,"fa-solid","fa-question-circle",3,"html"],["aria-label","Select an option","formControlName","hintMode","color","primary",1,"d-flex"],[3,"value"],[1,"col-md-6","mt-2","mt-md-0"],["aria-label","Select an option","formControlName","gameMode","color","primary",1,"d-flex"],["value","2","disabled",""],["value","3","disabled",""],["mdbTooltip","One of you plays the music, the other can turn off their phone. <br>Don't worry about neither your score nor your accuracy, it's gone","placement","bottom",3,"value","html"],[1,"row","mt-3"],[1,"col-md-6"],["formControlName","allowDuplicates","color","primary",1,"me-2","checkbox-center"],["formControlName","playMusicOnAnswerReveal","color","primary",1,"me-2","checkbox-center"],["formControlName","showCorrectAnswersDuringGuessTime","color","primary",1,"me-2","checkbox-center"],["formControlName","allowCollectionAnswer","color","primary",1,"me-2","checkbox-center"],[1,"col-md-12"],[1,"tw-relative"],[1,"tw-absolute","w-100","h-100","tw-flex","tw-flex-col","tw-justify-center","tw-rounded-2xl",2,"background-color","rgba(0, 0, 0, 0.78)","z-index","10"],[1,"!tw-px-2","tw-grid","tw-grid-cols-1","lg:tw-grid-cols-3","tw-gap-4"],[1,"tw-col-span-1","lg:tw-col-span-1"],["formControlName","filterByYear","color","primary",1,"me-2","checkbox-center"],[1,"tw-col-span-1","lg:tw-col-span-2"],["formControlName","limitAllCollections","color","primary",1,"me-2","checkbox-center"],["type","number","max","100","min","1","formControlName","limitAllCollectionsTo"],[1,"tw-col-span-1"],[1,"tw-w-full"],["type","text","placeholder","Filter by serie","aria-label","Number","matInput","","autocomplete","off","autocapitalize","off","spellcheck","false",3,"formControl","matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value","innerHTML",4,"ngFor","ngForOf"],["formArrayName","collectionFilters",1,"tw-flex","flex-column"],[1,"max-xl:tw-flex-col","tw-mb-2","lg:tw-flex",3,"formGroupName"],["type","text","placeholder","Filter by genre","aria-label","Number","matInput","","autocomplete","off","autocapitalize","off","spellcheck","false",3,"formControl","matAutocomplete"],["formArrayName","genreFilters",1,"tw-flex","flex-column"],["type","text","placeholder","Filter by theme","aria-label","Number","matInput","","autocomplete","off","autocapitalize","off","spellcheck","false",3,"formControl","matAutocomplete"],["formArrayName","themeFilters",1,"tw-flex","flex-column"],["class","row justify-content-end mt-2",4,"ngIf"],["color","primary","formControlName","allowContributeToMissingData",1,"mx-3"],["placement","bottom",1,"fa-solid","fa-question-circle",3,"mdbTooltip","html"],[1,"tw-self-center"],["href","https://www.patreon.com/c/littlegubs","target","_blank",1,"btn","btn-primary","tw-self-center"],[3,"min","max"],["matSliderStartThumb","","formControlName","filterMinYear",3,"value"],["matSliderEndThumb","","formControlName","filterMaxYear",3,"value"],[3,"value","innerHTML"],[1,"tw-w-full","xl:tw-w-1/2"],[1,"tw-w-full","xl:tw-w-1/2","tw-flex","tw-justify-end","tw-items-center"],["formControlName","type"],["value","inclusion"],["value","exclusion"],["value","limitation"],[1,"ms-2","fa-solid","fa-times","text-danger",3,"click"],[1,"tw-mx-1"],["type","number","max","100","min","1","formControlName","limitation"],[1,"row","justify-content-end","mt-2"],[1,"col-md-2"],["type","submit",1,"btn","btn-primary","w-100"],["class","spinner-border spinner-border-sm","type","button","role","status","aria-hidden","true",4,"ngIf"],["type","button","role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["class","btn btn-primary w-100","type","submit",4,"ngIf"]],template:function(t,n){t&1&&(o(0,"div",6),h(1,ir,1,0,"span",7)(2,vr,142,41,"form",8),r()),t&2&&(s(),I(n.loading?1:2))},dependencies:[Y,P,hn,Vt,Lt,Dt,Nt,Bt,Xe,Zi,Ki,we,Gi,$i,Se,Ye,tn,en,Ji,xe,qi,Xi,Wi,Yi,jt,Ke,ui,pi,zt,Ie,Tt],encapsulation:2})}return i})();var Hn=(()=>{class i{constructor(){}ngOnInit(){}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-create"]],standalone:!1,decls:2,vars:0,consts:[[1,"tw-w-5/6"]],template:function(t,n){t&1&&(o(0,"div"),m(1,"app-lobby-config",0),r())},dependencies:[Qt],encapsulation:2})}return i})();function Cr(i,c){if(i&1&&(o(0,"div",1)(1,"span",4),d(2,"2nd"),r(),o(3,"span",5),d(4),r(),o(5,"div",6)(6,"span"),d(7),r()()()),i&2){let e=u();l("@fadeIn",void 0),s(4),D("",e.users[1].points," pts"),s(3),T(e.users[1].user.username)}}function wr(i,c){if(i&1&&(o(0,"div",2)(1,"span",7),d(2,"WINNER"),r(),o(3,"span",8),d(4),r(),o(5,"div",9)(6,"span"),d(7),r()()()),i&2){let e=u();l("@fadeIn",void 0),s(4),D("",e.users[0].points," pts"),s(3),T(e.users[0].user.username)}}function Sr(i,c){if(i&1&&(o(0,"div",3)(1,"span",4),d(2,"3rd"),r(),o(3,"span",5),d(4),r(),o(5,"div",6)(6,"span"),d(7),r()()()),i&2){let e=u();l("@fadeIn",void 0),s(4),D("",e.users[2].points," pts"),s(3),T(e.users[2].user.username)}}var jn=(()=>{class i{lobbyStore;fadeOut;show3rd=!1;show2nd=!1;show1st=!1;users;hide=new Q;constructor(e){this.lobbyStore=e}ngOnInit(){return re(this,null,function*(){let e=yield _t(this.lobbyStore.users.pipe(vi(t=>t!==null&&t.length>0)));this.users=this.lobbyStore.sortUsersByPoints(e),setTimeout(()=>{this.showFirstPlayer()},500),setTimeout(()=>{this.showSecondPlayer()},2500),setTimeout(()=>{this.show1st=!0},4500),setTimeout(()=>{this.fadeOut=!0},this.getLeaveTiming()),setTimeout(()=>{this.hide.emit()},this.getLeaveTiming()+500)})}showFirstPlayer(){this.users[2]?this.show3rd=!0:this.users[1]?this.show2nd=!0:this.show1st=!0}showSecondPlayer(){this.users[1]&&!this.show2nd?this.show2nd=!0:this.show1st=!0}getLeaveTiming(){return this.users.length===1?5500:this.users.length===2?7500:9500}static \u0275fac=function(t){return new(t||i)(b(w))};static \u0275cmp=_({type:i,selectors:[["app-result-leaderboard"]],hostVars:1,hostBindings:function(t,n){t&2&&Di("@fadeOut",n.fadeOut)},outputs:{hide:"hide"},decls:4,vars:4,consts:[[1,"tw-relative","tw-flex",2,"height","100%","justify-content","center","align-items","center"],[1,"tw-absolute","-tw-rotate-6","tw-flex","tw-flex-col","tw-items-center",2,"top","-5rem","left","-15rem"],[1,"tw-scale-125","tw-z-10","tw-flex","tw-flex-col","tw-items-center","tw-absolute"],[1,"tw-absolute","tw-rotate-6","tw-flex","tw-flex-col","tw-items-center",2,"top","-5rem","right","-15rem"],[1,"tw-text-2xl"],[1,"tw-text-lg","tw-my-2"],[1,"user-card","bg-dark","text-center","p-1"],[1,"tw-text-2xl","tw-text-green","tw-font-bold"],[1,"tw-text-lg","tw-my-2","tw-text-green","tw-font-bold"],[1,"user-card","bg-dark","text-center","p-1","tw-border-green","tw-border-solid","tw-z-10"]],template:function(t,n){t&1&&(o(0,"div",0),h(1,Cr,8,3,"div",1)(2,wr,8,3,"div",2)(3,Sr,8,3,"div",3),r()),t&2&&(l("@fadeIn",void 0),s(),I(n.show2nd?1:-1),s(),I(n.show1st?2:-1),s(),I(n.show3rd?3:-1))},encapsulation:2,data:{animation:[ue("fadeOut",[Z("true",H({opacity:0})),oe("* => true",[ne("0.5s ease-out",H({opacity:0}))])]),ue("fadeIn",[Z("void",H({opacity:0})),oe(":enter",[ne("0.5s ease-in",H({opacity:1}))])])]}})}return i})();function xr(i,c){if(i&1){let e=x();o(0,"app-result-leaderboard",0),f("hide",function(){v(e);let n=u();return C(n.hideLeaderBoard=!0)}),r()}}var Un=(()=>{class i{hideLeaderBoard=!1;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-lobby-result"]],decls:1,vars:1,consts:[[3,"hide"]],template:function(t,n){t&1&&h(0,xr,1,0,"app-result-leaderboard"),t&2&&I(n.hideLeaderBoard?-1:0)},dependencies:[jn],encapsulation:2})}return i})();var Tr=i=>({row:i}),kr=(i,c)=>({"col-md-6":i,"col-md-12":c});function Mr(i,c){if(i&1){let e=x();U(0),o(1,"button",3),f("click",function(){v(e);let n=u();return C(n.play())}),d(2,"Play"),r(),z()}}var qt=(()=>{class i{lobbyHttpService;lobbyStore;socket;router;lobby;role;lobbyUsersRoles=B;lobbyStatus=k;subscriptions=[];constructor(e,t,n,a){this.lobbyHttpService=e,this.lobbyStore=t,this.socket=n,this.router=a}ngOnInit(){this.subscriptions=[this.lobbyStore.lobby.subscribe(e=>{this.lobby=e}),this.lobbyStore.me.subscribe(e=>{e!==null&&(this.role=e.role)})]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}play(){this.socket.emit("play",this.lobby.code)}leave(){this.socket.emit("leave",this.lobby.code),this.router.navigate(["/"])}showPlayButton(){return this.role===this.lobbyUsersRoles.Host&&this.lobby.status===k.Waiting}static \u0275fac=function(t){return new(t||i)(b(ce),b(w),b(X),b(Ce))};static \u0275cmp=_({type:i,selectors:[["app-button-play"]],standalone:!1,decls:4,vars:8,consts:[[3,"ngClass"],[4,"ngIf"],["type","button",1,"btn","btn-outline-primary",3,"click","ngClass"],["type","button",1,"btn","btn-primary","col-md-6",3,"click"]],template:function(t,n){t&1&&(o(0,"div",0),h(1,Mr,3,0,"ng-container",1),o(2,"button",2),f("click",function(){return n.leave()}),d(3," Leave "),r()()),t&2&&(l("ngClass",L(3,Tr,n.showPlayButton())),s(),l("ngIf",n.showPlayButton()),s(),l("ngClass",he(5,kr,n.showPlayButton(),!n.showPlayButton())))},dependencies:[W,P],encapsulation:2})}return i})();var Er=["chat"],Rr=["messageElement"],Ar=i=>({disabled:i});function Fr(i,c){if(i&1&&(o(0,"span",10),d(1),r(),d(2)),i&2){let e=u().$implicit;s(),D("",e.username,": "),s(),D(" ",e.message," ")}}function Pr(i,c){if(i&1&&(o(0,"span",9),d(1),r()),i&2){let e=u().$implicit;s(),T(e.message)}}function Vr(i,c){if(i&1&&(o(0,"div",null,1),h(2,Fr,3,2)(3,Pr,2,1,"span",9),r()),i&2){let e=c.$implicit;s(2),I(e.username!==null?2:3)}}var Wt=(()=>{class i{lobbyStore;socket;subscriptions=[];messages=[];message=new S(null,[F.required.bind(this)]);chat;messageElements;constructor(e,t){this.lobbyStore=e,this.socket=t}ngOnInit(){this.subscriptions=[this.lobbyStore.messages.subscribe(e=>{this.messages=e})]}ngAfterViewInit(){this.scrollToBottom(),this.messageElements.changes.subscribe(this.scrollToBottom)}scrollToBottom=()=>{this.chat.nativeElement.scrollTop=this.chat.nativeElement.scrollHeight};ngOnDestroy(){this.lobbyStore.setMessages([]),this.subscriptions.forEach(e=>e.unsubscribe())}submit(){this.socket.emit("chat",this.message.value),this.message.setValue(null)}static \u0275fac=function(t){return new(t||i)(b(w),b(X))};static \u0275cmp=_({type:i,selectors:[["app-lobby-chat"]],viewQuery:function(t,n){if(t&1&&(V(Er,5),V(Rr,5)),t&2){let a;R(a=A())&&(n.chat=a.first),R(a=A())&&(n.messageElements=a)}},standalone:!1,decls:10,vars:5,consts:[["chat",""],["messageElement",""],[1,"bg-dark","p-4","chat-container","d-none","d-md-block"],[1,"chat"],[4,"ngFor","ngForOf"],[1,"input-group","align-self-center","w-100","mt-2",3,"ngSubmit"],["type","text","placeholder","Your message","aria-label","Your message","aria-describedby","button-addon2",1,"form-control",3,"formControl"],["type","submit","id","button-addon2",1,"btn","btn-outline-primary",3,"ngClass"],[1,"far","fa-paper-plane"],[1,"text-warning"],[1,"text-primary"]],template:function(t,n){if(t&1){let a=x();o(0,"div",2)(1,"div",3,0),h(3,Vr,4,1,"div",4),r(),o(4,"div")(5,"form",5),f("ngSubmit",function(){return v(a),C(n.message.invalid||n.submit())}),m(6,"input",6),o(7,"button",7),d(8," Send "),m(9,"i",8),r()()()()}t&2&&(s(3),l("ngForOf",n.messages),s(3),l("formControl",n.message),s(),l("ngClass",L(3,Ar,n.message.invalid)))},dependencies:[W,Y,Xe,we,Se,Ye,Rt,xe],encapsulation:2})}return i})();var Qn=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-lobby-waiting"]],standalone:!1,decls:7,vars:0,consts:[[1,"row"],[1,"col-md-9","lobby-col"],[1,"d-md-none"],[1,"col-md-9"],[1,"col-md-3","lobby-col"],[1,"d-none","d-md-block","mb-md-2"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1),m(2,"app-button-play",2)(3,"app-lobby-config",3),r(),o(4,"div",4),m(5,"app-button-play",5)(6,"app-lobby-chat"),r()())},dependencies:[Qt,qt,Wt],encapsulation:2})}return i})();var Lr=(i,c)=>({"mx-2":i,"mx-3":c}),Nr=i=>({"text-muted":i});function Br(i,c){i&1&&m(0,"i",11)}function Or(i,c){i&1&&m(0,"i",12)}function Hr(i,c){i&1&&m(0,"span",13)}function jr(i,c){i&1&&m(0,"i",14)}function Ur(i,c){i&1&&m(0,"i",15)}function zr(i,c){i&1&&m(0,"i",16)}function Gr(i,c){if(i&1){let e=x();o(0,"div",17)(1,"div",18)(2,"div",19)(3,"i",20),f("click",function(){v(e);let n=u().$implicit,a=u();return C(a.kick(n))}),r()()()()}}function Qr(i,c){if(i&1&&(U(0),o(1,"div",2)(2,"div",3)(3,"div"),h(4,Br,1,0,"i",4)(5,Or,1,0,"i",5),o(6,"span"),d(7),r(),h(8,Hr,1,0,"span",6),r(),o(9,"div"),h(10,jr,1,0,"i",7)(11,Ur,1,0,"i",8)(12,zr,1,0,"i",9),r(),m(13,"div"),r(),h(14,Gr,4,0,"div",10),r(),z()),i&2){let e=c.$implicit,t=u();s(),l("ngClass",he(11,Lr,t.me.role!==t.lobbyUserRoles.Host,t.me.role===t.lobbyUserRoles.Host)),s(),l("@userStatus",t.getStatusClass(e))("ngClass",L(14,Nr,e.disconnected||e.role===t.lobbyUserRoles.Spectator)),s(2),l("ngIf",e.role===t.lobbyUserRoles.Host),s(),l("ngIf",e.role===t.lobbyUserRoles.Spectator&&!e.disconnected),s(2),T(e.user.username),s(),l("ngIf",e.status===t.lobbyUserStatus.Buffering),s(2),l("ngIf",e.user.premium===!0),s(),l("ngIf",e.playedTheGame),s(),l("ngIf",(t.lobby==null?null:t.lobby.hintMode)!==t.lobbyHintModes.Always&&e.hintMode),s(2),l("ngIf",t.me.role===t.lobbyUserRoles.Host&&e.role===t.lobbyUserRoles.Player)}}var qn=(()=>{class i{lobbyStore;socket;showRank=!1;users;me;lobby;lobbyHintModes=me;lobbyUserRoles=B;lobbyUserStatus=ut;subscriptions=[];constructor(e,t){this.lobbyStore=e,this.socket=t}ngOnInit(){this.subscriptions=[this.lobbyStore.users.subscribe(e=>{this.users=e}),this.lobbyStore.me.subscribe(e=>{this.me=e}),this.lobbyStore.lobby.subscribe(e=>{this.lobby=e})]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}getStatusClass(e){return e.correctAnswer===!1?"wrongAnswer":e.correctAnswer===!0?"correctAnswer":"default"}kick(e){this.socket.emit("kick",e.user.username)}static \u0275fac=function(t){return new(t||i)(b(w),b(X))};static \u0275cmp=_({type:i,selectors:[["app-lobby-users"]],inputs:{showRank:"showRank"},standalone:!1,decls:2,vars:1,consts:[[1,"row","justify-content-center","mt-2","users-container"],[4,"ngFor","ngForOf"],[1,"user-card","bg-dark","text-center","p-1","position-relative",3,"ngClass"],[1,"row","justify-content-between",3,"ngClass"],["class","fa fa-star",4,"ngIf"],["class","fa fa-ghost",4,"ngIf"],["class","text-white spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["class","tw-mx-1 fa fa-crown tw-text-green",4,"ngIf"],["class","text-info fa fa-gamepad mx-1",4,"ngIf"],["class","text-white far fa-eye mx-1",4,"ngIf"],["class","users-actions d-flex flex-column position-absolute","style","top: 0; right: -15px",4,"ngIf"],[1,"fa","fa-star"],[1,"fa","fa-ghost"],["role","status","aria-hidden","true",1,"text-white","spinner-border","spinner-border-sm"],[1,"tw-mx-1","fa","fa-crown","tw-text-green"],[1,"text-info","fa","fa-gamepad","mx-1"],[1,"text-white","far","fa-eye","mx-1"],[1,"users-actions","d-flex","flex-column","position-absolute",2,"top","0","right","-15px"],[1,"bg-dark","pt-1"],[1,"col"],[1,"icon-action","text-danger","fa","fa-times",3,"click"]],template:function(t,n){t&1&&(o(0,"div",0),h(1,Qr,15,16,"ng-container",1),r()),t&2&&(s(),l("ngForOf",n.users))},dependencies:[W,Y,P],encapsulation:2,data:{animation:[ue("userStatus",[Z("wrongAnswer",H({color:"white"})),Z("correctAnswer",H({color:"#56ff43"})),Z("default",H({color:"white"})),oe("* => wrongAnswer",[ne("1s",ci([H({color:"red",offset:0}),H({color:"white",offset:.75})]))])])]}})}return i})();var Wn="audioPlayerVolume",Yn="mediaTypeOnReveal",Xn="audioVisualizer",Te=(()=>{class i{getDefaultVolume(){return parseFloat(localStorage.getItem(Wn)??"0.5")}setDefaultVolume(e){localStorage.setItem(Wn,e.toString())}getDefaultMediaTypeOnReveal(){return parseInt(localStorage.getItem(Yn)??"2")}setDefaultMediaTypeOnReveal(e){localStorage.setItem(Yn,e.toString())}getAudioVisualizerStatus(){let e=localStorage.getItem(Xn);return e?e==="true":!0}setAudioVisualizerStatus(e){localStorage.setItem(Xn,e.toString())}static \u0275fac=function(t){return new(t||i)};static \u0275prov=vt({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function $r(i,c){i&1&&(o(0,"mat-icon"),d(1,"block"),r())}function Zr(i,c){i&1&&(o(0,"mat-icon"),d(1,"image"),r())}function Kr(i,c){i&1&&(o(0,"mat-icon"),d(1,"movie"),r())}function Jr(i,c){if(i&1){let e=x();o(0,"button",10)(1,"mat-slide-toggle",11),f("click",function(){v(e);let n=u();return C(n.setAudioVisualizerStatus())}),r(),d(2,"Enable audio visualizer "),m(3,"p"),r()}if(i&2){let e=u();s(),l("checked",e.audioVisualizerStatus)}}var $n=(()=>{class i{lobbyStore;localStorageHelper;audio;lobby;subscriptions=[];gainNode;source;nextAudioBuffer;mediaTypeOnReveal;audioContext=new AudioContext;audioVisualizerStatus;meIsPremium=!1;constructor(e,t){this.lobbyStore=e,this.localStorageHelper=t}ngOnInit(){this.lobbyStore.me.subscribe(e=>{e!==null&&(this.meIsPremium=e.user.premium)}),this.lobbyStore.setCurrentLobbyAudioContext(this.audioContext),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.setValueAtTime(this.getDefaultVolumeValue(),this.audioContext.currentTime),this.mediaTypeOnReveal=this.localStorageHelper.getDefaultMediaTypeOnReveal(),this.audioVisualizerStatus=this.localStorageHelper.getAudioVisualizerStatus(),this.gainNode.connect(this.audioContext.destination),this.lobbyStore.setCurrentLobbyGainNode(this.gainNode),this.subscriptions=[this.lobbyStore.currentLobbyAudioBuffer.subscribe(e=>re(this,null,function*(){e!==null?this.lobby.status===k.AnswerReveal&&this.lobby.playMusicOnAnswerReveal?this.nextAudioBuffer=e:(this.source?.stop(),this.setSourceNull(),yield this.setSource(e)):this.setSourceNull(),this.lobby?.status===k.PlayingMusic&&(this.gainNode.gain.setValueAtTime(this.getDefaultVolumeValue(),this.audioContext.currentTime),this.lobbyStore.setCurrentLobbyGainNode(this.gainNode),this.source?.start())})),this.lobbyStore.lobby.subscribe(e=>re(this,null,function*(){this.lobby=e,e&&(e.status===k.AnswerReveal&&(e.playMusicOnAnswerReveal?setTimeout(()=>{this.gainNode.gain.setValueAtTime(this.gainNode.gain.value,this.audioContext.currentTime),this.gainNode.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+5),this.lobbyStore.setCurrentLobbyGainNode(this.gainNode)},5e3):this.setSourceNull()),e.status===k.PlayingMusic&&(this.nextAudioBuffer&&(this.source?.stop(),this.setSourceNull(),yield this.setSource(this.nextAudioBuffer),this.nextAudioBuffer=void 0),this.gainNode.gain.setValueAtTime(this.getDefaultVolumeValue(),this.audioContext.currentTime),this.lobbyStore.setCurrentLobbyGainNode(this.gainNode),this.source?.start()),!e.playMusicOnAnswerReveal&&e.status!==k.PlayingMusic&&this.setSourceNull(),e.status===k.Buffering&&this.setSourceNull())})),this.lobbyStore.resumeMusic.subscribe(()=>re(this,null,function*(){yield this.audioContext.resume(),this.lobbyStore.setCanPlayMusic(this.audioContext.state==="running")}))]}ngOnDestroy(){this.setSourceNull(),this.audioContext.suspend(),this.subscriptions.forEach(e=>e.unsubscribe())}setSource(e){return re(this,null,function*(){this.gainNode.gain.setValueAtTime(this.getDefaultVolumeValue(),this.audioContext.currentTime),this.lobbyStore.setCurrentLobbyGainNode(this.gainNode);let t=yield this.audioContext.decodeAudioData(e);this.source=this.audioContext.createBufferSource(),this.source.buffer=t,this.source.connect(this.gainNode),this.lobbyStore.setCanPlayMusic(this.audioContext.state==="running"),this.lobbyStore.setCurrentLobbySource(this.source)})}setSourceNull(){this.source&&(this.source.buffer=null)}getDefaultVolumeValue(){return this.localStorageHelper.getDefaultVolume()}updateVolume(e){let t=e.valueAsNumber;this.gainNode.gain.setValueAtTime(t,this.audioContext.currentTime),this.localStorageHelper.setDefaultVolume(t),this.lobbyStore.setCurrentLobbyGainNode(this.gainNode)}getDefaultMediaTypeOnReveal(){return this.localStorageHelper.getDefaultMediaTypeOnReveal()}updateMediaTypeOnReveal(e){this.mediaTypeOnReveal=e,this.localStorageHelper.setDefaultMediaTypeOnReveal(e)}setAudioVisualizerStatus(){this.audioVisualizerStatus=!this.audioVisualizerStatus,this.localStorageHelper.setAudioVisualizerStatus(this.audioVisualizerStatus)}static \u0275fac=function(t){return new(t||i)(b(w),b(Te))};static \u0275cmp=_({type:i,selectors:[["app-lobby-audio-player"]],standalone:!1,decls:14,vars:13,consts:[["menu","matMenu"],["aria-label","unit(s)","color","primary",1,"d-none","d-md-inline-block",3,"input","min","max","step"],["matSliderThumb","",3,"value"],["mat-icon-button","",1,"mat-icon-button",3,"matMenuTriggerFor"],["color","primary"],["xPosition","before"],["mat-menu-item","","mdbTooltip","Answer reveal media type"],[4,"ngIf"],["color","primary",3,"click","min","max","step"],["matSliderThumb","",3,"valueChange","value"],[1,"tw-border-none","tw-bg-transparent"],["color","primary",3,"click","checked"]],template:function(t,n){if(t&1){let a=x();o(0,"mat-slider",1),f("input",function(E){return v(a),C(n.updateVolume(E.target))}),m(1,"input",2),r(),o(2,"button",3)(3,"mat-icon",4),d(4,"more_vert"),r()(),o(5,"mat-menu",5,0)(7,"button",6),h(8,$r,2,0,"mat-icon",7)(9,Zr,2,0,"mat-icon",7)(10,Kr,2,0,"mat-icon",7),o(11,"mat-slider",8),f("click",function(E){return v(a),C(E.stopPropagation())}),o(12,"input",9),f("valueChange",function(E){return v(a),C(n.updateMediaTypeOnReveal(E))}),r()()(),h(13,Jr,4,1,"button",10),r()}if(t&2){let a=ie(6);l("min",0)("max",1)("step",.001),s(),l("value",n.getDefaultVolumeValue()),s(),l("matMenuTriggerFor",a),s(6),l("ngIf",!n.mediaTypeOnReveal),s(),l("ngIf",n.mediaTypeOnReveal===1),s(),l("ngIf",n.mediaTypeOnReveal===2),s(),l("min",0)("max",2)("step",1),s(),l("value",n.getDefaultMediaTypeOnReveal()),s(),I(n.meIsPremium?13:-1)}},dependencies:[P,Ft,bn,jt,Ke,Ot,Ie,Tn,In,kn],encapsulation:2})}return i})();var ts=["answerInput"],is=["trigger"],ns=i=>({"!tw-text-blue-400":i});function os(i,c){i&1&&(o(0,"mat-error"),d(1,"Autocomplete failed. We will try to get it back ASAP. Sorry for the inconvenience"),r())}function rs(i,c){if(i&1&&(o(0,"mat-option",7)(1,"span"),d(2),r(),o(3,"span",8),d(4),r(),o(5,"span"),d(6),r()()),i&2){let e=c.$implicit;l("ngClass",L(5,ns,e.type==="collection_name"))("value",e.name),s(2),T(e.highlight[0]),s(2),T(e.highlight[1]),s(2),T(e.highlight.slice(2).join(""))}}var Zn=(()=>{class i{lobbyHttpService;lobbyStore;gameHttpService;socket;cdf;myControl=new S;gameNames;lobby;me=null;lobbyStatuses=k;subscriptions=[];answerInput;matAutocompleteTrigger;autocompleteFailed=!1;constructor(e,t,n,a,p){this.lobbyHttpService=e,this.lobbyStore=t,this.gameHttpService=n,this.socket=a,this.cdf=p}ngOnInit(){this.gameNames=this.myControl.valueChanges.pipe(Si(),wi(75),ge(e=>e?(this.autocompleteFailed=!1,this.gameHttpService.getNames(e,this.lobby.allowCollectionAnswer)):ot(null)),Ci(()=>(this.autocompleteFailed=!0,ot(null))))}ngAfterViewInit(){this.subscriptions=[this.lobbyStore.lobby.subscribe(e=>{e!==null&&(this.me?.role===B.Spectator?this.myControl.disable():[k.AnswerReveal,k.Buffering].includes(e.status)?(this.myControl.disable(),this.matAutocompleteTrigger.closePanel(),this.cdf.detectChanges()):(this.myControl.enable(),this.myControl.setValue(""),this.answerInput.nativeElement.focus(),this.cdf.detectChanges())),this.lobby=e}),this.lobbyStore.me.subscribe(e=>{e!==null&&e.correctAnswer===!0&&this.myControl.disable()})]}submit(){this.socket.emit("answer",this.myControl.value),this.myControl.setValue(null)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(b(ce),b(w),b($e),b(X),b($))};static \u0275cmp=_({type:i,selectors:[["app-lobby-answer"]],viewQuery:function(t,n){if(t&1&&(V(ts,5),V(is,5)),t&2){let a;R(a=A())&&(n.answerInput=a.first),R(a=A())&&(n.matAutocompleteTrigger=a.first)}},standalone:!1,decls:11,vars:10,consts:[["answerInput","","trigger","matAutocompleteTrigger"],["auto","matAutocomplete"],[3,"ngSubmit"],["id","lobby-autocomplete",2,"width","100%"],["type","text","placeholder","Type your answer here...","aria-label","Number","matInput","","autocomplete","off","autocapitalize","off","spellcheck","false",3,"formControl","matAutocomplete"],[3,"optionSelected"],[3,"ngClass","value",4,"ngFor","ngForOf"],[3,"ngClass","value"],[1,"highlighted"]],template:function(t,n){if(t&1){let a=x();h(0,os,2,0,"mat-error"),o(1,"form",2),f("ngSubmit",function(){return v(a),C(n.lobby.status===n.lobbyStatuses.AnswerReveal||!n.myControl.value||n.submit())}),o(2,"mat-form-field",3),m(3,"input",4,0),o(6,"mat-autocomplete",5,1),f("optionSelected",function(){return v(a),C(n.lobby.status===n.lobbyStatuses.AnswerReveal||n.submit())}),h(8,rs,7,7,"mat-option",6),be(9,"async"),be(10,"slice"),r()()()}if(t&2){let a=ie(7);I(n.autocompleteFailed?0:-1),s(3),l("formControl",n.myControl)("matAutocomplete",a),s(5),l("ngForOf",xt(10,6,Qe(9,4,n.gameNames),0,30))}},dependencies:[W,Y,Vt,fn,Lt,Dt,Nt,Bt,Xe,we,Se,Ye,Rt,xe,Tt,kt],encapsulation:2})}return i})();function as(i,c){if(i&1&&(o(0,"div",1),d(1),r()),i&2){let e=u();s(),D(" ",e.countdown,`
`)}}var Kn=(()=>{class i{lobbyStore;countdown;countdownInterval;subscriptions;constructor(e){this.lobbyStore=e}ngOnInit(){this.subscriptions=[this.lobbyStore.lobby.subscribe(e=>{this.countdownInterval&&clearInterval(this.countdownInterval),e?.status===k.PlayingMusic?(this.countdown=e.guessTime-1,this.startCountdown()):e?.status===k.AnswerReveal&&(this.countdown=void 0)}),this.lobbyStore.currentLobbyMusic.subscribe(e=>{e?.musicFinishesIn&&(this.countdownInterval&&clearInterval(this.countdownInterval),this.countdown=e.musicFinishesIn-1,this.startCountdown())})]}ngOnDestroy(){clearInterval(this.countdownInterval),this.subscriptions.forEach(e=>e.unsubscribe())}startCountdown(){this.countdownInterval=setInterval(()=>{this.countdown>0?this.countdown--:(this.countdown=void 0,clearInterval(this.countdownInterval))},1e3)}static \u0275fac=function(t){return new(t||i)(b(w))};static \u0275cmp=_({type:i,selectors:[["app-lobby-countdown"]],standalone:!1,decls:1,vars:1,consts:[["class","align-self-center countdown",4,"ngIf"],[1,"align-self-center","countdown"]],template:function(t,n){t&1&&h(0,as,2,1,"div",0),t&2&&l("ngIf",n.countdown!==void 0)},dependencies:[P],encapsulation:2})}return i})();var Jn=i=>({timing:i}),eo=(i,c)=>({value:i,params:c});function cs(i,c){if(i&1&&m(0,"div",2),i&2){let e=u();l("@countdownProgress",he(3,eo,e.lobby.status===e.lobbyStatuses.PlayingMusic?"empty":"full",L(1,Jn,e.lobby.guessTime)))}}function ds(i,c){if(i&1&&m(0,"div",2),i&2){let e=u();Ae("width",e.timeRemaining/e.lobby.guessTime*100+"%"),l("@countdownProgress",he(5,eo,e.lobby.status===e.lobbyStatuses.PlayingMusic?"empty":"full",L(3,Jn,e.timeRemaining)))}}var to=(()=>{class i{lobbyStore;subscriptions;lobby;lobbyStatuses=k;timeRemaining;constructor(e){this.lobbyStore=e}ngOnInit(){this.subscriptions=[this.lobbyStore.lobby.subscribe(e=>{this.lobby=e,this.timeRemaining=void 0}),this.lobbyStore.currentLobbyMusic.subscribe(e=>{e?.musicFinishesIn?this.timeRemaining=e.musicFinishesIn>=0?e.musicFinishesIn:0:this.timeRemaining=void 0})]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(b(w))};static \u0275cmp=_({type:i,selectors:[["app-lobby-countdown-progress"]],standalone:!1,decls:2,vars:2,consts:[["style","height: 1px",4,"ngIf"],["style","height: 1px",3,"width",4,"ngIf"],[2,"height","1px"]],template:function(t,n){t&1&&h(0,cs,1,6,"div",0)(1,ds,1,8,"div",1),t&2&&(l("ngIf",!n.timeRemaining),s(),l("ngIf",n.timeRemaining))},dependencies:[P],encapsulation:2,data:{animation:[ue("countdownProgress",[Z("full",H({width:"100%"})),Z("empty",H({width:"0"})),Z("default",H({width:"25%"})),oe("* => empty",[ne("{{timing}}s")],{params:{timing:"20"}}),oe("* => full",[ne("10s")])])]}})}return i})();function us(i,c){if(i&1){let e=x();o(0,"button",3),f("click",function(){v(e);let n=u(2);return C(n.enableHintMode())}),d(1,"Hint"),r()}}function ps(i,c){if(i&1){let e=x();o(0,"mat-slide-toggle",4),f("change",function(n){v(e);let a=u(2);return C(a.toggleKeepHintMode(n))}),d(1,"Keep hint mode "),r()}if(i&2){let e=u(2);l("checked",e.me==null?null:e.me.keepHintMode)}}function hs(i,c){if(i&1&&(U(0),h(1,us,2,0,"button",1)(2,ps,2,1,"mat-slide-toggle",2),z()),i&2){let e=u();s(),l("ngIf",!(e.me!=null&&e.me.hintMode)),s(),l("ngIf",e.me==null?null:e.me.hintMode)}}var io=(()=>{class i{lobbyStore;lobbySocket;subscriptions=[];me;lobby;lobbyHintMode=me;constructor(e,t){this.lobbyStore=e,this.lobbySocket=t}ngOnInit(){this.subscriptions=[this.lobbyStore.me.subscribe(e=>{e&&(this.me=e)}),this.lobbyStore.lobby.subscribe(e=>{e&&(this.lobby=e)})]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}enableHintMode(){this.lobbySocket.emit("enableHintMode")}toggleKeepHintMode(e){this.lobbySocket.emit("toggleKeepHintMode",e.checked)}static \u0275fac=function(t){return new(t||i)(b(w),b(X))};static \u0275cmp=_({type:i,selectors:[["app-hint-mode-toggle"]],standalone:!1,decls:1,vars:1,consts:[[4,"ngIf"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["color","primary",3,"checked","change",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],["color","primary",3,"change","checked"]],template:function(t,n){t&1&&h(0,hs,3,2,"ng-container",0),t&2&&l("ngIf",n.lobby.hintMode===n.lobbyHintMode.Allowed)},dependencies:[P,Ft],encapsulation:2})}return i})();var _s=["xd"];function fs(i,c){if(i&1&&(U(0),m(1,"input",3),o(2,"label",4)(3,"span",5,0),d(5),r()(),z()),i&2){let e=c.$implicit,t=c.index,n=u();s(),l("id",t)("formControl",n.formControl)("value",e),s(),l("for",t),s(3),T(e)}}var no=(()=>{class i{lobbyStore;lobbySocket;subscriptions=[];games=[];formControl=new S("");spans;constructor(e,t){this.lobbyStore=e,this.lobbySocket=t}ngOnInit(){this.subscriptions=[this.lobbyStore.hintModeGames.subscribe(e=>{this.games=e}),this.formControl.valueChanges.subscribe(e=>{this.lobbySocket.emit("answer",e)}),this.lobbyStore.me.subscribe(e=>{e&&(e.role===B.Spectator||e.correctAnswer)&&this.formControl.disable()})]}ngAfterViewInit(){setTimeout(()=>{this.spans.forEach(e=>{let n=2;e.nativeElement.offsetHeight>55&&(n=2*55/e.nativeElement.offsetHeight),e.nativeElement.style.fontSize=`${n}vh`})},1)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(b(w),b(X))};static \u0275cmp=_({type:i,selectors:[["app-hint-mode"]],viewQuery:function(t,n){if(t&1&&V(_s,5),t&2){let a;R(a=A())&&(n.spans=a)}},standalone:!1,decls:2,vars:1,consts:[["xd",""],[1,"d-flex","flex-wrap","justify-content-between",2,"height","260px"],[4,"ngFor","ngForOf"],["type","radio","name","btnradio","autocomplete","off",1,"btn-check",3,"id","formControl","value"],[1,"btn","btn-outline-primary","col-12","col-md-5","d-flex","justify-content-center",2,"height","60px",3,"for"],[1,"align-self-center","hint-mode-answer"]],template:function(t,n){t&1&&(o(0,"div",1),h(1,fs,6,5,"ng-container",2),r()),t&2&&(s(),l("ngForOf",n.games))},dependencies:[Y,we,Qi,Se,xe],encapsulation:2})}return i})();var ys=["youtubeContainer"];function vs(i,c){if(i&1){let e=x();o(0,"youtube-player-placeholder",2),f("click",function(){v(e);let n=u();return C(n._load(!0))}),r()}if(i&2){let e=u();l("videoId",e.videoId)("width",e.width)("height",e.height)("isLoading",e._isLoading)("buttonLabel",e.placeholderButtonLabel)("quality",e.placeholderImageQuality)}}var Cs=(()=>{class i{videoId;width;height;isLoading;buttonLabel;quality;_getBackgroundImage(){let e;return this.quality==="low"?e=`https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg`:this.quality==="high"?e=`https://i.ytimg.com/vi/${this.videoId}/maxresdefault.jpg`:e=`https://i.ytimg.com/vi_webp/${this.videoId}/sddefault.webp`,`url(${e})`}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["youtube-player-placeholder"]],hostAttrs:[1,"youtube-player-placeholder"],hostVars:8,hostBindings:function(t,n){t&2&&(Ae("background-image",n._getBackgroundImage())("width",n.width,"px")("height",n.height,"px"),ae("youtube-player-placeholder-loading",n.isLoading))},inputs:{videoId:"videoId",width:"width",height:"height",isLoading:"isLoading",buttonLabel:"buttonLabel",quality:"quality"},decls:4,vars:1,consts:[["type","button",1,"youtube-player-placeholder-button"],["height","100%","version","1.1","viewBox","0 0 68 48","focusable","false","aria-hidden","true"],["d","M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z","fill","#f00"],["d","M 45,24 27,14 27,34","fill","#fff"]],template:function(t,n){t&1&&(o(0,"button",0),Ti(),o(1,"svg",1),m(2,"path",2)(3,"path",3),r()()),t&2&&ve("aria-label",n.buttonLabel)},styles:[`.youtube-player-placeholder{display:flex;align-items:center;justify-content:center;width:100%;overflow:hidden;cursor:pointer;background-color:#000;background-position:center center;background-size:cover;transition:box-shadow 300ms ease;box-shadow:inset 0 120px 90px -90px rgba(0,0,0,.8)}:fullscreen .youtube-player-placeholder{min-width:100vw;min-height:100vh}.youtube-player-placeholder-button{transition:opacity 300ms ease;-moz-appearance:none;-webkit-appearance:none;background:none;border:none;padding:0;display:flex}.youtube-player-placeholder-button svg{width:68px;height:48px}.youtube-player-placeholder-loading{box-shadow:none}.youtube-player-placeholder-loading .youtube-player-placeholder-button{opacity:0}
`],encapsulation:2,changeDetection:0})}return i})(),ws=new se("YOUTUBE_PLAYER_CONFIG"),oo=640,ro=390;function so(i){return i==null?i:q(i,0)}var pe=function(i){return i[i.UNSTARTED=-1]="UNSTARTED",i[i.ENDED=0]="ENDED",i[i.PLAYING=1]="PLAYING",i[i.PAUSED=2]="PAUSED",i[i.BUFFERING=3]="BUFFERING",i[i.CUED=5]="CUED",i}(pe||{}),ao=(()=>{class i{_ngZone=y(ye);_nonce=y(Ai,{optional:!0});_changeDetectorRef=y($);_elementRef=y(ee);_player;_pendingPlayer;_existingApiReadyCallback;_pendingPlayerState;_destroyed=new Ee;_playerChanges=new O(void 0);_isLoading=!1;_hasPlaceholder=!0;_isBrowser;videoId;get height(){return this._height}set height(e){this._height=e==null||isNaN(e)?ro:e}_height=ro;get width(){return this._width}set width(e){this._width=e==null||isNaN(e)?oo:e}_width=oo;startSeconds;endSeconds;suggestedQuality;playerVars;disableCookies=!1;loadApi;disablePlaceholder=!1;showBeforeIframeApiLoads=!1;placeholderButtonLabel;placeholderImageQuality;ready=new Q;stateChange=this._getLazyEmitter("onStateChange");error=this._getLazyEmitter("onError");apiChange=this._getLazyEmitter("onApiChange");playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange");playbackRateChange=this._getLazyEmitter("onPlaybackRateChange");youtubeContainer;constructor(){let e=y(Ri),t=y(ws,{optional:!0});this.loadApi=t?.loadApi??!0,this.disablePlaceholder=!!t?.disablePlaceholder,this.placeholderButtonLabel=t?.placeholderButtonLabel||"Play video",this.placeholderImageQuality=t?.placeholderImageQuality||"standard",this._isBrowser=Ni(e)}ngAfterViewInit(){this._conditionallyLoad()}ngOnChanges(e){this._shouldRecreatePlayer(e)?this._conditionallyLoad():this._player&&((e.width||e.height)&&this._setSize(),e.suggestedQuality&&this._setQuality(),(e.startSeconds||e.endSeconds||e.suggestedQuality)&&this._cuePlayer())}ngOnDestroy(){this._pendingPlayer?.destroy(),this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():(this._getPendingState().playbackState=pe.PLAYING,this._load(!0))}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=pe.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=pe.CUED}seekTo(e,t){this._player?this._player.seekTo(e,t):this._getPendingState().seek={seconds:e,allowSeekAhead:t}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():this._pendingPlayerState?!!this._pendingPlayerState.muted:!1}setVolume(e){this._player?this._player.setVolume(e):this._getPendingState().volume=e}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&this._pendingPlayerState.volume!=null?this._pendingPlayerState.volume:0}setPlaybackRate(e){if(this._player)return this._player.setPlaybackRate(e);this._getPendingState().playbackRate=e}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&this._pendingPlayerState.playbackRate!=null?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(!(!this._isBrowser||!window.YT))return this._player?this._player.getPlayerState():this._pendingPlayerState&&this._pendingPlayerState.playbackState!=null?this._pendingPlayerState.playbackState:pe.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}requestFullscreen(e){return re(this,null,function*(){let t=this._elementRef.nativeElement;return t.requestFullscreen?t.requestFullscreen(e):Promise.reject(new Error("Fullscreen API not supported by browser."))})}_load(e){this._isBrowser&&(!window.YT||!window.YT.Player?(this.loadApi?(this._isLoading=!0,Ss(this._nonce)):this.showBeforeIframeApiLoads,this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback?.(),this._ngZone.run(()=>this._createPlayer(e))}):this._createPlayer(e))}_conditionallyLoad(){this._shouldShowPlaceholder()?this.playerVars?.autoplay===1&&this._load(!0):this._load(!1)}_shouldShowPlaceholder(){return this.disablePlaceholder?!1:this._isBrowser?this._hasPlaceholder&&!!this.videoId&&!this._player:!0}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_shouldRecreatePlayer(e){let t=e.videoId||e.playerVars||e.disableCookies||e.disablePlaceholder;return!!t&&!t.isFirstChange()}_createPlayer(e){if(this._player?.destroy(),this._pendingPlayer?.destroy(),typeof YT>"u"||!this.videoId&&!this.playerVars?.list)return;let t=this._ngZone.runOutsideAngular(()=>new YT.Player(this.youtubeContainer.nativeElement,{videoId:this.videoId,host:this.disableCookies?"https://www.youtube-nocookie.com":void 0,width:this.width,height:this.height,playerVars:e?Be(fe({},this.playerVars||{}),{autoplay:1}):this.playerVars})),n=a=>{this._ngZone.run(()=>{this._isLoading=!1,this._hasPlaceholder=!1,this._player=t,this._pendingPlayer=void 0,t.removeEventListener("onReady",n),this._playerChanges.next(t),this.ready.emit(a),this._setSize(),this._setQuality(),this._pendingPlayerState&&(this._applyPendingPlayerState(t,this._pendingPlayerState),this._pendingPlayerState=void 0);let p=t.getPlayerState();p===pe.UNSTARTED||p===pe.CUED||p==null?this._cuePlayer():e&&this.startSeconds&&this.startSeconds>0&&t.seekTo(this.startSeconds,!0),this._changeDetectorRef.markForCheck()})};this._pendingPlayer=t,t.addEventListener("onReady",n)}_applyPendingPlayerState(e,t){let{playbackState:n,playbackRate:a,volume:p,muted:E,seek:K}=t;switch(n){case pe.PLAYING:e.playVideo();break;case pe.PAUSED:e.pauseVideo();break;case pe.CUED:e.stopVideo();break}a!=null&&e.setPlaybackRate(a),p!=null&&e.setVolume(p),E!=null&&(E?e.mute():e.unMute()),K!=null&&e.seekTo(K.seconds,K.allowSeekAhead)}_cuePlayer(){this._player&&this.videoId&&this._player.cueVideoById({videoId:this.videoId,startSeconds:this.startSeconds,endSeconds:this.endSeconds,suggestedQuality:this.suggestedQuality})}_setSize(){this._player?.setSize(this.width,this.height)}_setQuality(){this._player&&this.suggestedQuality&&this._player.setPlaybackQuality(this.suggestedQuality)}_getLazyEmitter(e){return this._playerChanges.pipe(ge(t=>t?yi(n=>{t.addEventListener(e,n)},n=>{try{t?.removeEventListener?.(e,n)}catch{}}):ot()),t=>new gi(n=>t.subscribe({next:a=>this._ngZone.run(()=>n.next(a)),error:a=>n.error(a),complete:()=>n.complete()})),Oe(this._destroyed))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["youtube-player"]],viewQuery:function(t,n){if(t&1&&V(ys,7),t&2){let a;R(a=A())&&(n.youtubeContainer=a.first)}},inputs:{videoId:"videoId",height:[2,"height","height",q],width:[2,"width","width",q],startSeconds:[2,"startSeconds","startSeconds",so],endSeconds:[2,"endSeconds","endSeconds",so],suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:[2,"disableCookies","disableCookies",N],loadApi:[2,"loadApi","loadApi",N],disablePlaceholder:[2,"disablePlaceholder","disablePlaceholder",N],showBeforeIframeApiLoads:[2,"showBeforeIframeApiLoads","showBeforeIframeApiLoads",N],placeholderButtonLabel:"placeholderButtonLabel",placeholderImageQuality:"placeholderImageQuality"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},features:[Ii],decls:4,vars:3,consts:[["youtubeContainer",""],[3,"videoId","width","height","isLoading","buttonLabel","quality"],[3,"click","videoId","width","height","isLoading","buttonLabel","quality"]],template:function(t,n){t&1&&(h(0,vs,1,6,"youtube-player-placeholder",1),o(1,"div"),m(2,"div",null,0),r()),t&2&&(I(n._shouldShowPlaceholder()?0:-1),s(),Ae("display",n._shouldShowPlaceholder()?"none":""))},dependencies:[Cs],styles:[`youtube-player:fullscreen,youtube-player:fullscreen iframe{min-width:100vw;min-height:100vh}
`],encapsulation:2,changeDetection:0})}return i})(),_i=!1;function Ss(i){if(_i)return;let c="https://www.youtube.com/iframe_api",e=document.createElement("script"),t=n=>{e.removeEventListener("load",t),e.removeEventListener("error",t),n.type==="error"&&(_i=!1)};e.addEventListener("load",t),e.addEventListener("error",t),e.src=c,e.async=!0,i&&e.setAttribute("nonce",i),_i=!0,document.body.appendChild(e)}var lo=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=te({type:i});static \u0275inj=J({})}return i})();var Is=["youtubePlayer"],Ts=i=>({opacity:i});function ks(i,c){if(i&1&&m(0,"youtube-player",3,0),i&2){let e=u();l("videoId",e.lobbyMusic.video.videoId)("playerVars",e.playerVars)("disablePlaceholder",!0)}}function Ms(i,c){if(i&1&&m(0,"img",6),i&2){let e=c.$implicit,t=c.index,n=u(2);l("ngStyle",L(2,Ts,n.currentScreenshotIndex===t?1:0))("src","https://images.igdb.com/igdb/image/upload/t_1080p/"+e.imageId+".jpg",St)}}function Es(i,c){if(i&1&&(o(0,"div",4),h(1,Ms,1,4,"img",5),r()),i&2){let e=u();s(),l("ngForOf",e.lobbyMusic.screenshots)}}var co=(()=>{class i{lobbyStore;localStorageHelper;subscriptions=[];playerVars={autoplay:1,controls:0,showinfo:0,rel:0,modestbranding:1};mediaTypeOnReveal;lobbyMusic=null;currentScreenshotIndex=0;youtubePlayer;constructor(e,t){this.lobbyStore=e,this.localStorageHelper=t,this.mediaTypeOnReveal=t.getDefaultMediaTypeOnReveal(),setTimeout(()=>{this.currentScreenshotIndex=1},5e3)}ngOnInit(){this.subscriptions=[this.lobbyStore.currentLobbyMusicAnswer.subscribe(e=>{this.lobbyMusic=e})]}ngAfterViewInit(){this.subscriptions.push(this.youtubePlayer.changes.subscribe({next:e=>{e.first?.seekTo(this.lobbyMusic.startVideoAt,!0),e.first?.mute()}}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||i)(b(w),b(Te))};static \u0275cmp=_({type:i,selectors:[["app-answer-reveal-media"]],viewQuery:function(t,n){if(t&1&&V(Is,5),t&2){let a;R(a=A())&&(n.youtubePlayer=a)}},standalone:!1,decls:2,vars:2,consts:[["youtubePlayer",""],["class","game-reveal-video-media","suggestedQuality","default",3,"videoId","playerVars","disablePlaceholder",4,"ngIf"],["class","d-flex",4,"ngIf"],["suggestedQuality","default",1,"game-reveal-video-media",3,"videoId","playerVars","disablePlaceholder"],[1,"d-flex"],["class","game-reveal-picture-media","alt","screenshot",3,"ngStyle","src",4,"ngFor","ngForOf"],["alt","screenshot",1,"game-reveal-picture-media",3,"ngStyle","src"]],template:function(t,n){t&1&&h(0,ks,2,3,"youtube-player",1)(1,Es,2,1,"div",2),t&2&&(l("ngIf",n.mediaTypeOnReveal===2&&(n.lobbyMusic==null?null:n.lobbyMusic.video)),s(),l("ngIf",(n.mediaTypeOnReveal===1||n.mediaTypeOnReveal===2&&!(n.lobbyMusic!=null&&n.lobbyMusic.video))&&n.lobbyMusic&&n.lobbyMusic.screenshots.length>0))},dependencies:[Y,P,It,ao],encapsulation:2})}return i})();var As=i=>({"hint-mode":i}),Fs=i=>({"text-warning":i}),mo=i=>({"d-none":i});function Ps(i,c){i&1&&m(0,"div")}function Vs(i,c){if(i&1&&(o(0,"div",10),d(1),m(2,"mat-progress-bar",11),r()),i&2){let e=u();s(),D(" ",e.loadProgress,"% "),s(),l("value",e.loadProgress)}}function Ds(i,c){i&1&&m(0,"app-hint-mode-toggle")}function Ls(i,c){if(i&1){let e=x();o(0,"div",12)(1,"p"),d(2,"Press the button to start playing"),m(3,"br"),d(4,"(Music will play on the next loop)"),r(),o(5,"button",13),f("click",function(){v(e);let n=u();return C(n.play())}),d(6,"Play"),r()()}}function Ns(i,c){if(i&1&&(o(0,"div",14),m(1,"span",15),r()),i&2){let e=u();l("title",e.serverBuffering?"server loading...":"client loading..."),s(),l("ngClass",L(2,Fs,e.serverBuffering))}}function Bs(i,c){if(i&1&&(o(0,"div",16)(1,"small",17),d(2),r()()),i&2){let e=u();s(2),T(e.error)}}function Os(i,c){if(i&1&&(o(0,"div",18),d(1," Buffering... "),r()),i&2){let e=u();l("ngClass",L(1,mo,!e.canPlayMusic))}}function Hs(i,c){if(i&1&&m(0,"app-lobby-countdown",19),i&2){let e=u();l("ngClass",L(1,mo,!e.canPlayMusic))}}function js(i,c){i&1&&m(0,"app-hint-mode")}function Us(i,c){i&1&&m(0,"app-lobby-answer",10)}function zs(i,c){i&1&&m(0,"div")}function Gs(i,c){i&1&&m(0,"app-answer-reveal-media")}var uo=(()=>{class i{lobbyStore;answer;subscriptions=[];lobby;canPlayMusic=!1;lobbyStatuses=k;lobbyUserStatus=ut;lobbyHintModes=me;lobbyUserRoles=B;me;loadProgress=0;error;serverBuffering=!1;constructor(e){this.lobbyStore=e}ngOnInit(){this.subscriptions=[this.lobbyStore.canPlayMusic.subscribe(e=>{this.canPlayMusic=e}),this.lobbyStore.lobby.subscribe(e=>{this.lobby=e}),this.lobbyStore.me.subscribe(e=>{this.me=e}),this.lobbyStore.lobbyLoadProgress.subscribe(e=>{this.loadProgress=e}),this.lobbyStore.error.subscribe(e=>{this.error=e}),this.lobbyStore.lobbyServerBuffer.subscribe(e=>{this.serverBuffering=e})]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}play(){this.lobbyStore.setResumeMusic()}showAnswerComponent(){return this.me?.role!==B.Spectator&&!this.me?.hintMode&&this.lobby?.status===k.PlayingMusic}showEmptyTopDiv(){return this.lobby?.status===k.Buffering||this.lobby?.status===k.Loading||this.lobby?.hintMode!==me.Allowed}showEmptyBottomDiv(){return this.lobby?.status===k.Buffering||this.lobby?.status===k.Loading||this.me?.role===B.Spectator}static \u0275fac=function(t){return new(t||i)(b(w))};static \u0275cmp=_({type:i,selectors:[["app-lobby-center-container"]],standalone:!1,decls:16,vars:15,consts:[[1,"lobby-center-container","bg-dark","px-4","pt-4","position-relative",3,"ngClass"],[1,"d-flex","text-center","align-items-center","h-100","justify-content-between","position-relative","flex-column"],[4,"ngIf"],["class","w-100",4,"ngIf"],["class","align-self-center position-absolute",4,"ngIf"],["class","position-absolute","style","top: 0; left: 0",3,"title",4,"ngIf"],["class","position-absolute","style","top: 0; left: 24px",4,"ngIf"],["class","align-self-center countdown",3,"ngClass",4,"ngIf"],["class","text-center",3,"ngClass",4,"ngIf"],[2,"z-index","1"],[1,"w-100"],["mode","determinate",3,"value"],[1,"align-self-center","position-absolute"],[1,"btn","btn-primary",3,"click"],[1,"position-absolute",2,"top","0","left","0",3,"title"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm",3,"ngClass"],[1,"position-absolute",2,"top","0","left","24px"],[1,"text-danger"],[1,"align-self-center","countdown",3,"ngClass"],[1,"text-center",3,"ngClass"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1),h(2,Ps,1,0,"div",2)(3,Vs,3,2,"div",3)(4,Ds,1,0,"app-hint-mode-toggle",2)(5,Ls,7,0,"div",4)(6,Ns,2,4,"div",5)(7,Bs,3,1,"div",6)(8,Os,2,3,"div",7)(9,Hs,1,3,"app-lobby-countdown",8)(10,js,1,0,"app-hint-mode",2)(11,Us,1,0,"app-lobby-answer",3)(12,zs,1,0,"div",2),r(),m(13,"app-lobby-audio-player",9)(14,"app-lobby-countdown-progress"),h(15,Gs,1,0,"app-answer-reveal-media",2),r()),t&2&&(l("ngClass",L(13,As,n.me==null?null:n.me.hintMode)),s(2),l("ngIf",n.showEmptyTopDiv()),s(),l("ngIf",(n.lobby==null?null:n.lobby.status)===n.lobbyStatuses.Loading),s(),l("ngIf",(n.lobby==null?null:n.lobby.hintMode)===n.lobbyHintModes.Allowed&&(n.lobby==null?null:n.lobby.status)===n.lobbyStatuses.PlayingMusic),s(),l("ngIf",!n.canPlayMusic),s(),l("ngIf",(n.me==null?null:n.me.status)===n.lobbyUserStatus.Buffering||n.serverBuffering),s(),l("ngIf",n.error),s(),l("ngIf",(n.lobby==null?null:n.lobby.status)===n.lobbyStatuses.Buffering),s(),l("ngIf",n.canPlayMusic&&(n.lobby==null?null:n.lobby.status)===n.lobbyStatuses.PlayingMusic),s(),l("ngIf",(n.lobby==null?null:n.lobby.status)===n.lobbyStatuses.PlayingMusic&&((n.lobby==null?null:n.lobby.hintMode)===n.lobbyHintModes.Always||(n.me==null?null:n.me.hintMode))),s(),l("ngIf",n.showAnswerComponent()),s(),l("ngIf",n.showEmptyBottomDiv()),s(3),l("ngIf",n.lobby.status===n.lobbyStatuses.AnswerReveal))},dependencies:[W,P,Ui,$n,Zn,Kn,to,io,no,co],encapsulation:2})}return i})();function qs(i,c){if(i&1){let e=x();o(0,"button",6),f("click",function(){v(e);let n=u();return C(n.restart())}),m(1,"i",7),r()}}var po=(()=>{class i{lobbyStore;socket;subscriptions=[];me;lobbyUserRoles=B;lobby;constructor(e,t){this.lobbyStore=e,this.socket=t}ngOnInit(){this.subscriptions=[this.lobbyStore.lobby.subscribe(e=>{this.lobby=e}),this.lobbyStore.me.subscribe(e=>{this.me=e})]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}restart(){this.socket.emit("restart")}static \u0275fac=function(t){return new(t||i)(b(w),b(X))};static \u0275cmp=_({type:i,selectors:[["app-lobby-information"]],standalone:!1,decls:10,vars:4,consts:[[1,"bg-dark","p-4"],[1,"row"],[1,"col-4"],[1,"fa-solid","fa-hourglass-empty","me-1"],[1,"fa-solid","fa-music","me-1"],["class","btn btn-sm btn-primary","mdbTooltip","Restart lobby",3,"click",4,"ngIf"],["mdbTooltip","Restart lobby",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa-solid","fa-arrow-rotate-back"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),m(3,"i",3),d(4),r(),o(5,"div",2),m(6,"i",4),d(7),r(),o(8,"div",2),h(9,qs,2,0,"button",5),r()()()),t&2&&(s(4),D("",n.lobby==null?null:n.lobby.guessTime,"s"),s(3),Li("",n.lobby==null?null:n.lobby.currentLobbyMusicPosition,"/",(n.lobby==null?null:n.lobby.musicNumber)===-1?"\u221E":n.lobby.lobbyMusics," "),s(2),l("ngIf",(n.me==null?null:n.me.role)===n.lobbyUserRoles.Host))},dependencies:[P,Ie],encapsulation:2})}return i})();var Ys=i=>({"d-none d-md-block":i}),ho=i=>({"background-color":i});function Xs(i,c){if(i&1&&(U(0),d(1),z()),i&2){let e=u(3);s(),T(e.answer.gameToMusic.game.platforms[0].name)}}function $s(i,c){i&1&&(U(0),d(1,", "),z())}function Zs(i,c){if(i&1&&(U(0),d(1),h(2,$s,2,0,"ng-container",13),z()),i&2){let e=c.$implicit,t=c.last,n=c.last;s(),D(" ",e.abbreviation,""),s(),l("ngIf",!t&&!n)}}function Ks(i,c){if(i&1&&(U(0),h(1,Zs,3,2,"ng-container",18),z()),i&2){let e=u(3);s(),l("ngForOf",e.answer.gameToMusic.game.platforms)}}function Js(i,c){if(i&1&&(o(0,"small",17),h(1,Xs,2,1,"ng-container",13)(2,Ks,2,1,"ng-container",13),r()),i&2){let e=u(2);s(),l("ngIf",(e.answer.gameToMusic.game.platforms==null?null:e.answer.gameToMusic.game.platforms.length)===1),s(),l("ngIf",(e.answer.gameToMusic.game.platforms==null?null:e.answer.gameToMusic.game.platforms.length)>1&&e.answer.gameToMusic.game.category===11)}}function ea(i,c){if(i&1&&m(0,"img",19),i&2){let e=u(2);l("src","https://images.igdb.com/igdb/image/upload/t_720p/"+e.answer.gameToMusic.game.cover.imageId+".jpg",St)("alt",e.answer.gameToMusic.game.name)}}function ta(i,c){if(i&1&&(o(0,"div",20)(1,"h2",21),d(2),r()()),i&2){let e=u(2);s(2),T(e.answer.gameToMusic.game.name)}}function ia(i,c){if(i&1){let e=x();o(0,"button",23),f("click",function(){v(e);let n=u(3);return C(n.addToList())}),o(1,"mat-icon"),d(2,"add"),r()()}if(i&2){let e=u(3);l("ngStyle",L(1,ho,e.answer.gameToMusic.game.cover?e.answer.gameToMusic.game.cover.colorPalette.backgroundColorHex:"#171717"))}}function na(i,c){if(i&1){let e=x();o(0,"button",23),f("click",function(){v(e);let n=u(3);return C(n.removeFromList())}),o(1,"mat-icon"),d(2,"remove"),r()()}if(i&2){let e=u(3);l("ngStyle",L(1,ho,e.answer.gameToMusic.game.cover?e.answer.gameToMusic.game.cover.colorPalette==null?null:e.answer.gameToMusic.game.cover.colorPalette.backgroundColorHex:"black"))}}function oa(i,c){if(i&1&&(U(0),h(1,ia,3,3,"button",22)(2,na,3,3,"button",22),z()),i&2){let e=u(2);s(),l("ngIf",e.me.playedTheGame===!1),s(),l("ngIf",e.me.playedTheGame===!0)}}function ra(i,c){if(i&1&&(U(0),o(1,"div",6)(2,"h2",7),d(3),h(4,Js,3,2,"small",8),r()(),o(5,"div",9)(6,"div",10)(7,"div",11),h(8,ea,1,2,"img",12)(9,ta,3,1,"ng-template",null,1,ri),r(),h(11,oa,3,2,"ng-container",13),r()(),o(12,"div",14)(13,"div")(14,"h4",7),d(15,"Music"),r(),o(16,"small",15),d(17),r()(),o(18,"div",16)(19,"h4",7),d(20,"Artist"),r(),o(21,"small",15),d(22),r()()(),z()),i&2){let e,t,n=ie(10),a=u();s(3),D(" ",a.answer.gameToMusic.game.name," "),s(),l("ngIf",(a.answer.gameToMusic.game.platforms==null?null:a.answer.gameToMusic.game.platforms.length)===1||(a.answer.gameToMusic.game.platforms==null?null:a.answer.gameToMusic.game.platforms.length)>1&&a.answer.gameToMusic.game.category===11),s(4),l("ngIf",a.answer.gameToMusic.game.cover)("ngIfElse",n),s(3),l("ngIf",a.me),s(6),T((e=a.answer.gameToMusic.title)!==null&&e!==void 0?e:a.answer.gameToMusic.music.title),s(5),T((t=a.answer.gameToMusic.artist)!==null&&t!==void 0?t:a.answer.gameToMusic.music.artist)}}function sa(i,c){i&1&&(o(0,"div",6),m(1,"h2",24),r(),o(2,"div",25),m(3,"div",26),r(),o(4,"div",25)(5,"div"),m(6,"h4",27)(7,"small",28)(8,"small",29),r(),o(9,"div",16),m(10,"h4",27)(11,"small",30)(12,"small",29),r()())}function aa(i,c){i&1&&(o(0,"p",16)(1,"small",31),m(2,"i",32),d(3," This music may not reflect the difficulty configured. "),r()())}var bo=(()=>{class i{lobbyStore;gameHttpService;answer;me;interactedWithList=!1;subscriptions=[];constructor(e,t){this.lobbyStore=e,this.gameHttpService=t}ngOnInit(){this.subscriptions=[this.lobbyStore.currentLobbyMusicAnswer.subscribe(e=>{this.answer=e,this.interactedWithList=!1}),this.lobbyStore.lobby.subscribe(e=>{e.status!==k.AnswerReveal&&(this.answer=null)}),this.lobbyStore.currentLobbyMusic.subscribe(e=>{e!==null&&(this.answer=e)}),this.lobbyStore.me.subscribe(e=>{this.interactedWithList||(this.me=fe({},e))})]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}addToList(){this.gameHttpService.addToList(this.answer.gameToMusic.game.slug).subscribe(()=>{this.me.playedTheGame=!0,this.interactedWithList=!0})}removeFromList(){this.gameHttpService.removeFromList(this.answer.gameToMusic.game.slug).subscribe(()=>{this.me.playedTheGame=!1,this.interactedWithList=!0})}static \u0275fac=function(t){return new(t||i)(b(w),b($e))};static \u0275cmp=_({type:i,selectors:[["app-lobby-answer-reveal"]],standalone:!1,decls:6,vars:6,consts:[["skeleton",""],["noImage",""],[1,"bg-dark","p-4","mb-2","mb-md-0",3,"ngClass"],[1,"row"],[4,"ngIf","ngIfElse"],["class","mt-2",4,"ngIf"],[1,"col-md-12"],[1,"mb-1"],["class","ms-1 text-muted","style","font-size: 11px",4,"ngIf"],[1,"col-sm-4","col-md-6"],[2,"position","relative","aspect-ratio","3/4","display","flex","align-items","center"],[1,"w-100"],["class","card-img-top",3,"src","alt",4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"col-sm-8","col-md-6"],[2,"font-size","11px"],[1,"mt-2"],[1,"ms-1","text-muted",2,"font-size","11px"],[4,"ngFor","ngForOf"],[1,"card-img-top",3,"src","alt"],[1,"p-2","text-center"],[1,"m-0"],["class","game-item-cta","mat-mini-fab","","aria-label","Example icon button with a heart icon",3,"ngStyle","click",4,"ngIf"],["mat-mini-fab","","aria-label","Example icon button with a heart icon",1,"game-item-cta",3,"click","ngStyle"],[1,"placeholder","col-md-6"],[1,"col-md-6"],[1,"w-auto","h-100","img-placeholder",2,"aspect-ratio","3/4"],[1,"mb-1","placeholder","col-md-4"],[1,"placeholder","col-md-12",2,"font-size","10px"],[1,"placeholder","col-md-6",2,"font-size","10px"],[1,"placeholder","col-md-9",2,"font-size","10px"],[2,"font-size","10px"],[1,"fa-solid","fa-exclamation-triangle","text-primary"]],template:function(t,n){if(t&1&&(o(0,"div",2)(1,"div",3),h(2,ra,23,7,"ng-container",4)(3,sa,13,0,"ng-template",null,0,ri)(5,aa,4,0,"p",5),r()()),t&2){let a=ie(4);l("ngClass",L(4,Ys,!(n.answer!=null&&n.answer.gameToMusic))),s(2),l("ngIf",n.answer==null?null:n.answer.gameToMusic)("ngIfElse",a),s(3),l("ngIf",n.answer&&n.answer.contributeToMissingData)}},dependencies:[W,Y,P,It,_n,Ot],encapsulation:2})}return i})();var ca=i=>({"text-primary":i}),_o=(()=>{class i{user;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=_({type:i,selectors:[["app-lobby-score-row"]],inputs:{user:"user"},standalone:!1,decls:10,vars:11,consts:[[1,"row",3,"ngClass"],[1,"col-1"],[1,"col"],[1,"col-3","d-flex","justify-content-end"],[1,"col-1","text-muted","justify-content-end"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1),d(2),r(),o(3,"div",2),d(4),be(5,"slice"),r(),o(6,"div",3),d(7),r(),o(8,"div",4),d(9),r()()),t&2&&(l("ngClass",L(9,ca,n.user.me)),s(2),D("#",n.user.rank,""),s(2),T(xt(5,5,n.user.user.username,0,50)),s(3),D("",n.user.points," pts"),s(2),T(n.user.musicGuessedRight))},dependencies:[W,kt],encapsulation:2})}return i})();function ma(i,c){if(i&1&&m(0,"app-lobby-score-row",6),i&2){let e=u().$implicit;l("user",e)}}function ua(i,c){if(i&1&&m(0,"app-lobby-score-row",6),i&2){let e=u().$implicit,t=u();l("user",t.getMeIndex()<=3?e:t.getMe())}}function pa(i,c){if(i&1&&(U(0),h(1,ma,1,1,"app-lobby-score-row",5)(2,ua,1,1,"app-lobby-score-row",5),z()),i&2){let e=c.index;s(),l("ngIf",e<=2),s(),l("ngIf",e===3)}}var fo=(()=>{class i{lobbyStore;subscriptions=[];users;me;constructor(e){this.lobbyStore=e}ngOnInit(){this.subscriptions=[this.lobbyStore.users.subscribe(e=>{e&&(this.users=this.lobbyStore.sortUsersByPoints(e))}),this.lobbyStore.me.subscribe(e=>{this.me=e})]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}getMeIndex(){return this.users.findIndex(e=>e.me)}getMe(){return this.users.find(e=>e.me)}scoreExplanation(){return'Points distribution: <ul class="score-explanation"><li><strong class="text-primary">10 points</strong> when using the autocomplete<ul><li><strong class="text-primary">+5 points</strong> on the first try</li><li><strong class="text-primary">+5 points</strong> if the game is not in your list</li></ul></li><li><strong class="text-primary">5 points</strong> when using hints</li></ul>'}static \u0275fac=function(t){return new(t||i)(b(w))};static \u0275cmp=_({type:i,selectors:[["app-lobby-score"]],standalone:!1,decls:5,vars:3,consts:[[1,"bg-dark"],[1,"d-flex","pt-1","pe-1"],["placement","top",1,"fa-solid","fa-question-circle","ms-auto",3,"mdbTooltip","html"],[1,"pb-4","pt-2","px-4"],[4,"ngFor","ngForOf"],[3,"user",4,"ngIf"],[3,"user"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1),m(2,"i",2),r(),o(3,"div",3),h(4,pa,3,2,"ng-container",4),r()()),t&2&&(s(2),l("mdbTooltip",n.scoreExplanation())("html",!0),s(2),l("ngForOf",n.users))},dependencies:[Y,P,Ie,_o],encapsulation:2})}return i})();var vo=Math.sqrt(3),Co=Math.sqrt(5),ba=.5*(vo-1),pt=(3-vo)/6,Yc=1/3,Xc=1/6,$c=(Co-1)/4,Zc=(5-Co)/20,go=i=>Math.floor(i)|0,yo=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function wo(i=Math.random){let c=_a(i),e=new Float64Array(c).map(n=>yo[n%12*2]),t=new Float64Array(c).map(n=>yo[n%12*2+1]);return function(a,p){let E=0,K=0,De=0,ke=(a+p)*ba,Me=go(a+ke),$t=go(p+ke),fi=(Me+$t)*pt,ko=Me-fi,Mo=$t-fi,Le=a-ko,Ne=p-Mo,ht,bt;Le>Ne?(ht=1,bt=0):(ht=0,bt=1);let Zt=Le-ht+pt,Kt=Ne-bt+pt,Jt=Le-1+2*pt,ei=Ne-1+2*pt,ti=Me&255,ii=$t&255,Je=.5-Le*Le-Ne*Ne;if(Je>=0){let _e=ti+c[ii],it=e[_e],nt=t[_e];Je*=Je,E=Je*Je*(it*Le+nt*Ne)}let et=.5-Zt*Zt-Kt*Kt;if(et>=0){let _e=ti+ht+c[ii+bt],it=e[_e],nt=t[_e];et*=et,K=et*et*(it*Zt+nt*Kt)}let tt=.5-Jt*Jt-ei*ei;if(tt>=0){let _e=ti+1+c[ii+1],it=e[_e],nt=t[_e];tt*=tt,De=tt*tt*(it*Jt+nt*ei)}return 70*(E+K+De)}}function _a(i){let e=new Uint8Array(512);for(let t=0;t<512/2;t++)e[t]=t;for(let t=0;t<512/2-1;t++){let n=t+~~(i()*(256-t)),a=e[t];e[t]=e[n],e[n]=a}for(let t=256;t<512;t++)e[t]=e[t-256];return e}var Xt=class{index;noise2D;WIDTH;HEIGHT;cachedValue=0;value=0;xC=0;yC=0;x=0;y=0;p=0;i=0;rgb=this.getColor();constructor(c,e,t,n){this.index=c,this.noise2D=e,this.WIDTH=t,this.HEIGHT=n}update(c){this.cachedValue=this.value,this.value=c[this.index],this.value!==this.cachedValue&&(this.xC=this.WIDTH/2+Math.cos(this.index+this.i)*this.value*4,this.yC=this.HEIGHT/2+Math.sin(this.index+this.i)*this.value*2.5,this.p=(210-this.value)*.5,this.y=this.noise2D(this.index,this.i)*this.p+this.yC,this.x=this.noise2D(this.index,this.i)*this.p+this.xC,this.i+=.01)}draw(c){c.save(),c.beginPath(),c.fillStyle=this.rgb,c.translate(this.x,this.y),c.arc(0,0,this.value*.1,0,Math.PI*2),c.fill(),c.closePath(),c.restore()}getColor(){let c=["rgb(255, 255, 255)","rgb(255, 209, 48)","rgb(124, 248, 156)"];return c[Math.floor(Math.random()*c.length)]}};var fa=["canvas"],So=(()=>{class i{lobbyStore;localStorageHelper;canvasElement;audioContext;analyser;dataArray;bufferLength;circles=[];noise2D=wo();WIDTH;HEIGHT;nbParticles=75;sourceSub;audioContextSub;constructor(e,t){this.lobbyStore=e,this.localStorageHelper=t}ngOnInit(){let e=this.canvasElement.nativeElement;this.WIDTH=e.width=window.innerWidth,this.HEIGHT=e.height=window.innerHeight,this.circles=this.createCircles(),this.audioContextSub=this.lobbyStore.audioContext.subscribe(t=>{this.audioContext=t}),this.sourceSub=this.lobbyStore.source.subscribe(t=>{let n=this.localStorageHelper.getAudioVisualizerStatus();t&&n&&(this.analyser=this.audioContext.createAnalyser(),t.connect(this.analyser),this.analyser.connect(this.lobbyStore.getCurrentLobbyGainNode()),this.analyser.smoothingTimeConstant=.5,this.analyser.maxDecibels=-10,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.update())})}ngOnDestroy(){this.sourceSub.unsubscribe(),this.audioContextSub.unsubscribe()}createCircles(){return Array.from({length:this.nbParticles},(e,t)=>new Xt(t,this.noise2D,this.WIDTH,this.HEIGHT))}update(){this.audioContext.state==="running"&&(this.analyser.getByteFrequencyData(this.dataArray),this.background("rgb(20, 31, 42)"),this.showCircles(),requestAnimationFrame(this.update.bind(this)))}background(e){let t=this.canvasElement.nativeElement.getContext("2d");t.fillStyle=e,t.fillRect(0,0,this.WIDTH,this.HEIGHT)}showCircles(){this.circles.forEach(e=>{e.update(this.dataArray),e.draw(this.canvasElement.nativeElement.getContext("2d"))})}onResize(){let e=this.canvasElement.nativeElement;this.WIDTH=e.width=window.innerWidth,this.HEIGHT=e.height=window.innerHeight}static \u0275fac=function(t){return new(t||i)(b(w),b(Te))};static \u0275cmp=_({type:i,selectors:[["app-lobby-visualizer"]],viewQuery:function(t,n){if(t&1&&V(fa,7),t&2){let a;R(a=A())&&(n.canvasElement=a.first)}},hostBindings:function(t,n){t&1&&f("resize",function(p){return n.onResize(p)},!1,Pi)},standalone:!1,decls:2,vars:0,consts:[["canvas",""],[1,"tw-w-full","tw-h-full"]],template:function(t,n){t&1&&m(0,"canvas",1,0)},encapsulation:2})}return i})();function ya(i,c){i&1&&m(0,"app-lobby-visualizer",6)}var xo=(()=>{class i{lobbyStore;localStorageHelper;meIsPremium=!1;constructor(e,t){this.lobbyStore=e,this.localStorageHelper=t}ngOnInit(){this.lobbyStore.me.subscribe(e=>{e!==null&&(this.meIsPremium=e.user.premium)})}static \u0275fac=function(t){return new(t||i)(b(w),b(Te))};static \u0275cmp=_({type:i,selectors:[["app-lobby-playing"]],standalone:!1,decls:15,vars:1,consts:[[1,"row"],[1,"col-md-3","d-flex","flex-column"],[1,"mt-2","order-1","order-md-0","mb-2","mb-md-0"],[1,"mt-2","order-0","order-md-1"],[1,"col-md-6","lobby-col"],[1,"col-md-3","lobby-col"],[1,"tw-w-full","tw-h-full","tw--z-10","tw-absolute","tw-bottom-12"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"div"),m(3,"app-button-play"),r(),o(4,"div"),m(5,"app-lobby-information"),r(),o(6,"div",2),m(7,"app-lobby-answer-reveal"),r(),o(8,"div",3),m(9,"app-lobby-score"),r()(),o(10,"div",4),m(11,"app-lobby-center-container"),r(),o(12,"div",5),m(13,"app-lobby-chat"),r(),h(14,ya,1,0,"app-lobby-visualizer",6),r()),t&2&&(s(14),I(n.meIsPremium&&n.localStorageHelper.getAudioVisualizerStatus()?14:-1))},dependencies:[qt,uo,po,bo,fo,Wt,So],encapsulation:2})}return i})();var Ca=(i,c)=>({"tw-justify-center":i,"tw-pb-12":c});function wa(i,c){i&1&&m(0,"app-lobby-waiting")}function Sa(i,c){i&1&&m(0,"app-lobby-playing")}function xa(i,c){i&1&&m(0,"app-lobby-result",1)}function Ia(i,c){i&1&&m(0,"app-lobby-users")}function Ta(i,c){if(i&1&&(o(0,"div",0),h(1,wa,1,0,"app-lobby-waiting")(2,Sa,1,0,"app-lobby-playing")(3,xa,1,0,"app-lobby-result",1)(4,Ia,1,0,"app-lobby-users"),r()),i&2){let e=u();l("ngClass",he(5,Ca,e.lobby.status===e.lobbyStatuses.Result,e.lobby.status===e.lobbyStatuses.Result)),s(),I(e.lobby.status===e.lobbyStatuses.Waiting?1:-1),s(),I(e.lobbyService.isPLaying(e.lobby)?2:-1),s(),I(e.lobby.status===e.lobbyStatuses.Result?3:-1),s(),I(e.lobby.status!==e.lobbyStatuses.Result?4:-1)}}function ka(i,c){i&1&&d(0," loading ")}var Io=(()=>{class i{lobbyHttpService;lobbyService;router;route;dialog;socket;authService;lobbyStore;snackBar;lobbyFileSocket;lobbyCode;lobby;lobbyStatuses=k;subscriptions=[];constructor(e,t,n,a,p,E,K,De,ke,Me){this.lobbyHttpService=e,this.lobbyService=t,this.router=n,this.route=a,this.dialog=p,this.socket=E,this.authService=K,this.lobbyStore=De,this.snackBar=ke,this.lobbyFileSocket=Me}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.lobbyStore.disconnect(),this.socket.disconnect(),this.lobbyFileSocket.disconnect()}ngOnInit(){this.socket.connect(),this.subscriptions=[this.socket.fromEvent("connect_error").subscribe(e=>{e.message==="Unauthorized"&&(this.lobbyFileSocket.disconnect(),this.authService.refreshToken().subscribe(()=>{this.socket.connect(),this.lobbyFileSocket.connect(),this.socket.emit("fake emit")}))}),this.lobbyFileSocket.fromEvent("connect_error").subscribe(e=>{e.message==="Unauthorized"&&this.lobby&&(this.lobbyFileSocket.disconnect(),this.lobbyFileSocket.connect(),this.lobbyFileSocket.emit("fake emit"))}),this.socket.fromEvent("NotFoundException").subscribe(()=>{this.router.navigate(["/"])}),this.socket.fromEvent("MissingPasswordException").subscribe(()=>{this.dialog.open(mn,{data:this.lobbyCode}).afterClosed().subscribe(()=>{this.lobby===void 0&&this.router.navigate(["/"])})}),this.socket.fromEvent("error").subscribe(e=>{this.lobbyStore.setLobbyError(e)}),this.socket.fromEvent("lobbyJoined").subscribe(e=>{this.lobby=e,this.lobbyStore.setLobby(this.lobby),this.lobbyFileSocket.connect(),this.lobbyFileSocket.emit("join")}),this.socket.fromEvent("lobbyUsers").subscribe(e=>{this.lobbyStore.setUsers(e)}),this.socket.fromEvent("lobby").subscribe(e=>{this.lobby=e,this.lobbyStore.setLobby(this.lobby)}),this.socket.fromEvent("lobbyStartBuffer").subscribe(()=>{this.lobbyStore.setLobbyServerBuffer(!0),this.lobbyStore.resetLobbyError()}),this.socket.fromEvent("lobbyBufferEnd").subscribe(()=>{this.lobbyStore.setLobbyServerBuffer(!1)}),this.lobbyFileSocket.fromEvent("buffer").subscribe(e=>{this.lobbyStore.setCurrentLobbyAudioBuffer(e),this.socket.emit("readyToPlayMusic")}),this.socket.fromEvent("currentLobbyMusic").subscribe(e=>{this.lobbyStore.setCurrentLobbyMusic(e)}),this.socket.fromEvent("lobbyAnswer").subscribe(e=>{this.lobbyStore.setCurrentLobbyMusicAnswer(e)}),this.socket.fromEvent("lobbyUser").subscribe(e=>{this.lobbyStore.updateLobbyUser(e)}),this.socket.fromEvent("lobbyReset").subscribe(e=>{this.lobby=e,this.lobbyStore.setLobby(this.lobby),this.lobbyStore.setCurrentLobbyAudioBuffer(null),this.lobbyStore.setCurrentLobbyMusicAnswer(null)}),this.socket.fromEvent("lobbyToast").subscribe(e=>{this.snackBar.open(e,void 0,{horizontalPosition:"end",verticalPosition:"bottom",panelClass:"danger",duration:5e3})}),this.socket.fromEvent("disconnect").subscribe(()=>{this.router.navigate(["/"])}),this.socket.fromEvent("chat").subscribe(e=>{this.lobbyStore.addMessage(e)}),this.socket.fromEvent("hintModeGames").subscribe(e=>{this.lobbyStore.setHintModeGames(e)}),this.socket.fromEvent("lobbyLoadProgress").subscribe(e=>{this.lobbyStore.setLobbyLoadProgress(e)}),this.route.paramMap.subscribe(e=>{this.lobbyCode=e.get("code")})],this.lobbyService.join(this.lobbyCode)}static \u0275fac=function(t){return new(t||i)(b(ce),b(dn),b(Ce),b(Bi),b(cn),b(X),b(We),b(w),b(Ht),b(xn))};static \u0275cmp=_({type:i,selectors:[["app-lobby"]],standalone:!1,decls:2,vars:1,consts:[[1,"container-fluid",2,"display","flex","flex-direction","column","height","100%",3,"ngClass"],[2,"display","flex","justify-content","center","align-items","center"]],template:function(t,n){t&1&&h(0,Ta,5,8,"div",0)(1,ka,1,0),t&2&&I(n.lobby?0:1)},dependencies:[W,Un,Qn,qn,xo],encapsulation:2})}return i})();var To=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=te({type:i});static \u0275inj=J({imports:[qe]})}return i})();var Ma=[{path:"create",component:Hn},{path:":code",component:Io},{path:"**",redirectTo:"create"}],_m=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=te({type:i});static \u0275inj=J({providers:[ce,w],imports:[qe,Oi.forChild(Ma),wn,Pn,Sn,Ln,vn,Cn,Nn,yn,zi,lo,Mn,To]})}return i})();export{_m as LobbyModule};
