"use strict";(self.webpackChunkvgmq=self.webpackChunkvgmq||[]).push([[434],{2434:(Te,x,r)=>{r.r(x),r.d(x,{GameModule:()=>be});var m=r(6814),u=r(2787),T=r(5037),y=r(7494),e=r(9212),d=r(5438),p=r(304);const C=n=>["/admin/games/",n];function I(n,a){if(1&n&&(e.TgZ(0,"a",11),e._uU(1,"admin"),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("routerLink",e.VKq(1,C,t.game.slug))}}const G=n=>({"background-color":n});function A(n,a){if(1&n&&(e.TgZ(0,"span",12),e._uU(1),e.qZA()),2&n){const t=a.$implicit,o=e.oxw(2);e.Q6J("ngStyle",e.VKq(2,G,o.game.cover?o.game.cover.colorPalette.backgroundColorHex:"black")),e.xp6(),e.Oqu(t.abbreviation)}}function S(n,a){if(1&n&&(e.TgZ(0,"div")(1,"small"),e._uU(2," from "),e.TgZ(3,"span",22),e._uU(4),e.qZA()()()),2&n){const t=e.oxw().$implicit;e.xp6(4),e.hij(" ",t.originalGameToMusic.game.name," ")}}function q(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"span",22),e._uU(2),e.qZA(),e._uU(3),e.BQk()),2&n){const t=a.$implicit,o=a.last;e.xp6(2),e.Oqu(t.game.name),e.xp6(),e.hij("",o?"":", "," ")}}function U(n,a){if(1&n&&(e.TgZ(0,"div")(1,"small",23),e._uU(2," Also appears in "),e.YNc(3,q,4,2,"ng-container",24),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("ngForOf",t.derivedGameToMusics)}}function J(n,a){if(1&n&&(e.TgZ(0,"div",19)(1,"div",20)(2,"div",16),e.YNc(3,S,5,1,"div",21)(4,U,4,1,"div",21),e._uU(5),e.qZA(),e.TgZ(6,"div",17),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"div",17),e._uU(10),e.ALo(11,"number"),e.qZA()()()),2&n){const t=a.$implicit,o=e.oxw(3);let i;e.xp6(3),e.Q6J("ngIf",t.type!==o.gameToMusicType.Original),e.xp6(),e.Q6J("ngIf",t.derivedGameToMusics&&t.derivedGameToMusics.length>0),e.xp6(),e.hij(" ",null!==(i=t.title)&&void 0!==i?i:t.music.title," "),e.xp6(2),e.Oqu(e.xi3(8,5,o.getDuration(t),"mm:ss")),e.xp6(3),e.hij(" ",null!==t.guessAccuracy?e.xi3(11,8,100*t.guessAccuracy,"1.0-2")+"%":"-"," ")}}function N(n,a){if(1&n&&(e.TgZ(0,"div",13)(1,"h2"),e._uU(2,"Music list"),e.qZA(),e.TgZ(3,"div",14)(4,"div",15)(5,"div",16),e._uU(6,"Title"),e.qZA(),e.TgZ(7,"div",17),e._uU(8,"Duration"),e.qZA(),e.TgZ(9,"div",17),e._uU(10,"Accuracy"),e.qZA()(),e.YNc(11,J,12,11,"div",18),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(11),e.Q6J("ngForOf",t.game.musics)}}function Q(n,a){if(1&n&&(e.TgZ(0,"div",27),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(),e.hij(" ",t.name," ")}}function L(n,a){if(1&n&&(e.TgZ(0,"div",25)(1,"h2"),e._uU(2,"Alternative names"),e.qZA(),e.YNc(3,Q,2,1,"div",26),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",t.getEnabledAlternativeNames())}}function M(n,a){if(1&n&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),e._uU(4),e.qZA()(),e.TgZ(5,"div",5)(6,"a",6),e._uU(7,"IGDB"),e.qZA(),e.YNc(8,I,2,3,"a",7),e.qZA()(),e.TgZ(9,"h4",4),e.YNc(10,A,2,4,"span",8),e.qZA(),e.YNc(11,N,12,1,"div",9)(12,L,4,1,"div",10),e.qZA()),2&n){const t=e.oxw();e.Q6J("ngStyle",t.getGradientBackground()),e.xp6(4),e.Oqu(t.game.name),e.xp6(2),e.Q6J("href",t.game.url,e.LSH),e.xp6(2),e.Q6J("ngIf",t.isAdmin),e.xp6(2),e.Q6J("ngForOf",t.game.platforms),e.xp6(),e.Q6J("ngIf",t.game.musics.length>0),e.xp6(),e.Q6J("ngIf",t.getEnabledAlternativeNames().length>0)}}function k(n,a){1&n&&(e.TgZ(0,"div",28),e._UZ(1,"h1",29),e.qZA())}let h=(()=>{class n{gameHttpService;viewportScroller;authService;game;loading=!1;set slug(t){this.loading=!0,this.gameHttpService.get(t).subscribe(o=>{this.game=o,this.loading=!1})}gameToMusicType=y.U;isAdmin=!1;constructor(t,o,i){this.gameHttpService=t,this.viewportScroller=o,this.authService=i}ngOnInit(){this.isAdmin=this.authService.isAdmin}getDuration(t){return T.ou.fromSeconds(t.music.duration).toJSDate()}getEnabledAlternativeNames(){return this.game.alternativeNames.filter(t=>t.enabled)}getGradientBackground(){return this.game.cover?{"background-image":`linear-gradient(to bottom, rgba(20, 21, 22, 0.70), rgb(8 17 26 / var(--tw-bg-opacity)) 150px), url(https://images.igdb.com/igdb/image/upload/t_screenshot_huge/${this.game.cover.imageId}.jpg)`}:null}static \u0275fac=function(o){return new(o||n)(e.Y36(d.q),e.Y36(m.EM),e.Y36(p.e))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-game-show"]],inputs:{slug:"slug"},decls:3,vars:2,consts:[["class","tw-bg-newBlack p-4",3,"ngStyle",4,"ngIf","ngIfElse"],["skeleton",""],[1,"tw-bg-newBlack","p-4",3,"ngStyle"],[1,"row","justify-content-between"],[1,"tw-flex","tw-justify-center"],[1,"col","text-end"],["target","_blank",1,"btn","text-white","tw-mr-2",2,"background-color","#9147ff",3,"href"],["class","btn btn-primary","target","_blank",3,"routerLink",4,"ngIf"],["class","badge text-white tw-mx-1",3,"ngStyle",4,"ngFor","ngForOf"],["class","tw-flex tw-items-center tw-flex-col",4,"ngIf"],["class","col-md-3 alternative-name-container",4,"ngIf"],["target","_blank",1,"btn","btn-primary",3,"routerLink"],[1,"badge","text-white","tw-mx-1",3,"ngStyle"],[1,"tw-flex","tw-items-center","tw-flex-col"],[1,"tw-w-full","tw-max-h-[500px]","tw-overflow-y-scroll"],[1,"tw-flex","tw-justify-between",2,"padding","10px"],[1,"tw-w-[270px]","tw-text-center"],[1,"tw-w-[60px]","tw-text-center"],["class","music-list",4,"ngFor","ngForOf"],[1,"music-list"],[1,"tw-flex","tw-justify-between"],[4,"ngIf"],[1,"text-primary"],[1,"text-muted-light"],[4,"ngFor","ngForOf"],[1,"col-md-3","alternative-name-container"],["class","alternative-name",4,"ngFor","ngForOf"],[1,"alternative-name"],[1,"col-md-12","bg-dark","p-4"],[1,"placeholder","col-md-2"]],template:function(o,i){if(1&o&&e.YNc(0,M,13,7,"div",0)(1,k,2,0,"ng-template",null,1,e.W1O),2&o){const c=e.MAs(2);e.Q6J("ngIf",!i.loading)("ngIfElse",c)}},dependencies:[m.sg,m.O5,m.PC,u.rH,m.JJ,m.uU],encapsulation:2})}return n})();var Y=r(2132),H=r(3620),_=r(4716),f=function(n){return n.NameAsc="name_asc",n.NameDesc="name_desc",n.CountUsersAsc="count_user_asc",n.CountUsersDesc="count_user_desc",n.CountMusicsAsc="count_music_asc",n.CountMusicsDesc="count_music_desc",n}(f||{}),s=r(6223),w=r(7700),D=r(6498);function O(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(),e.hij(" ",t.form.errors.serverError," ")}}function B(n,a){if(1&n&&(e.TgZ(0,"div",14),e.YNc(1,O,2,1,"ng-container",10),e.qZA()),2&n){const t=e.oxw();e.xp6(),e.Q6J("ngIf",t.form.errors.serverError)}}function E(n,a){if(1&n&&(e.TgZ(0,"p",15),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(),e.Oqu(t.errorMessage)}}function j(n,a){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(),e.Oqu(t)}}function W(n,a){if(1&n&&(e.TgZ(0,"div")(1,"p",16),e._uU(2),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,j,2,1,"li",17),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij("Successfully imported ",t.importedGames.length," games!"),e.xp6(2),e.Q6J("ngForOf",t.importedGames)}}function K(n,a){1&n&&e._UZ(0,"span",18)}const P=n=>({"is-invalid":n}),R=n=>({disabled:n});let V=(()=>{class n{dialogRef;gameHttpService;adminGameHttpService;authService;loading=!1;errorMessage;form=new s.NI(null,s.kI.required.bind(this));importedGames=[];constructor(t,o,i,c){this.dialogRef=t,this.gameHttpService=o,this.adminGameHttpService=i,this.authService=c}submit(){this.errorMessage=void 0,this.loading=!0,this.importedGames=[],(this.authService.isAdmin?this.adminGameHttpService.importByUrl(this.form.value):this.gameHttpService.importByUrl(this.form.value)).pipe((0,_.x)(()=>this.loading=!1)).subscribe({next:o=>{this.importedGames=o,this.form.reset()},error:o=>{Array.isArray(o.message)?this.form.setErrors({serverError:o.message[0].errors}):this.errorMessage=o.message}})}static \u0275fac=function(o){return new(o||n)(e.Y36(w.so),e.Y36(d.q),e.Y36(D.I),e.Y36(p.e))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-import-game-dialog"]],decls:26,vars:12,consts:[[1,"tw-flex","tw-flex-col","tw-items-center","!tw-bg-grey"],[1,"!tw-mb-8","!tw-mt-2","tw-text-white","!tw-font-fastup","!tw-text-6xl","tw-text-center"],[1,"tw-w-3/4","tw-text-center"],["href","https://www.igdb.com/search","target","_blank"],[1,"text-primary"],["href","https://discord.com/channels/978654868296331314/1036244380031402075","target","_blank"],[1,"tw-w-3/4",3,"ngSubmit"],["required","","placeholder","IGDB url (ex: https://www.igdb.com/games/nier-automata)",1,"form-control","!tw-bg-grey","tw-rounded-md","placeholder:tw-text-light-grey",3,"formControl","ngClass"],["class","invalid-feedback",4,"ngIf"],["class","text-danger",4,"ngIf"],[4,"ngIf"],[1,"tw-my-4"],[1,"btn","btn-outline-primary",3,"disabled","ngClass","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"invalid-feedback"],[1,"text-danger"],[1,"text-success"],[4,"ngFor","ngForOf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2,"Import a game"),e.qZA(),e.TgZ(3,"p",2),e._uU(4," import a game from "),e.TgZ(5,"a",3),e._uU(6,"igdb.com"),e.qZA(),e._uU(7," by searching a game and copying its url below "),e.qZA(),e.TgZ(8,"p",2),e._uU(9," You are only allowed to import what IGDB calls "),e.TgZ(10,"b",4),e._uU(11,'"main games"'),e.qZA(),e._uU(12,". "),e.qZA(),e.TgZ(13,"p",2),e._uU(14," If you want to add a DLC, expansion, chapter, etc... please request your game in "),e.TgZ(15,"a",5),e._uU(16," the dedicated Discord channel "),e.qZA()(),e.TgZ(17,"form",6),e.NdJ("ngSubmit",function(){return i.submit()}),e._UZ(18,"input",7),e.YNc(19,B,2,1,"div",8),e.qZA(),e.YNc(20,E,2,1,"p",9)(21,W,5,2,"div",10),e.TgZ(22,"div",11)(23,"button",12),e.NdJ("click",function(){return i.form.invalid||i.loading||i.submit()}),e._uU(24," Import"),e.YNc(25,K,1,0,"span",13),e.qZA()()()),2&o&&(e.xp6(18),e.Q6J("formControl",i.form)("ngClass",e.VKq(8,P,i.form.invalid&&(i.form.dirty||i.form.touched))),e.xp6(),e.Q6J("ngIf",i.form.errors),e.xp6(),e.Q6J("ngIf",i.errorMessage),e.xp6(),e.Q6J("ngIf",i.importedGames.length>0),e.xp6(2),e.Q6J("disabled",i.form.invalid||i.loading)("ngClass",e.VKq(10,R,i.form.invalid||i.loading)),e.xp6(2),e.Q6J("ngIf",i.loading))},dependencies:[m.mk,m.sg,m.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.F,s.oH],encapsulation:2})}return n})();var z=r(5986);class ${}var v=r(2296),Z=r(617);const X=n=>({"d-none":n});function ee(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"img",12),e.NdJ("load",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.hidden=!1)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("src","https://images.igdb.com/igdb/image/upload/t_720p/"+t.game.cover.imageId+".jpg",e.LSH)("ngClass",e.VKq(3,X,t.hidden))("alt",t.game.name)}}function te(n,a){if(1&n&&(e.TgZ(0,"div",13)(1,"h2",14),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.game.name)}}const l=n=>({"background-color":n});function ne(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addToList(i.game))}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("ngStyle",e.VKq(1,l,t.game.cover?t.game.cover.colorPalette.backgroundColorHex:"#171717"))}}function oe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeFromList(i.game))}),e.TgZ(1,"mat-icon"),e._uU(2,"remove"),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("ngStyle",e.VKq(1,l,t.game.cover?t.game.cover.colorPalette.backgroundColorHex:"#171717"))}}let ie=(()=>{class n{gameHttpService;authService;parentComponent;game;hidden=!0;isAdmin=!1;selected=new e.vpe;constructor(t,o,i){this.gameHttpService=t,this.authService=o,this.parentComponent=i}ngOnInit(){this.isAdmin=this.authService.isAdmin}addToList(t){this.gameHttpService.addToList(t.slug).subscribe(()=>{t.selectedByUser=!t.selectedByUser})}removeFromList(t){this.gameHttpService.removeFromList(t.slug).subscribe(()=>{t.selectedByUser=!t.selectedByUser})}click(){this.selected.emit()}static \u0275fac=function(o){return new(o||n)(e.Y36(d.q),e.Y36(p.e),e.Y36($,8))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-game-item"]],inputs:{game:"game"},outputs:{selected:"selected"},decls:18,vars:15,consts:[[2,"position","relative","aspect-ratio","3/4","display","flex","align-items","center"],[1,"w-100","tw-cursor-pointer",3,"click"],["class","card-img-top tw-rounded-xl","style","flex: 0",3,"src","ngClass","alt","load",4,"ngIf","ngIfElse"],["noImage",""],[1,"w-100","h-100","tw-rounded-xl",2,"position","absolute","top","0","z-index","-1","filter","brightness(50%)",3,"ngStyle"],[1,"pills-container","has-admin-pill"],["mat-raised-button","",1,"pill","!tw-rounded-br-lg","!tw-rounded-tl-xl","!tw-rounded-none",3,"ngStyle"],[1,"tw-text-xs"],[1,"fa-solid","fa-gamepad"],["mat-raised-button","",1,"pill","!tw-rounded-bl-lg","!tw-rounded-tr-xl","!tw-rounded-none",3,"ngStyle"],[1,"fa-solid","fa-music"],["class","game-item-cta","mat-mini-fab","","aria-label","Example icon button with a heart icon",3,"ngStyle","click",4,"ngIf"],[1,"card-img-top","tw-rounded-xl",2,"flex","0",3,"src","ngClass","alt","load"],[1,"p-2","text-center"],[1,"m-0"],["mat-mini-fab","","aria-label","Example icon button with a heart icon",1,"game-item-cta",3,"ngStyle","click"]],template:function(o,i){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.click()}),e.YNc(2,ee,1,5,"img",2)(3,te,3,1,"ng-template",null,3,e.W1O),e.qZA(),e._UZ(5,"div",4),e.TgZ(6,"div",5)(7,"button",6)(8,"span",7),e._uU(9),e.qZA(),e._UZ(10,"i",8),e.qZA(),e.TgZ(11,"button",9)(12,"span",7),e._uU(13),e.qZA(),e._UZ(14,"i",10),e.qZA()(),e.ynx(15),e.YNc(16,ne,3,3,"button",11)(17,oe,3,3,"button",11),e.BQk(),e.qZA()),2&o){const c=e.MAs(4);e.xp6(2),e.Q6J("ngIf",i.game.cover)("ngIfElse",c),e.xp6(3),e.Q6J("ngStyle",e.VKq(9,l,i.game.cover?i.game.cover.colorPalette.backgroundColorHex:"#171717")),e.xp6(2),e.Q6J("ngStyle",e.VKq(11,l,i.game.cover?i.game.cover.colorPalette.backgroundColorHex:"#171717")),e.xp6(2),e.Oqu(i.game.countUsers),e.xp6(2),e.Q6J("ngStyle",e.VKq(13,l,i.game.cover?i.game.cover.colorPalette.backgroundColorHex:"#171717")),e.xp6(2),e.Oqu(i.game.countMusics),e.xp6(3),e.Q6J("ngIf",!1===i.game.selectedByUser),e.xp6(),e.Q6J("ngIf",!0===i.game.selectedByUser)}},dependencies:[m.mk,m.O5,m.PC,v.lW,v.nh,Z.Hw],encapsulation:2})}return n})();var b=r(6283);function ae(n,a){if(1&n&&(e.TgZ(0,"span",7),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(),e.Oqu(t.gamesCount)}}function se(n,a){if(1&n&&(e.TgZ(0,"option",14),e._uU(1,"Music number Lowest"),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("value",t.gameSearchSortBy.CountMusicsAsc)}}function re(n,a){if(1&n&&(e.TgZ(0,"option",14),e._uU(1,"Music number Highest"),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("value",t.gameSearchSortBy.CountMusicsDesc)}}function me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"form",8)(1,"div",9),e._UZ(2,"input",10),e.qZA(),e.TgZ(3,"div",11)(4,"select",12)(5,"option",13),e._uU(6,"Sort By"),e.qZA(),e.TgZ(7,"option",14),e._uU(8,"Title A-Z"),e.qZA(),e.TgZ(9,"option",14),e._uU(10,"Title Z-A"),e.qZA(),e.TgZ(11,"option",14),e._uU(12,"Most to Least Popular"),e.qZA(),e.TgZ(13,"option",14),e._uU(14,"Least to Most Popular"),e.qZA(),e.YNc(15,se,2,1,"option",15)(16,re,2,1,"option",15),e.qZA(),e.TgZ(17,"mat-checkbox",16),e._uU(18,"Only Show My Games"),e.qZA(),e.TgZ(19,"mat-checkbox",17),e._uU(20," Only Show Without Music "),e.qZA(),e.TgZ(21,"mat-checkbox",18),e._uU(22,"Disabled"),e.qZA(),e.TgZ(23,"button",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openImportDialog())}),e._UZ(24,"img",20),e._uU(25," Import game "),e.qZA()()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(7),e.Q6J("value",t.gameSearchSortBy.NameAsc),e.xp6(2),e.Q6J("value",t.gameSearchSortBy.NameDesc),e.xp6(2),e.Q6J("value",t.gameSearchSortBy.CountUsersDesc),e.xp6(2),e.Q6J("value",t.gameSearchSortBy.CountUsersAsc),e.xp6(2),e.Q6J("ngIf",t.authService.isAdmin),e.xp6(),e.Q6J("ngIf",t.authService.isAdmin)}}function ce(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",3)(2,"div",21)(3,"span",22),e._uU(4,"Loading..."),e.qZA()()(),e.BQk())}function le(n,a){if(1&n&&e._UZ(0,"app-game-show",30),2&n){const t=e.oxw(4);e.Q6J("slug",t.games[t.selectedGameIndex].slug)}}function ge(n,a){if(1&n&&e._UZ(0,"app-game-show",30),2&n){const t=e.oxw(4);e.Q6J("slug",t.games[t.selectedGameIndex].slug)}}function ue(n,a){if(1&n&&e._UZ(0,"app-game-show",30),2&n){const t=e.oxw(4);e.Q6J("slug",t.games[t.selectedGameIndex].slug)}}function de(n,a){if(1&n&&e._UZ(0,"app-game-show",30),2&n){const t=e.oxw(4);e.Q6J("slug",t.games[t.selectedGameIndex].slug)}}function pe(n,a){if(1&n&&e._UZ(0,"app-game-show",30),2&n){const t=e.oxw(4);e.Q6J("slug",t.games[t.selectedGameIndex].slug)}}function _e(n,a){if(1&n&&(e.ynx(0),e.YNc(1,le,1,1,"app-game-show",29)(2,ge,1,1)(3,ue,1,1)(4,de,1,1)(5,pe,1,1),e.BQk()),2&n){const t=e.oxw().index,o=e.oxw(2);e.xp6(),e.um2(1,o.innerWidth<768&&((t+1)%2==0||o.games.length===t+1)&&o.getNextGameShowIndex(t,2)?1:o.innerWidth>=768&&o.innerWidth<1024&&((t+1)%3==0||o.games.length===t+1)&&o.getNextGameShowIndex(t,3)?2:o.innerWidth>=1024&&o.innerWidth<1280&&((t+1)%4==0||o.games.length===t+1)&&o.getNextGameShowIndex(t,4)?3:o.innerWidth>=1280&&o.innerWidth<1536&&((t+1)%5==0||o.games.length===t+1)&&o.getNextGameShowIndex(t,5)?4:o.innerWidth>=1536&&((t+1)%6==0||o.games.length===t+1)&&o.getNextGameShowIndex(t,6)?5:-1)}}function fe(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-game-item",27),e.NdJ("selected",function(){const c=e.CHM(t).index,g=e.oxw(2);return e.KtG(g.selectGame(c))}),e.qZA(),e.YNc(2,_e,6,1,"ng-container",28),e.BQk()}if(2&n){const t=a.$implicit,o=e.oxw(2);e.xp6(),e.Q6J("game",t),e.xp6(),e.Q6J("ngIf",void 0!==o.selectedGameIndex)}}function xe(n,a){1&n&&(e.TgZ(0,"div",31)(1,"div",32)(2,"span",22),e._uU(3,"Loading..."),e.qZA()()())}function he(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",23)(1,"div",24),e.NdJ("scrolled",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onScrollDown())}),e.YNc(2,fe,3,2,"ng-container",25),e.qZA(),e.YNc(3,xe,4,0,"div",26),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.games),e.xp6(),e.Q6J("ngIf",t.scrollLoading)}}let we=(()=>{class n{gameHttpService;router;activatedRoute;dialog;authService;games=[];gamesCount;loading=!1;myGames=!1;form;scrollLoading=!1;innerWidth;selectedGameIndex;gameSearchSortBy=f;constructor(t,o,i,c,g){this.gameHttpService=t,this.router=o,this.activatedRoute=i,this.dialog=c,this.authService=g}ngOnInit(){this.innerWidth=window.innerWidth,this.activatedRoute.queryParamMap.subscribe(t=>{this.form=new s.cw({query:new s.NI(t.get("query")??""),myGames:new s.NI("true"===t.get("myGames")),showDisabled:new s.NI("true"===t.get("showDisabled")),onlyShowWithoutMusics:new s.NI("true"===t.get("onlyShowWithoutMusics")),nsfw:new s.NI("true"===t.get("nsfw")),sortBy:new s.NI(t.get("sortBy")??f.CountUsersDesc)}),this.search()}).unsubscribe(),this.form.valueChanges.pipe((0,H.b)(250)).subscribe(()=>{this.search(),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:this.form.value,replaceUrl:!0})})}search(){this.loading=!0,this.selectedGameIndex=void 0,this.gameHttpService.search(this.form.value,0,25).pipe((0,_.x)(()=>this.loading=!1)).subscribe(t=>{this.gamesCount=t.count,this.games=t.data})}onScrollDown(){this.scrollLoading||(this.scrollLoading=!0,this.gameHttpService.search(this.form.value,this.games.length,24).pipe((0,_.x)(()=>this.scrollLoading=!1)).subscribe(t=>{this.games=[...this.games,...t.data]}))}openImportDialog(){this.dialog.open(V).afterClosed().subscribe(()=>{this.search()})}getRow(t,o){return Math.floor(t/o)}getNextGameShowIndex(t,o){return this.getRow(t,o)===Math.floor(this.selectedGameIndex/o)}onResize(){this.innerWidth=window.innerWidth}selectGame(t){this.selectedGameIndex=t}static \u0275fac=function(o){return new(o||n)(e.Y36(d.q),e.Y36(u.F0),e.Y36(u.gz),e.Y36(w.uw),e.Y36(p.e))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-game-list"]],hostBindings:function(o,i){1&o&&e.NdJ("resize",function(g){return i.onResize(g)},!1,e.Jf7)},decls:9,vars:4,consts:[[1,"tw-flex","tw-flex-col"],[1,"!tw-mb-8","tw-text-white","!tw-font-fastup","!tw-text-6xl","tw-text-center"],["class","tw-font-poppins tw-font-bold tw-italic",4,"ngIf"],[1,"tw-flex","tw-flex-col","tw-items-center"],["class","tw-w-full",3,"formGroup",4,"ngIf"],[4,"ngIf","ngIfElse"],["cardColumns",""],[1,"tw-font-poppins","tw-font-bold","tw-italic"],[1,"tw-w-full",3,"formGroup"],[1,"tw-flex","tw-justify-center"],["type","text","formControlName","query","placeholder","Search",1,"form-control","!tw-bg-grey","tw-rounded-md","placeholder:tw-text-light-grey","tw-h-[50px]","tw-max-w-[400px]"],[1,"tw-mt-6","tw-flex","tw-flex-col","lg:tw-flex-row","tw-justify-between"],["formControlName","sortBy",1,"form-select","!tw-bg-grey","tw-rounded-md","tw-h-[40px]","tw-max-w-[400px]","md:tw-w-[215px]"],["selected","","disabled",""],[3,"value"],[3,"value",4,"ngIf"],["color","primary","formControlName","myGames"],["color","primary","formControlName","onlyShowWithoutMusics"],["color","primary","formControlName","showDisabled"],[1,"tw-h-btn","btn","btn-outline-primary",3,"click"],["src","assets/svg/download.svg","width","12","height","12"],["role","status",1,"spinner-border","orange"],[1,"sr-only"],[1,"tw-mt-4","tw-flex","tw-flex-col","tw-items-center"],["infinite-scroll","",1,"tw-flex","tw-flex-wrap","tw-w-full","tw-justify-evenly","md:tw-justify-center","lg:tw-gap-x-12","tw-gap-x-4","md:tw-gap-x-10","tw-gap-y-8","md:tw-gap-y-12",3,"scrolled"],[4,"ngFor","ngForOf"],["class","tw-flex-col tw-justify-center",4,"ngIf"],[3,"game","selected"],[4,"ngIf"],["class","col-12 mb-4",3,"slug"],[1,"col-12","mb-4",3,"slug"],[1,"tw-flex-col","tw-justify-center"],["role","status",1,"spinner-border","text-primary"]],template:function(o,i){if(1&o&&(e.TgZ(0,"div",0)(1,"h1",1),e.YNc(2,ae,2,1,"span",2),e._uU(3," Games "),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,me,26,7,"form",4),e.qZA(),e.YNc(6,ce,5,0,"ng-container",5)(7,he,4,2,"ng-template",null,6,e.W1O),e.qZA()),2&o){const c=e.MAs(8);e.xp6(2),e.Q6J("ngIf",i.gamesCount),e.xp6(3),e.Q6J("ngIf",i.form),e.xp6(),e.Q6J("ngIf",i.loading)("ngIfElse",c)}},dependencies:[m.sg,m.O5,z.oG,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,ie,b.Ry,h],encapsulation:2})}return n})();var ve=r(8525);const Ze=[{path:":slug",component:h},{path:"",component:we}];let be=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({imports:[m.ez,u.Bz.forChild(Ze),Y.m,Z.Ps,b.Rq,ve.LD]})}return n})()}}]);