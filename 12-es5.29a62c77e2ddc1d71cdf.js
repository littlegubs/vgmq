!function(){function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function i(e,i){for(var t=0;t<i.length;t++){var r=i[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{g7DB:function(t,r,o){"use strict";o.r(r),o.d(r,"LoginModule",(function(){return L}));var n=o("ofXK"),s=o("tyNb"),c=o("3Pt+"),a=o("nYR2"),b=o("AytR"),d=o("fXoL"),l=o("ZEaD"),m=o("b6Qw");function u(e,i){if(1&e&&(d.Ob(0,"div",22),d.yc(1),d.Nb()),2&e){var t=d.Zb();d.zb(1),d.Ac(" ",t.formErrorMessage," ")}}function f(e,i){1&e&&d.Kb(0,"span",23)}function p(e,i){1&e&&d.Kb(0,"span",23)}function g(e,i){if(1&e&&(d.Ob(0,"div",31),d.yc(1),d.Nb()),2&e){var t=d.Zb(2);d.zb(1),d.Ac(" ",t.limitedAccessError," ")}}var h=function(e){return{"is-invalid":e}};function v(e,i){if(1&e){var t=d.Pb();d.Ob(0,"div",24),d.Ob(1,"form",25),d.Vb("ngSubmit",(function(){d.nc(t);var e=d.Zb();return e.limitedAccessLoading||e.testLimitedAccessPassword()})),d.Ob(2,"label"),d.yc(3,"This website is a work in progress, to create an account and get a limited access, please enter the magic password below"),d.Nb(),d.Ob(4,"div",26),d.Kb(5,"input",27),d.Ob(6,"div",28),d.Ob(7,"button",29),d.yc(8," Enter"),d.wc(9,p,1,0,"span",16),d.Nb(),d.Nb(),d.Nb(),d.wc(10,g,2,1,"div",30),d.Nb(),d.Nb()}if(2&e){var r=d.Zb();d.zb(1),d.gc("formGroup",r.limitedAccessForm),d.zb(3),d.gc("ngClass",d.jc(6,h,r.limitedAccessError)),d.zb(1),d.gc("ngClass",d.jc(8,h,r.limitedAccessError)),d.zb(2),d.gc("disabled",r.limitedAccessLoading),d.zb(2),d.gc("ngIf",r.limitedAccessLoading),d.zb(1),d.gc("ngIf",r.limitedAccessError)}}var w,A,y=function(e){return{disabled:e}},N=((w=function(){function t(i,r,o,n){e(this,t),this.fb=i,this.router=r,this.authHttpService=o,this.cookieService=n,this.loading=!1,this.limitedAccessLoading=!1,this.limitedAccessAllowed=!0,this.loginForm=this.fb.group({username:["",c.s.required.bind(this)],password:["",c.s.required.bind(this)]}),this.limitedAccessForm=this.fb.group({password:["",c.s.required.bind(this)]}),this.setLimitedAccessAllowed()}var r,o,n;return r=t,(o=[{key:"loginUser",value:function(){var e=this;this.loading=!0,this.authHttpService.login(this.loginForm.value).pipe(Object(a.a)((function(){return e.loading=!1}))).subscribe((function(i){if(null!==i&&!b.a.production){var t=i.token.split(".");e.cookieService.set("vgmq-ut-hp","".concat(t[0],".").concat(t[1])),e.cookieService.set("vgmq-ut-s",t[2])}e.router.navigate([""])}),(function(i){e.formErrorMessage=i.message,e.loginForm.get("password").setValue("")}))}},{key:"testLimitedAccessPassword",value:function(){var e=this;this.limitedAccessLoading=!0,this.limitedAccessError=void 0,this.authHttpService.limitedAccessPassword(this.limitedAccessForm.get("password").value).pipe(Object(a.a)((function(){return e.limitedAccessLoading=!1}))).subscribe((function(){e.setLimitedAccessAllowed()}),(function(i){e.limitedAccessError=i.error}))}},{key:"setLimitedAccessAllowed",value:function(){var e=this;this.authHttpService.limitedAccessAllowed().subscribe((function(i){e.limitedAccessAllowed=i}))}}])&&i(r.prototype,o),n&&i(r,n),t}()).\u0275fac=function(e){return new(e||w)(d.Jb(c.c),d.Jb(s.b),d.Jb(l.a),d.Jb(m.a))},w.\u0275cmp=d.Db({type:w,selectors:[["app-login"]],decls:38,vars:8,consts:[[1,"container"],[1,"h1","font-weight-normal","text-center"],[1,"h4","font-weight-normal","text-center"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"form-login",3,"formGroup","ngSubmit"],["class","col-md-12 alert alert-danger","role","alert",4,"ngIf"],[1,"form-group"],["type","email","formControlName","username","placeholder","username","required","",1,"form-control"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],[1,"row","pt-2"],[1,"form-check"],["type","checkbox","id","checkRemember",1,"form-check-input"],["for","checkRemember",1,"form-check-label"],[1,"col-md-12","text-center"],["type","submit",1,"btn","btn-primary","col-md-6",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"col-md-6","text-center"],[1,"orange"],[1,"col-md-12"],["routerLink","/register",1,"btn","btn-primary","col-md-6",3,"ngClass"],["class","col-md-12 mt-5",4,"ngIf"],["role","alert",1,"col-md-12","alert","alert-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"col-md-12","mt-5"],[3,"formGroup","ngSubmit"],[1,"input-group",3,"ngClass"],["type","password","placeholder","Limited password","aria-label","Limited password","aria-describedby","button-addon2","formControlName","password",1,"form-control",3,"ngClass"],[1,"input-group-append"],["type","submit","id","button-addon2",1,"btn","btn-primary",3,"disabled"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(e,i){1&e&&(d.Ob(0,"div",0),d.Ob(1,"h1",1),d.yc(2,"VGMQ"),d.Nb(),d.Ob(3,"h4",2),d.yc(4,"Video Game Music Quiz"),d.Nb(),d.Ob(5,"div",3),d.Ob(6,"div",4),d.Ob(7,"form",5),d.Vb("ngSubmit",(function(){return i.loading||i.loginUser()})),d.wc(8,u,2,1,"div",6),d.Ob(9,"div",7),d.Ob(10,"label"),d.yc(11,"Username"),d.Nb(),d.Kb(12,"input",8),d.Nb(),d.Ob(13,"div",7),d.Ob(14,"label"),d.yc(15,"Password"),d.Nb(),d.Kb(16,"input",9),d.Nb(),d.Ob(17,"div",10),d.Ob(18,"div",4),d.Ob(19,"div",11),d.Kb(20,"input",12),d.Ob(21,"label",13),d.yc(22,"Remember me"),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(23,"div",14),d.Ob(24,"button",15),d.wc(25,f,1,0,"span",16),d.yc(26," Log in "),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(27,"div",17),d.Ob(28,"div",7),d.Ob(29,"label"),d.yc(30,"No "),d.Ob(31,"span",18),d.yc(32,"account"),d.Nb(),d.yc(33," ?"),d.Nb(),d.Ob(34,"div",19),d.Ob(35,"a",20),d.yc(36,"Register now"),d.Nb(),d.Nb(),d.wc(37,v,11,10,"div",21),d.Nb(),d.Nb(),d.Nb(),d.Nb()),2&e&&(d.zb(7),d.gc("formGroup",i.loginForm),d.zb(1),d.gc("ngIf",i.formErrorMessage),d.zb(16),d.gc("disabled",i.loading),d.zb(1),d.gc("ngIf",i.loading),d.zb(10),d.gc("ngClass",d.jc(6,y,!i.limitedAccessAllowed)),d.zb(2),d.gc("ngIf",!i.limitedAccessAllowed))},directives:[c.t,c.n,c.h,n.l,c.b,c.m,c.f,c.r,s.e,n.j],encapsulation:2}),w),O=o("PCNd"),k=[{path:"",component:N}],L=((A=function i(){e(this,i)}).\u0275mod=d.Hb({type:A}),A.\u0275inj=d.Gb({factory:function(e){return new(e||A)},imports:[[n.c,O.a,s.f.forChild(k)]]}),A)}}])}();